var _min=("undefined"!=typeof __min?__min:null)||_min||{};_min=function(e){"use strict";function t(e,t,n){function r(e,t){var n=null;switch(t=i(e,t),e){case s.Emitter.NEW_VIDEO_EVENT:n=h();break;case s.Emitter.NEW_SCRAPE_EVENT:n=g();break;case s.Emitter.CLICK:case s.Emitter.VIEWPORT:n=d();break;case s.Emitter.URL_REPORT:case s.Emitter.DAILY_USER:n=p();break;case s.Emitter.VIDEO_VIEWS:n=c();break;case s.Emitter.CUSTOM_EVENTS:n=u();break;case s.Emitter.CROWD_SOURCE:n=l()}n.push(e,t)}function i(t,n){switch(t){case s.Emitter.VIDEO_VIEWS:n.hadImpressionSession=e.parseBool(n.hadImpressionSession),n.hadImpressionSession?fe.setHadImpressionSession():n.hadImpressionSession=fe.hadImpressionSession()}return n}function o(){a.forEach(function(e){e.flush()})}var a=[],l=function(){var r=new y(e,t,n.UrlReporter,(!0));return r.setMasQueueLength(1),r.init(),a.push(r),function(){return r}}(),c=function(){var r=new y(e,t,n.UrlReporter,(!0));return r.init(),a.push(r),function(){return r}}(),u=function(){var r=new y(e,t,n.UrlReporter,(!0));return r.init(),a.push(r),function(){return r}}(),d=function(){var r=new y(e,t,n.UrlReporter,(!0));return r.enableStorage("_minEE1"),r.init(),a.push(r),function(){return r}}(),p=function(){var r=new y(e,t,n.UrlReporter,(!0));return r.init(),a.push(r),function(){return r}}(),h=function(){var r=new y(e,t,n.VideoData,(!1),s.ReportMethods.GET);return r.init(),a.push(r),function(){return r.setValidator(e.validateScraperURL),r}}(),g=function(){var r=new y(e,t,n.UrlReporter,(!1));return r.init(),a.push(r),function(){return r}}();return{getVideoViewsReporter:c,getCounterServerReporter:d,getPlayerContent:h,getPlayerContentDelayed:g,send:r,flushAll:o}}function n(e,t,n){var r=n;if(""!==r){e[m.QUERY_PARAMS_SOURCE]+=r+" ",0===r.indexOf(t)&&(r=r.slice(1));for(var i,o,a=r.split("&"),s=/^qadt([\d\w]+)$/,l=0;l<a.length;l++)i=a[l].split("="),o=i[0],s.test(o)&&(o=o.replace(s,"$1"),e[o]=i[1])}}function r(e,t,n,r){function i(t){t||(t=!1);var n=c(),r=e.getlistAsArray(n[P]);r=o(r),r.length>0&&p([r],t),n[P]=[],u(n)}function o(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,r){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)===n});return t=[],n.forEach(function(e,n,r){t.push(JSON.parse(e))}),t}function a(t,n){var r,i=c();i[n]=e.getlistAsArray(i[n]),r=i[n],r.push(t),u(i)}function c(){var e=t.getItem(A);if(e){if(e=JSON.parse(e),e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=r.extract(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=r.extract(e.clicksDelay[n])}else e={};return e}function u(e){if(e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=r.compress(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=r.compress(e.clicksDelay[n]);t.setItem(A,JSON.stringify(e))}function d(e,t){var n,r,i=typeof e;if("string"===i||"number"===i){if(n=c(),n[t]=n[t]||[],r=n[t],0===r.length)return null;for(var o=0;o<r.length;o++)if(r[o].id===e)return r[o];return null}}function p(t,r,i){if(!e.isArray(t))return void e.log("Report not an array");for(var o,a="Test:"+ie.getGroupCode(),l=0;l<t.length;l++){o=e.isArray(t[l])?t[l]:[t[l]];for(var c=0;c<o.length;c++){var u=JSON.parse(JSON.stringify(o[c]));if(n.send(s.Emitter.CLICK,u),i){var d={url:u.url,user_agent:navigator.userAgent,source:$.getAnalyticsSource(),publisher:oe.getPublisherIdNumber(),category:"rightClick",action:"sendLogDelayById",label:"highlight_id",value:u.highlight_id};n.send(s.Emitter.CUSTOM_EVENTS,d)}u=e.cloneObject(u),a+=","+u.id+":PClick:"+(u.product||"0");var p=ne.get(u.id,s.Emitter.CLICK_TYPE_CLICK,s.Emitter.CLICK_TYPE_CLICK,u.test_mode,u.product);p.isSent()||(u.uniq=!0,n.send(s.Emitter.CLICK,u),p.setAnalyticState(),a+=","+u.id+":UClick:"+(u.product||"0")),h.dispatchEvent(s.Events.DomWindow.CLICK)}}(oe.getCanReportImmediately()||r)&&n.getCounterServerReporter().flush()}function g(){i(),h.addEventListener(s.Events.PLAYER_VIDEO_CHANGED,i,this),h.addEventListener(s.Events.PLAYER_PLAYING,v,this)}function v(){setTimeout(i,0,!0)}function f(e){a(e,P),e.product==s.Emitter.PRODUCT_IN_ARTICLE?i():I.start()}function m(e){a(e,S)}function y(e,t){var n,r,i=typeof e;if(("string"===i||"number"===i)&&(n=c(),n[t]=n[t]||[],r=n[t],0!==r.length)){for(var o=0;o<r.length;o++)if(r[o].id===e){r.splice(o,1);break}u(n)}}function E(e){y(e,S)}function _(e){var t=d(e,S);t&&(t.type=s.Emitter.ANALYTICS_CLICK_EVENT,p([t],null,!0),E(e))}var A="minAnalytics",P="clicks",S="clicksDelay",I=new l.utils.Debounce(s.FLUSH_ANALYTICS,i);return{init:g,log:f,logDelay:m,removeLogDelayById:E,sendLogDelayById:_}}function i(e,t,n){function r(){if(e.isClickByPointEnabled()){var t=function(e){for(var t=n.getAllActiveApv(),r=0;r<t.length;r++){var i=t[r];if(i.getMinuteLogo()){var o=i.getMinuteLogo().getLogoElement();if(o.offsetParent){var a=o.getBoundingClientRect();0!=a.left&&0!=a.top&&0!=a.width&&(0==e.x||0==e.y&&e.target==window.document.body||Math.abs(a.left-e.x)<=a.width&&Math.abs(a.top-e.y)<=a.width&&h.dispatchEvent(s.Events.CLICK_FROM_POINT,{containerUnique:i._containerUnique}))}}}};document&&document.body?document.body.addEventListener("click",t,!0):document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",t,!0)},!1)}}return{init:r}}function o(){function e(){setInterval(function(){location.href!=t&&(t=location.href,h.dispatchEvent(s.Events.URL_MANIPULATION_INTERVAL_SERVICE,{interval:1e3}))},1e3)}var t=location.href;return{init:e}}if(_min.debug)window._minAlreadyLoaded=!1;else{if(window._minAlreadyLoaded)return void console.warn("Minute.ly already loaded");window._minAlreadyLoaded=!0}var a=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners=Object.create(null)};return t.prototype.addEventListener=function(t,n,r){var i=e(arguments);i=i.length>3?i.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:r,callback:n,isOnce:!1,args:i})},t.prototype.addEventListenerOnce=function(t,n,r){var i=e(arguments);i=i.length>3?i.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:r,callback:n,isOnce:!0,args:i})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var r=this.listeners[e].length,i=[],o=0;o<r;o++){var a=this.listeners[e][o];a.context===n&&a.callback===t||i.push(a)}this.listeners[e]=i}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var r,i,o=0,a={type:t,data:n},s=e(arguments).slice(2);s=[a].concat(s);var l=this.listeners[t];if(l){var c=l.length;for(r=0;r<c;r++)if(i=l[r],i&&i.callback){var u=s.concat(i.args);i.callback.apply(i.context,u),o+=1}for(r=c-1;r>=0;r--)i=l[r],i&&i.isOnce&&l.splice(r,1)}},t}(),s={};s.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),s.styles={},s.styles.OBJECT_FIT="object-fit",s.values={},s.values.RELATIVE="relative",s.values.ABSOLUTE="absolute",s.values.HIDDEN="hidden",s.values.COVER="cover",s.values.NONE="none",s.values.BLOCK="block",s.values.HUNDRED_PERCENT="100%",s.APV={Origin:{source:"[o]",target:"o",size:450}},s.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},s.config={},s.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},s.FLUSH_ANALYTICS=5e3,s.WindowKeys={COMPATIBILITY:"compatibility"},s.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",VIDEOS_UPDATE:"videosUpdate",APV_DISPOSED:"apvDisposed",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick",PLAYER_FOUND:"playerFound",PLAYER_PLACEHOLDER_FOUND:"playerPlaceholderFound",PLAYER_PLAYING:"playerPlaying",PLAYER_VIDEO_CHANGED:"playerVideoChanged",IMPRESSION:"impressionAnalytics",CLIENT_INIT_ANALYTICS:"clientInitAnalyticsEvent",DAILY_USER:"dailyUserCreated",FIRST_VIDEO_VIEW:"firstVideoView",SYSTEM_RUNNING:"systemRunning",NEW_VIDEO_DATE:"newVideoData",LOAD_MORE_FOUND:"loadmorefound",AUXCLICK_EVENT:"auxclick",MESSAGE_EVENT:"message",FORCE_FIND_ELMS:"forceFindElements",INARTICLE_CLICK:"inArticleClick",MOUSE_UP:"mouseup",REGULAR_CLICK:"regularClick",CONFIG_READY:"configReady",CLICK_FROM_POINT:"clickFromPoint",URL_MANIPULATION_INTERVAL_SERVICE:"URLManipulationIntervalService"},s.playmode={VIEWPORT:"viewport",HOVER:"hover"},s.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",MOUSE_OUT:"mouseout",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},s.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error",AD_EVENT:"adEvent"},s.Events.DomWindow={SCROLL:"scroll",FOCUS:"focus",SAFARI_FOCUS:"safariFocus",BLUR:"blur",RESIZE:"resize",CLICK:"click",VISIBILITY_CHANGE:"visibilitychange",ORIENTATION_CHANGE:"orientationchange"},s.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},s.Emitter={NEW_VIDEO_EVENT:2,VIDEO_VIEWS:42,CLICK:94,DAILY_USER:93,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,CUSTOM_EVENTS:"custom_analytic",CROWD_SOURCE:"crowd_source",CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_VIEW_ANDROID:10,ANALYTICS_SOURCE_WEB_VIEW_IOS:11,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c",MINUTE_VIEWPORT_EVENT:"minute_impression"},s.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},s.ReportMethods={GIF:"gif",GET:"get",POST:"post"},s.OriginalSrc={PATH:"path",ATTR:"attr"},s.integrationDataSet={ENABLE:"data-min-enable",ANCHOR:"data-min-anchor",PREVIEW:"data-min-preview",SIZE:"data-min-size",VIEWPORT_MASK:"data-min-mask",VIEWPORT_OBSERVER:"data-min-observer",METHOD:"data-min-method"},s.integrationDataSetElm={METHOD:"minMethod"},s.sizeSelector={CONTAINER:"CONTAINER"},e.debug?s.Events.MINUTE_READY="minuteReady_debug":s.Events.MINUTE_READY="minuteReady",s.logoPositions={"top-left":{left:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"top-right":{right:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-left":{left:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-right":{right:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"}},s.StorageKeys={DAILY_DATA_OBJ:"minDaily",SESSION_DATA_OBJ:"minSession",BUFFER_DATA_OBJ:"minBuffer",VERSION_DATA_OBJ:"minVersion",UNIQUE_DATA_OBJ:"minUniq"},s.StorageSubKeys={dailyUser:"dailyUser",testMode:"testMode",_minEE0:"_minEE0",_minEE1:"_minEE1",sessionUniqs:"sessionUniqs",minSessionSent:"minSessionSent",minSID:"minSID",minAnalytics:"minAnalytics",minFlavor:"minFlavor",experiment:"experiment",minUID:"minUID",minFromCamp:"minFromCamp",viewedHlts:"viewedHlts",hadImp:"hadImp"},s.SESSION_TTL=18e5,s.minuteClasses={},s.minuteClasses.CONTAINER="minute-container",s.cookiesKeysTable=function(){var e={};return e[s.StorageKeys.DAILY_DATA_OBJ]={expiration:"daily",keys:[s.StorageSubKeys.dailyUser,s.StorageSubKeys.testMode]},e[s.StorageKeys.SESSION_DATA_OBJ]={expiration:"session",keys:[s.StorageSubKeys.sessionUniqs,s.StorageSubKeys.minSessionSent,s.StorageSubKeys.minSID,s.StorageSubKeys.hadImp]},e[s.StorageKeys.BUFFER_DATA_OBJ]={expiration:null,keys:[s.StorageSubKeys._minEE0,s.StorageSubKeys._minEE1,s.StorageSubKeys.minAnalytics]},e[s.StorageKeys.VERSION_DATA_OBJ]={expiration:null,keys:[s.StorageSubKeys.experiment,s.StorageSubKeys.minFlavor]},e[s.StorageKeys.UNIQUE_DATA_OBJ]={expiration:null,keys:[s.StorageSubKeys.minUID,s.StorageSubKeys.minFromCamp,s.StorageSubKeys.viewedHlts]},e}(),e=e,e.ver="1.13.7.11",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var l={};l.publisher={},l.publisher.utils=l.publisher.utils||{};var c={};c.getDateNow=function(){return new Date},c.getTimeNow=function(){return c.getDateNow().getTime()};var u="production",d=c.getTimeNow(),p=window.performance?window.performance.timing.navigationStart:d,h=new a,g=(function(){var e=!1;return h.addEventListenerOnce(s.Events.SYSTEM_RUNNING,function(){e=!0}),function(){return e}}(),"/");"/"==g&&(g=location.hostname),function(){try{return Array.prototype.slice.call([1]),void(c.cloneArray=function(e){return Array.prototype.slice.call(e)})}catch(e){}var t=[];c.cloneArray=function(e){return t.slice.call(e)}}(),c.cloneObject=function(e){var t={};for(var n in e)if(c.isArray(e[n]))t[n]=c.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=c.cloneObject(e[n])}else t[n]=null;return t},c.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(c.isArray(e[n]))t[n]=c.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=c.extentObject(e[n],t[n])}else t[n]=e[n];return t},c.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},l.utils=l.utils||{},l.utils.Signal=function(){function e(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function t(e,t){if("function"!=typeof e)return void c.logError("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,r,i){var o,a=this._indexOfListener(t,r);if(a!==-1){if(o=this._bindings[a],o.isOnce()!==n)return void c.logError("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if(n=this._bindings[r],n._listener===e&&n.context===t)return r;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,n,r){return t(e,"add"),this._registerListener(e,!1,n,r)},addOnce:function(e,n,r){return t(e,"addOnce"),this._registerListener(e,!0,n,r)},remove:function(e,n){t(e,"remove");var r=this._indexOfListener(e,n);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){t=this._bindings.slice(),this._shouldPropagate=!0;do r--;while(t[r]&&this._shouldPropagate&&t[r].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var v=function(){function e(){return 0===o&&(o=i(d-p)),o}function t(){return 0===a&&(a=i(c.getTimeNow()-p)),a}function n(){return i(c.getTimeNow()-p)}function r(){return i(c.getTimeNow()-d)}function i(e){return 100*Math.floor(e/100)}var o=0,a=0;return{getScriptTime:e,getConfigTime:t,getTimeFromGenesis:n,getTimeFromMinuteGenesis:r}}(),f={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_ENABLE:"forceEnable",FORCE_CONTENT_CHANGED:"forceContentChanged"},m={QUERY_PARAMS_SOURCE:"queryParams",SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},l.utils=l.utils||{},l.utils.Debounce=function(e,t,n){function r(e){E=e||g,h("enableFilter(time="+E+")")}function i(e,t){h("setEcho(time="+e+", repeat="+t+")"),A=e||g,P=t||P}function o(){h("start");var e=arguments.length>0?c.cloneArray(arguments):m;C(e),w(e)}function a(){h("stop"),u(),_=0}function s(){h("kill"),u(),v=null,f=null,m=null,b=!0}function l(){return y>0}function u(){h("_clear"),l()&&(clearTimeout(y),y=0)}function d(e){I=e}function p(){D=!0,h("debug")}function h(e){D&&c.log("Deboucer >> "+I+" >> "+e)}var g=e,v=t,f=n||null,m=c.cloneArray(arguments).slice(3),y=0,E=0,_=0,A=0,P=1,S=0,I="",D=!1,b=!1,C=function(e){if(h("_checkTimeFilter"),!(E<=0)){var t=c.getTimeNow();0===_&&(_=t);var n=t>_+E;if(n){if(h("****** callback by _checkTimeFilter!"),b)return;if(!v)return void c.log("Debounce is dead, and timer is running... exiting");v.apply(f,e),_=t}}},w=function(e){h("_startEcho");var t=c.cloneArray(e);u(),S=0,y=setTimeout(function n(){if(S+1===P&&(t=t.concat(!0)),h("****** callback by echo!"),!b){if(!v)return void c.log("Debounce is dead, and timer is running... exiting");v.apply(f,t),S++,S<P&&setTimeout(n,g),a()}},g)};return{enableFilter:r,setEcho:i,start:o,stop:a,kill:s,isRunning:l,setName:d,debug:p}},l.utils=l.utils||{},l.utils.Timer=function(e,t,n){function r(){if(0===A){var e=arguments.length>0?c.cloneArray(arguments):_;b(e)}}function i(e){S=e||0}function o(){return I}function s(){I=0}function u(){D=null,f()}function d(){f(),y=null,E=null,_=null,D=null,P.removeAllEventListener()}function p(){return 0!==A}function h(){P.addEventListener.apply(P,c.cloneArray(arguments))}function g(){P.removeEventListener.apply(P,c.cloneArray(arguments))}function v(e){y&&y.apply(E,e),0===S||I<S?(I++,P.dispatchEvent(l.utils.Timer.Tick)):f()}function f(){A>0&&(clearInterval(A),A=0)}var m=e,y=t,E=n||null,_=c.cloneArray(arguments).slice(3),A=0,P=new a,S=0,I=0,D=null,b=function(e){D=e,f(),A=setInterval(function(){v(D)},m)};return{start:r,stop:u,kill:d,reset:s,isRunning:p,setCounterLimit:i,getCounter:o,addEventListener:h,removeEventListener:g}},l.utils.Timer.Tick="timerTick",l.utils.Timer.start=function(e){var t=new l.utils.Timer(e);return t.start(),t},function(){function e(e,t){function n(e){e=e||{},v=!!e.isTrackAlsoDisplay,f=e.parentElement||null}function r(){h.start()}function i(){h.stop()}function o(){c=null,h.kill(),h=null,d.removeAll(),d=null,p.removeAll(),p=null}function a(){return v?!!c.offsetParent:(f||document.body).contains(c)}function s(){var e=a();g!==e&&(g=e,g?(u.added&&u.added(),d.dispatch()):(u.removed&&u.removed(),p.dispatch()))}var c=e,u=t||{},d=new l.utils.Signal,p=new l.utils.Signal,h=new l.utils.Timer(500,s),g=a(),v=!1,f=null;return{start:r,stop:i,dispose:o,onAddToDom:d,onRemovedFromDom:p,setTrackingOptions:n}}l.utils.DomElementTracker=e}();var y=function(t,n,r,i,o){function a(e){C=e,w=!!n}function l(e){i&&(e.session=ee.getId(),e.user=ee.getUserId()),e.url=e.url||t.urls.getCurrentCanonicalURL(),e.stor=!!n}function c(e){A=e}function u(n,r){if(D){if(t.isArray(r))for(var i=0;i<r.length;i++)l(r[i]);else l(r);var o={ver:e.ver,flavor:e.flavor.name,type:n,payload:r};I&&(o.timestamp=t.getTimeNow()),w&&g(o),_.push(o),_.length>=A&&p()}}function d(){D=!1}function p(){if(document&&document.body){if(w&&(_=v(),m([])),0===_.length||b&&!b())return void(_=[]);var e,n=_.slice();_=[];var r=!0;if("string"==typeof n&&""!==n?e=0===n.indexOf('"[{\\"')?JSON.parse(n):n:t.isArray(n)&&n.length>0?e=JSON.stringify(n):t.isArray(n)&&0===n.length?r=!1:(t.sendErrorReport("EmitterEventsCorrupt"),r=!1),!le.isDebug()&&r&&!le.isActiveAll()){var i="data="+encodeURIComponent(t.b64EncodeUnicode(e));t.sendReportByUrl(P,i,S)}t.log("Emitter Send: "+JSON.stringify(n)),t.log(n)}}function h(e){b=e}function g(e){var t=v();t.push(e),m(t)}function v(){var e=f(C);return e&&0!==JSON.parse(e).length||!T||t.logWarning("Another chrome tab or IFrame, sent your emitters! Try closing other chrome tabs."),e=e?JSON.parse(e):[],T=!1,e}function f(e){if(!n)return null;try{return n.getItem(e)}catch(t){}return null}function m(e){e.length&&(T=!0),n&&n.setItem(C,JSON.stringify(e))}function y(){setInterval(p.bind(this),E)}var E=3e3,_=[],A=2,P=r||s.Urls.ServerData,S=o,I=t.parseBool(i,!0),D=!0,b=null,C=null,w=!1,T=!1;return{enableStorage:a,push:u,disable:d,flush:p,setValidator:h,init:y,setMasQueueLength:c}};!function(){l.reports={},l.reports.Levels={Debug:"debug",Info:"info",Warning:"warning",Error:"error"},c.sendReportByUrl=function(e,t,n){E.send(e,t,n)},c.sendLoggerReport=function(t){var n={ver:e.ver,env:u,publisher_id:e._publisher,source:$.getAnalyticsSource(),user_id:ee.getUserId(),session_id:ee.getId(),url:c.urls.getLocationUrl(),level:t.level||l.reports.Levels.Info,category:t.category||"general",message:"string"==typeof t?t:t.message};t.stack&&(n.stack=t.stack);var r=JSON.stringify(n);E.sendLog(r),c.log("Send report: "+r)},c.sendUserAgentLoggerReport=function(e){E.sendLog(e)},c.sendErrorReport=function(e){if(oe.getIsEnableErrorReport()){var t={};"string"==typeof e?t.message=e||"empty":t.message=e.message||"empty",e.stack&&(t.stack=e.stack),t.level=l.reports.Levels.Error,c.sendLoggerReport(t)}}}(),function(){c.urls={},c.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},c.urls.getStructuredRawByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var r="",i=n||l.publisher&&l.publisher.utils&&l.publisher.utils.URL_STRUCT||[s.UrlStructure.Origin,s.UrlStructure.PathName];if(0===i.length)return t;for(var o=0;o<i.length;o++)r+=i[o]!==s.UrlStructure.Origin||e.origin?i[o]!==s.UrlStructure.PathName||"/"===e[i[o]].charAt(0)?e[i[o]]:"/"+e[i[o]]:window.location.origin;return r}}(),c.urls.defaultParser=function(e){if(e&&(0===e.indexOf("http")||0===e.indexOf("/"))){var t=c.urls.getStructuredRawByUrl(e,[s.UrlStructure.PathName]);return c.urls.removeTrailingSlash(t)}return null},c.urls.getCanonicalURL=function(e){for(var t,n,r=l.publisher.getParsers&&l.publisher.getParsers()||[c.urls.defaultParser],i=0;i<r.length&&(n=r[i],!(t=n(e)));i++);return t||e},c.urls.getCurrentCanonicalURL=function(){return c.urls.getCanonicalURL(c.urls.getLocationUrl())},c.urls.getRawByUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},c.urls.parseQueryString=function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,r,i){t[n]=i}),t},c.urls.isUrlHomePage=function(){return"/"==location.pathname},c.urls.getLocationUrl=function(){return window.self===window.top?window.location.href:document.referrer}}(),function(){c.cleanWindowInstance=function(){var e=document.createElement("iframe");return e.style.display="none",document.head.appendChild(e),e.contentWindow}()}(),function(){var t=function(){function t(e){h=e}function n(){for(var e=0,t=arguments.length;e<t;e++)if(c.isArray(arguments[e]))for(var r=0,t=arguments[e].length;r<t;r++)n(arguments[e][r]);else 500===g.length&&g.shift(),g.push(arguments[0])}function r(){if(n(arguments[0]),e.debug===!0){var t=h?" [Test Group]":"";if("string"==typeof arguments[0]&&(arguments[0]=t+" "+(c.getTimeNow()-p)+"ms >> "+arguments[0]),window.self!==window.top&&"string"==typeof arguments[0]){var r=arguments.length>1&&"string"==typeof arguments[1]&&0===arguments[1].indexOf("color:#");arguments[0]=(r?"":"%c ")+"IFrame "+v.id+t+": "+arguments[0];var i=r?arguments[1]:"color:#"+v.color+";",o="undefined"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:"";c.consoleNative.log(arguments[0],i,o)}else c.consoleNative.log.apply(console,arguments)}}function i(){e.debug===!0&&c.consoleNative.log.apply(console,arguments)}function o(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:13px";c.log(t,n)}function s(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FF0000;font-weight: bold;font-size:14px";c.log(t,n)}function l(e,t,n){d.addEventListener(e,t,n)}function u(){return g}var d=new a,h=null,g=[],v={id:Math.floor(1e3*Math.random()),color:function(){function e(){return Math.floor((Math.ceil(256*Math.random())+(/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(navigator.userAgent)?0:255))/2)}return e().toString(16)+e().toString(16)+e().toString(16)}()};return{log:r,logObject:i,logWarning:o,logError:s,setTestGroup:t,addEventListener:l,getBuffer:u}};l.utils=l.utils||{},l.utils.logger=new t,e.logger=l.utils.logger}(),c.log=l.utils.logger.log,c.logObject=l.utils.logger.logObject,c.logWarning=l.utils.logger.logWarning,c.logError=l.utils.logger.logError,c.setTestGroup=l.utils.logger.setTestGroup,c.consoleNative=c.cleanWindowInstance.console,function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}(),function(){Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=t[n];return r})}()}(),function(){function t(){if(n)try{n()}catch(t){}var r=e.debugParams[f.PREVENT_PAGE_LOAD]||"";if(h.dispatchEvent(s.Events.WINDOW_DISPOSE),""!==r)return r}var n=window.onbeforeunload;window.onbeforeunload=t}(),c.globalTasks={},c.globalTasks.listenToWindowErrors=function(){window.addEventListener&&window.addEventListener("error",function(e){e.error&&c.reportErrorIfNeeded(e.error)})},c.isDebugEnabled=function(){return c.debugParamsOverrides(),e.debug},c.isNative=function(e){return/\{\s*\[native code]\s*}/.test(""+e)},c.reportErrorIfNeeded=function(t){var n=/(mi-[\d.]*\.js)/i;if(t&&t.stack&&n.test(t.stack)){c.log("Error found!");var r={ver:e.ver,flavor:e.flavor.name,message:t.message,stack:t.stack};c.sendErrorReport(r)}},c.sendBeaconNative=function(){return navigator.sendBeacon||c.cleanWindowInstance.navigator.sendBeacon?c.isNative(navigator.sendBeacon)?navigator.sendBeacon:c.isNative(c.cleanWindowInstance.navigator.sendBeacon)?c.cleanWindowInstance.navigator.sendBeacon:null:null}(),c.generateUID=function(){function e(){return Math.floor((1+Math.random())*c.getTimeNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},c.timestampDiffInSec=function(e,t){return Math.floor((e-t)/1e3)},c.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var n,r,i,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)n=e.charCodeAt(d++),r=e.charCodeAt(d++),i=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},c.timeRounder=function(e){return Math.round(10*e)/10},c.getComputedStyle=function(e){return window.getComputedStyle(e)},c.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},c.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},c.extractElementSize=function(e){var t=e.getBoundingClientRect(),n=parseFloat(t.width),r=parseFloat(t.height);return{width:n,height:r,error:""}},c.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},c.ElementObjectFit=function(){function e(e){var t="0% 0%";e.style.transformOrigin=t,e.style.webkitTransformOrigin=t,e.style.msTransformOrigin=t,e.style.mozTransformOrigin=t,e.style.oTransformOrigin=t,e.style.maxWidth="none",e.style.maxHeight="none";var n=e.parentNode,r=e.style.borderRadius;0!=r&&(n.style.borderRadius=r,n.style.overflow="hidden")}function t(t,n){if(t.parentNode){var r=c.getMediaElementSize(t);if(r){var i,o=c.getComputedStyle(n);if(("100%"!==o.width||"100%"!==o.height)&&"auto"!==o.width&&"auto"!==o.height){var a,s=r[0],l=r[1],u=parseFloat(o.width),d=parseFloat(o.height),p=d/l;s*p<u&&(p=u/s),a=(s*p-u)/2,p=Math.ceil(10*p)/10,i="scale("+p+")",e(t),t.style.transform=i,t.style.msTransform=i,t.style.mozTransform=i,t.style.webkitTransform=i,t.style.oTransform=i,t.style.width="auto",t.style.height="auto";var h="rtl"===o.direction;h?t.style.right="-"+a+"px":t.style.left="-"+a+"px"}}}}function n(t){t.parentNode&&(e(t),t.style.width="100%",t.style.height="100%")}function r(e){if(!$.isObjectFitSupported()&&e.originalElement){var t=new MutationObserver(function(){i(e)});t.observe(e.originalElement,{attributes:!0}),i(e)}}function i(e){var r;return e.styleOverrides=e.styleOverrides||{},e.isFullSize=c.parseBool(e.isFullSize,!1),e.styleOverrides[a]?void t(e.mediaElement,e.originalElement,e.styleOverrides[a]):(r=e.styleOverrides[o]?e.styleOverrides[o]||e.mediaElement.style.objectFit:e.mediaElement.style.objectFit||"cover",void("cover"===r&&(e.isFullSize?n(e.mediaElement):t(e.mediaElement,e.originalElement))))}var o="object-fit",a="object-fit-polyfill";return{set:r}}(),c.getProtocol=function(){var e="https:"===document.location.protocol?"https":"http";return function(){return e}}(),c.setUrlProtocol=function(){return function(e){return 0===e.indexOf("http")?e:c.getProtocol()+"://"+e}}(),c.isPromise=function(e){return!!e.then},c.appendDebugMffHashData=function(){var t=document.createElement("a");return function(n){return e.debugMff?(t.href=n,t.hash?n:n+"#"+e.debugMff):n}}(),c.appendDebugToolsQueryData=function(){var t=document.createElement("a");return function(n){var r=c.getAllDebugParamsString();return t.href=n,r&&(t.search+=(t.search?"&":"")+r),e.debugMff&&(t.hash+=e.debugMff),t.href}}(),c.getAllDebugParamsString=function(){for(var t=Object.keys(f),n="",r=0;r<t.length;r++){var i=t[r],o=e.debugParams[f[i]];o&&(n&&(n+="&"),n+="qadt"+f[i]+"="+o)}return n},c.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var n=c.parseUrlDebugParams();e.debugParams=n,"undefined"!=typeof n[f.ENABLE_DEBUG]&&(e.debug="true"==n[f.ENABLE_DEBUG]),
c.parseScriptDomain()}},c.parseUrlDebugParams=function(){var e=document.createElement("a"),t={};return e.href=c.urls.getLocationUrl(),t[m.QUERY_PARAMS_SOURCE]="",n(t,"?",e.search),n(t,"#",e.hash),t},c.parseScriptDomain=function(){var t="snippet.minute.ly",n="d2d4r7w8.map2.ssl.hwcdn.net",r=c.getScriptHostname();e.debugParams[m.IS_PROCUTION]=r===t||r===n,e.debugParams[m.IS_PROCUTION]&&(r=""),e.debugParams[m.SCRIPT_HOSTNAME]=r},c.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),c.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n},c.validateScraperURL=function(){if(oe.isScraperEnable())if($.isIE()||$.isEdge())c.log("** Scraper disabled on IE and Edge. **");else{if(c.isCurrentUrlFilterValid(oe.getFilterScraper()))return!0;c.log("** Scraper blocked by Filter URL. **")}else c.log("** Scraper disabled by configuration for this source **");return te.getPlayerContentDelayed().disable(),!1},c.isPlacementEnabled=function(t){return"undefined"!=typeof e.debugParams[f.ACTIVE_ALL]||c.isCurrentUrlFilterValid(oe.getFilterPlacements(t))},c.isCurrentUrlFilterValid=function(e){return c.isUrlFilterValid(c.urls.getLocationUrl(),e)},c.isUrlFilterValid=function(e,t){return!!c.isUrlMatchPattern(e,t.white)||0===t.white.length&&!c.isUrlMatchPattern(e,t.black)},c.isUrlMatchPattern=function(e,t){for(var n,r=0;r<t.length;r++)if(n=new RegExp(t[r],"i"),null!==e.match(n))return!0;return!1},c["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},c.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},c.extractImageUrlFromStyle=function(){var e=/^url\("?([^"]+)"?\)$/i;return function(t){return t&&e.test(t)?t.replace(e,"$1"):null}}(),c.isElementHasSize=function(e){if(!e)return!1;var t=c.getComputedStyle(e),n=parseInt(t.width,10),r=parseInt(t.height,10);if(r>10&&n>10||"auto"===t.height&&"auto"===t.width)return!0;var i=e.getBoundingClientRect();return i.width>10&&i.height>10},c.parseBool=function(e,t){return"undefined"==typeof e&&"undefined"!=typeof t?t:"true"===e||e===!0},c.parsePercentValue=function(e){if(void 0===e||e===!1||"false"===e)return!1;if(e===!0||"true"===e)return!0;var t=parseInt(e,10),n=100*Math.random();return n>t},c.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},c.generateShortUnique=function(){return"mxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},c.getRequestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};return e&&t(e),t},c.poll=function(e,t,n){var r=setInterval(function(){e()&&(clearInterval(r),t())},n)},c.isElementLazyLoad=function(e){if("IMG"!==e.tagName)return!1;var t=e.getAttribute("srcset"),n=e.getAttribute("src");return!n&&!t||(!(!(n&&n.indexOf("base64")>-1)||t)||0==e.offsetHeight)},c.contains=function(e,t){return e.indexOf(t)!==-1},c.listenOnce=function(e,t,n){function r(){e.removeEventListener(t,r),n.apply(null,arguments)}e.addEventListener(t,r)},c.isMidnightPassed=function(e){function t(e){return new Date(e+n)}var n=6e4*c.getDateNow().getTimezoneOffset(),r=new Date(e).getTime(),i=c.getDateNow().getTime(),o=t(r),a=t(i),s=a.getYear(),l=o.getYear(),u=a.getMonth(),d=o.getMonth(),p=a.getDate(),h=o.getDate();return s>l||u>d||p>h},c.calcDateNextMidnightUTC=function(){var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()+1),e.setTime(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),e},c.calcDatePlusMinutesUTC=function(e){var t=new Date;return t.setMinutes(t.getMinutes()+(e||5)),t},c.isElementToReplaceValid=function(e,t){if(!e)return!1;var n=c.extractElementSize(t);if(n.width<=oe.getMinimumWidth())return!1;var r=t.clientWidth,i=t.clientHeight;return!(r/i<oe.getValidRatio())},c.windowDispatchEvent=function(e){var t=null;try{t=new Event(e)}catch(n){t=document.createEvent("Event");var r=!1,i=!1;t.initEvent(e,r,i)}window.dispatchEvent(t)},c.isIFrame=function(){return window.self!==window.top},c.isInt=function(e){return e%1===0},c.isProdEnv=function(){return"production"===u},c.getOrigin=function(e){if("string"==typeof e){var t=e;e=document.createElement("a"),e.href=t}if(!e.origin){var n=e.port&&parseInt(e.port);e.origin=e.protocol+"//"+e.hostname+(n&&80!==n&&443!==n?":"+e.port:"")}return e.origin},c.isSupportIntersectionObserver=function(){var e=window.IntersectionObserver&&c.isNative(window.IntersectionObserver);return function(){return e}}(),c.getDayUTCCookie=function(e){e||(e=30);var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toUTCString()},c.addWinEventListener=function(e,t,n,r){t.addEventListener?t.addEventListener(e,n.bind(r),!1):t.attachEvent&&t.attachEvent(e,n.bind(r))},c.removeWinEventListener=function(e,t,n,r){t.addEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&t.detachEvent(e,n)},c.closest=function(e,t){var n;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});for(var r;e;){if(r=e.parentElement,r&&r[n](t))return r;e=r}return null},c.hasOwnProperty=Object.prototype.hasOwnProperty,c.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(c.hasOwnProperty.call(e,t))return!1;return!0},c.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},c.includes=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},c.isJsonString=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},c.isDateString=function(e){try{new Date(e)}catch(t){return!1}return!0},c.getParamsFromUrl=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=n.exec(e);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},function(){function e(t,n){e.__superCtor__.call(this),this.apvData=t,this.link=n,this._mobileContextMenuTimeoutCode=0,this._mobileTouchStartTime=0,this._mobileTouchEndTimeoutCode=0,$.isMobile()?this.attachMobileEvents():this.attachDesktopEvents()}var t=700,n=1500;c["extends"](e,a),e.prototype.attachMobileEvents=function(){var e=this,t=function(){e.handleLinkTouchStart(e.apvData)},n=function(){e.handleLinkTouchEnd(e.apvData)};this.link.addEventListener("touchstart",t),this.link.addEventListener("touchend",n),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("touchstart",t),e.link.removeEventListener("touchend",n)})},e.prototype.attachDesktopEvents=function(){var e=this,t=function(){e.contextMenuHandleOpen(e.apvData)};this.link.addEventListener?(this.link.addEventListener("contextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("contextmenu",t)})):(this.link.attachEvent("oncontextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.detachEvent("oncontextmenu",t)}))},e.prototype.handleLinkTouchStart=function(){var e=this;this._mobileContextMenuTimeoutCode=setTimeout(function(){e.contextMenuHandleOpen()},t),this._mobileTouchEndTimeoutCode=setTimeout(function(){e.handleTouchEndTimeout()},n),this._mobileTouchStartTime=c.getTimeNow()},e.prototype.handleLinkTouchEnd=function(){if(0!==this._mobileTouchEndTimeoutCode&&(clearTimeout(this._mobileTouchEndTimeoutCode),this._mobileTouchEndTimeoutCode=0),0!==this._mobileContextMenuTimeoutCode){clearTimeout(this._mobileContextMenuTimeoutCode),this._mobileContextMenuTimeoutCode=0;var e=c.getTimeNow()-this._mobileTouchStartTime;e<t&&this.dispatchEvent("contextMenuOpen",this.apvData)}},e.prototype.handleTouchEndTimeout=function(){this._mobileTouchEndTimeoutCode=0,this.handleLinkTouchEnd(this.apvData)},e.prototype.contextMenuHandleOpen=function(){this.dispatchEvent("contextMenuHandleOpen",this.apvData)},l.utils.ContextMenuObserver=e}(),function(){function e(e,t){function n(){f.addEventListener(h,i,!0),$.isMobile()&&f.addEventListener("touchstart",o,!0),$.isIE()||$.isEdge()?f.addEventListener(s.Events.MOUSE_UP,r,!0):f.addEventListener(s.Events.AUXCLICK_EVENT,i,!0)}function r(e){1===e.button&&(v.dispatchEvent(h),t&&(t(),d()))}function i(e){e.type===s.Events.AUXCLICK_EVENT&&e.button>=2||(v.dispatchEvent(h),t&&(t(),d()))}function o(){f&&(m=!1,f.addEventListener("touchmove",l,!0),f.addEventListener("touchend",c,!0),p=setTimeout(u,g))}function l(){m=!0}function c(e){m===!1&&i(e)}function u(){f&&(f.removeEventListener("touchmove",l,!0),f.removeEventListener("touchend",c,!0))}function d(){v.removeAllEventListener(),clearTimeout(p),f&&(f.removeEventListener(h,i,!0),f.removeEventListener(s.Events.AUXCLICK_EVENT,i,!0),f.removeEventListener("touchstart",o,!0),u(),f=null)}var p,h="click",g=350,v=new a,f=e,m=!1;return n(),{addEventListener:v.addEventListener.bind(v),removeEventListener:v.removeEventListener.bind(v),addEventListenerOnce:v.addEventListenerOnce.bind(v),dispose:d}}l.utils=l.utils||{},l.utils.MouseClickEventObserver=e}(),function(){function e(e){function t(){return P}function n(){if(!g){var e=void 0;g=new c.cleanWindowInstance.XMLHttpRequest,f===s?v+="_.gif?"+E:(f=u,v+="_.gif",e=E);try{g.open(f,v,!0)}catch(t){return}m&&g.setRequestHeader(i,m),g.onload=r,g.onerror=h,g.ontimeout=p,g.timeout=y,g.send(e)}}function r(){g.status>=200&&g.status<300?_.dispatch():A.dispatch("XHR_Complete:"+g.status)}function p(){A.dispatch("timeout")}function h(){A.dispatch("error:"+g.status)}var g,v=e.url||"",f=e.method||s,m=f===s?o:a,y=e.timeout||5e3,E=e.data,_=new l.utils.Signal,A=new l.utils.Signal,P="XHR"+d++;return{getID:t,load:n,onComplete:_,onError:A,Methods:{GET:s,POST:u}}}function t(t,n){var r=new e(t),i=function(e){p[r.getID()]=void 0,r.onComplete.removeAll(),r.onError.removeAll(),n(e)};return p[r.getID()]=r,r.onComplete.addOnce(i),r.onError.addOnce(i),r.load(),r}function n(e,n){return e.method=s,t(e,n)}function r(e,n){return e.method=u,t(e,n)}var i="Content-Type",o="image/gif",a="application/text",s="get",u="post",d=0;l.utils=l.utils||{},l.utils.ajax=l.utils.ajax||{},l.utils.ajax.XHRRequest=e;var p={};l.utils.ajax.sendGetRequest=n,l.utils.ajax.sendPostRequest=r}();var E=function(){function e(e){n(s.Urls.Logger,e,s.ReportMethods.POST)}function t(e){n(s.Urls.Error,e,s.ReportMethods.POST)}function n(e,t,n){if(!n&&U)return void p(e+"_.gif?"+t);n=n||s.ReportMethods.POST;var o=l.utils.ajax;switch(n){case s.ReportMethods.GIF:i(e,t);break;case s.ReportMethods.GET:o.sendGetRequest({url:e,data:t},r);break;case s.ReportMethods.POST:c.sendBeaconNative?c.sendBeaconNative.call(navigator,e+"_.gif",t):o.sendPostRequest({url:e,data:t},r)}}function r(e){}function i(e,t){var n=new Image;n.onload=function(){o(this)},n.onerror=function(){c.sendErrorReport("EmitterErrorContent:NoTrace"),o(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function o(e){try{document.body.removeChild(e)}catch(t){}}function a(){var e=U.getItem(D);e=e?JSON.parse(e):[],M=e}function u(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({owner:r.owner,url:r.url,state:r.state,time:r.time,retry:r.retry})}return t}function d(){clonedList=u(M),U.setItem(D,JSON.stringify(clonedList)),M=null}function p(e){var t={owner:k,url:e,image:null,state:b,time:0,retry:-1};a(),h(t),M.push(t),d()}function h(e){e.image=g(e),e.time=c.getTimeNow(),e.retry+=1,e.state=C,document.body.appendChild(e.image)}function g(e){var t=new Image;return t.onload=function(){v(e)},t.onerror=function(){f(e)},t.src=e.url,t}function v(e){a(),y(e),d()}function f(e){if(c.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===V)return a(),y(e),void d();var t=e.retry*N;setTimeout(function(){a(),m(e),d()},t)}function m(e){_(e),E(e),h(e),M.push(e)}function y(e){_(e),E(e)}function E(e){for(var t=-1,n=0;n<M.length;n++)e.url===M[n].url&&(t=n);t>-1&&M.splice(t,1)}function _(e){try{document.body.removeChild(e.image)}catch(t){}}function A(){a(),P(),d()}function P(){for(var e,t=0;t<M.length;t++)e=M[t],S(e)&&I(e)}function S(e){if(e.guid===k)return!0;var t=c.getTimeNow()-e.time;return t>R&&(e.guid=k,e.retry=-1,!0)}function I(e){var t=!1;switch(e.state){case b:case w:t=!0;break;case T:y(e);break;case C:var n=c.getTimeNow()-e.time;n>L&&(t=!0)}t&&m(e)}var D="_minRTrs",b=0,C=1,w=2,T=3,L=2e4,R=35e3,O=5e3,N=5e3,V=20,k=c.generateUnique(),U=null,M=null,F=null;return U&&(F=new l.utils.Timer(O,A),F.start()),{send:n,sendLog:e,sendError:t}}(),_=function(){function e(e,t){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.right>n.right,a=r.left<n.left,s=r.top>=n.bottom,l=r.bottom<=n.top,c={state:i.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=i.HIDDEN,c):(a?c.percentage=(r.right-n.left)/r.width:o&&(c.percentage=(r.width-(r.right-n.right))/r.width),c.percentage>0&&c.percentage<1?c.state=i.ANALYTICS_VISIBLE:c.percentage<=0?c.state=i.HIDDEN:c.state=i.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){var r,a=100*o(t);if(r=0===a?i.HIDDEN:100===a?i.FULLY_VISIBLE:i.ANALYTICS_VISIBLE,n!==window&&r!==i.HIDDEN&&n){var s=e(t,n);return s.percentage<a?s:{state:r,percentage:a}}return{state:r,percentage:a}}function n(e,n){var r=t(e,n).state;return r!==i.HIDDEN}function r(e,n){return t(e,n).percentage}var i={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function r(e,t){return e.getPropertyValue(t)}function i(t,o){o||(o=n(t));var a=r(o,"display");if("none"===a)return!1;var s=t.parentNode;return!e(s)||i(s)}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=r(o,"visibility");return"hidden"!==a&&"collapse"!==a&&i(e,o)}function a(e,t){return!(!e||e.width<=0||e.height<=0)&&(e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width)}return function(e,n){if(!e)return 0;var r={};try{r=e.getBoundingClientRect()}catch(i){return 0}var s=t(n);if(!a(r,s)||!o(e,n))return 0;var l=0,c=0;return r.top>=0?l=Math.min(r.height,s.height-r.top):r.bottom>0&&(l=Math.min(s.height,r.bottom)),r.left>=0?c=Math.min(r.width,s.width-r.left):r.right>0&&(c=Math.min(s.width,r.right)),l*c/(r.height*r.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:r,state:i}}(),A=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return"true"===e||"false"===e||t(e)?JSON.parse(e):e}function r(t){function i(r,o,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},i.defaults,a),"number"==typeof a.expires){var l=c.getDateNow();l.setMilliseconds(l.getMilliseconds()+864e5*a.expires),a.expires=l.toUTCString()}else"function"==typeof a.expires.toUTCString&&(a.expires=a.expires.toUTCString());try{s=JSON.stringify(btoa(o)),/^[\{\[]/.test(s)&&(o=s)}catch(u){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),r=r.replace(/[\(\)]/g,escape),document.cookie=[r,"=",encodeURIComponent(o),a.expires&&"; expires="+a.expires,a.path&&"; path="+a.path,a.domain&&"; domain="+a.domain,a.secure?"; secure":""].join("")}r||(s={});for(var d=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,h=0;h<d.length;h++){var g=d[h].split("="),v=g.slice(1).join("=");'"'===v.charAt(0)&&(v=v.slice(1,-1));try{var f=g[0].replace(p,decodeURIComponent);if(v=t.read?t.read(v,f):t(v,f)||v.replace(p,decodeURIComponent),r===f){s=decodeURIComponent(n(v));break}r||(s[f]=v)}catch(u){}}return s}}return i.setItem=function(e,t,n){n||(n=c.getDayUTCCookie(365)),i(e,t,{domain:g,expires:n})},i.getItem=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.removeItem=function(t,n){i(t,"",e(n,{domain:g,expires:-1}))},i.withConverter=r,i.isCookiesEnable=function(){var e=!1;try{i.setItem("_minTest","exist",1),e=!!i.getItem("_minTest"),i.removeItem("_minTest","true")}catch(t){return!1}return e},i.setDefault=function(){c.logWarning("no cookie domain was set, or it was set to a different domain, using default"),g=location.hostname},i}return r(function(){})},P=function(e){function t(){return e.isCookiesEnable()?e:(e.setDefault(),e.isCookiesEnable()?e:null)}return{getLocalStorageInstance:t}},S=function(e,t){function n(e){return _[e]||v(e)}function r(e,t){"undefined"!=typeof e&&o(e,t)}function i(t){if(t===E)return null;var n=new Date(e.getTimeNow()+m).toUTCString();return e.isMidnightPassed(n)&&(n=e.calcDateNextMidnightUTC()),n}function o(e,n){_[e]=n,"undefined"==typeof n&&(n=""),t.setItem(e,n,i(e))}function a(){h.addEventListener(s.Events.CLIENT_INIT_ANALYTICS,function(){g()}),window.addEventListener("click",function(){g()},!1),window.addEventListener(s.Events.AUXCLICK_EVENT,function(e){e.type===s.Events.AUXCLICK_EVENT&&e.button>=2||g()},!1),h.addEventListener(s.Events.IMPRESSION,function(){g()})}function l(){t&&(c(),a(),_=f())}function c(){for(var e=["","1","2","3","4","5","6","7","8","9"],n=0;n<e.length;n++)t.removeItem("minSessionToken"+e[n])}function u(){Object.keys(_).forEach(function(e){t.removeItem(e)}),_={}}function d(){return n(y)}function p(){return n(E)}function g(){Object.keys(_).forEach(function(e){var t=v(e);"undefined"!=typeof t&&null!==t&&o(e,_[e])})}function v(e){return _[e]=t.getItem(e),_[e]}function f(){var n=_,r=t.getItem(E);r||(r=e.generateUID(),o(E,r)),n[E]=r;var i=t.getItem(y);return i||(i=e.generateUID(),o(y,i)),n[y]=i,n}var m=18e5,y="minSID",E="minUID",_={};return{get:n,set:r,reset:u,init:l,getId:d,getUserId:p}},I=function(){function e(){var e=new Date(c.getTimeNow()+s.SESSION_TTL).toUTCString();return c.isMidnightPassed(e)&&(e=c.calcDateNextMidnightUTC()),e}function t(e){for(var t in i)if(i.hasOwnProperty(t))for(var n=i[t].keys,r=0;r<n.length;r++)if(n[r]===e)return t;return null}function n(t){switch(t){case"session":return e();case"daily":return c.calcDateNextMidnightUTC();default:return t}}var r=null,i={},o=function(e){function r(r,o){var a=t(r);if(!a)return void e.setItem(r,o);var s,l=i[a]||{},c=n(l.expiration);try{s=JSON.parse(e.getItem(a))}catch(u){s={}}s[r]=o,e.setItem(a,JSON.stringify(s),c)}function o(n){var r=t(n);if(!r)return e.getItem(n);var i=JSON.parse(e.getItem(r)||null)||{};return n in i?i[n]:null}function a(n){var r=t(n);if(!r)return void e.removeItem(n);var o=i[r]||{},a=o.expiration,s=JSON.parse(e.getItem(r)||null)||{};delete s[n],c.isEmpty(s)?e.removeItem(r):e.setItem(r,JSON.stringify(s),a)}function s(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])}return{setItem:r,getItem:o,removeItem:a,setConfig:s}};return{getInstance:function(e){if(!r){var t=e.getLocalStorageInstance();t?r=o(t):c.logWarning("No available cookie storage")}return r}}}(),D=function(){var e="min",t=function(t){return e+t},n=function(e){this.localStorage=e};return n.prototype.getItem=function(e){var n=this.localStorage.getItem(t(e));return null!=n&&(n=JSON.parse(n)),n},n.prototype.setItem=function(e,n){return this.localStorage.setItem(t(e),JSON.stringify(n))},n.prototype.removeItem=function(e){return this.localStorage.removeItem(t(e))},n}();!function(){var e={};l.utils=l.utils||{},l.utils.ApvElementUtils=e,e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")}}();var b=function(e,t,n){function r(e,t){try{var n=JSON.parse(e);if(n.origin===d)return n.event=t,n}catch(r){}return{type:h.INVALID}}function i(e,t){var n=r(e.data,e);n.type===h.DATA_RESPONSE&&t(n)}function o(e){t.addEventListener("message",function(t){var n=r(t.data,t);n.type===h.MINUTE_REQUEST_FROM_IFRAME&&e(n)})}function a(e,n){t.addEventListener("message",function(t){var i=r(t.data,t);i.subtype===e&&n(i)})}function s(e,t){e.addEventListener("message",function(e){i(e,t)})}function l(e,t,n){e.addEventListener("message",function(e){var i=r(e.data,e);i.subtype===t&&n(i)})}function c(n,r){var i={origin:d,type:h.MINUTE_REQUEST_FROM_IFRAME,window_origin:t.location.origin};i.subtype=n,e.extendObject(i,r||{}),t.parent.postMessage(JSON.stringify(i),"*")}function u(n,r,i){var o={origin:d,type:h.DATA_RESPONSE,isTestGroup:p,window_origin:t.location.origin,href:t.location.href};o.subtype=r,e.extendObject(o,i||{}),n.postMessage(JSON.stringify(o),"*")}var d="minute",p=null,h={DATA_REQUEST:"minuteDataRequest",DATA_RESPONSE:"minuteDataResponse",INVALID:"invalid",MINUTE_REQUEST_FROM_IFRAME:"minuteRequestFromIFrame"};return{addPostMessageListener:s,addParentListener:o,sendToParent:c,addPostMessageListenerBySubtype:l,addParentListenerBySubtype:a,sendToIFrame:u}},C=function(e){function t(e){var t,r,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}c.isDeviceMobile()?(t=i.mobile||{},r=i.os||{},n(d,r)):t=i.desktop||{},u=n(u,t)}function n(e,t){for(var n in t)e.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e){t(e)}function i(){if(!u[c.browserName()])return!1;if(c.browserMajorVersion()<u[c.browserName()])return!1;if(c.isDeviceMobile()){var e=c.osVersion();if(c.isOSAndroid())return a(e,d.android)>=0;if(c.isOSiOS())return a(e,d.ios)>=0}return!0}function o(){return c.isDeviceDesktop()?s.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP:s.Emitter.ANALYTICS_SOURCE_WEB_MOBILE}function a(e,t){for(var n=0;n<3;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function l(){return!(c.isBrowserIE()||c.isBrowserEdge())}var c=e,u={firefox:48,msie:99,edge:14,chrome:53,safari:9,crios:99},d={android:[4,4,4],ios:[10,3,3]};return{init:r,isBrowserSupported:i,isSafari:c.isBrowserSafari,isIE:c.isBrowserIE,isEdge:c.isBrowserEdge,isFF:c.isBrowserFirefox,isObjectFitSupported:l,isMobile:c.isDeviceMobile,isDesktop:c.isDeviceDesktop,isChrome:c.isBrowserChrome,isAndroid:c.isOSAndroid,isiPad:c.isDeviceIPad,isIosSafari:c.isBrowserSafari,getAnalyticsSource:o,isLPM:c.isLPM,isDataSaverOn:c.isDataSaverOn}},w=function(){function e(e){var t=null;return t=l.publisher.Compatibility?new l.publisher.Compatibility(e):new C(e)}return{create:e}},T=function(e,t,n){function r(e,n,r,c){ee=e.config,te=e.system,ee=t.extentObject(ne,ee),ae=r,re=c,ie=n,se=n.isDesktop(),i(),o(),a(),l(),u(),h.dispatchEvent(s.Events.CONFIG_READY,this)}function i(){ee.general=ee.general||{},ee.general.testGroupSize=parseInt(ee.general.testGroupSize||"10"),ee.general.errorReport=t.parsePercentValue(ee.general.errorReport),ee.general.shareMinuteEvent=t.parseBool(ee.general.shareMinuteEvent,!1),ee.general.shouldWaitForLoadEvent=t.parseBool(ee.general.shouldWaitForLoadEvent,!1)}function o(){ee.regularPlacer=ee.regularPlacer||{};var e=ee.regularPlacer.filter||{};e.mobile&&ie.isMobile()?e=ee.regularPlacer.filter.mobile:e.desktop&&se&&(e=ee.regularPlacer.filter.desktop),e.white=e.white||[],e.black=e.black||[],ee.regularPlacer.filter=e,ee.regularPlacer.blockingDistance=ee.regularPlacer.blockingDistance||{},ee.regularPlacer.blockingDistance.active=t.parseBool(ee.regularPlacer.blockingDistance.active,!0),ee.regularPlacer.blockingDistance.radius=parseInt(ee.regularPlacer.blockingDistance.radius||"600"),ee.regularPlacer.blockingDistance.staticBlockersSelector=ee.regularPlacer.blockingDistance.staticBlockersSelector||"emptyElement",ee.regularPlacer.blockingDistance.enableDupVidid=t.parseBool(ee.regularPlacer.blockingDistance.enableDupVidid,!1),ee.regularPlacer.validRatio=parseFloat(ee.regularPlacer.validRatio||.9),ee.regularPlacer.showLogo=t.parseBool(ee.regularPlacer.showLogo,!0),ee.regularPlacer.logoPosition=ee.regularPlacer.logoPosition||"top-right",ee.regularPlacer.clickByPoint=t.parseBool(ee.regularPlacer.clickByPoint,!1),ee.regularPlacer.applyZIndexReorder=t.parseBool(ee.regularPlacer.applyZIndexReorder,!0),ee.regularPlacer.renderModulus=parseInt(ee.regularPlacer.renderModulus||60),ee.regularPlacer.minimumWidth=parseInt(ee.regularPlacer.minimumWidth||100),ee.regularPlacer.watchFull=ee.regularPlacer.watchFull||{},ie.isMobile()&&ee.regularPlacer.watchFull.mobile?ee.regularPlacer.watchFull=ee.regularPlacer.watchFull.mobile:se&&ee.regularPlacer.watchFull.desktop&&(ee.regularPlacer.watchFull=ee.regularPlacer.watchFull.desktop),ee.regularPlacer.watchFull.active=t.parseBool(ee.regularPlacer.watchFull.active,!1),ee.regularPlacer.watchFull.active&&(ee.regularPlacer.watchFull.minimumWidth=parseInt(ee.regularPlacer.watchFull.minimumWidth||500),ee.regularPlacer.watchFull.text=ee.regularPlacer.watchFull.text||"Watch Full Video",ee.regularPlacer.watchFull.position=ee.regularPlacer.watchFull.position||["bottom","left"]),ie.isMobile()?ee.regularPlacer.playmode=s.playmode.VIEWPORT:ee.regularPlacer.playmode="hover"==ee.regularPlacer.playmode?s.playmode.HOVER:s.playmode.VIEWPORT,ee.regularPlacer.maxApvsPerPage=parseInt(ee.regularPlacer.maxApvsPerPage||999),ee.regularPlacer.noDuplicateVideos=t.parseBool(ee.regularPlacer.noDuplicateVideos,!1)}function a(){ee.inArticlePlacer=ee.inArticlePlacer||{},se&&ee.inArticlePlacer.desktop?ee.inArticlePlacer=ee.inArticlePlacer.desktop:!se&&ee.inArticlePlacer.mobile&&(ee.inArticlePlacer=ee.inArticlePlacer.mobile),ee.inArticlePlacer.active=t.parseBool(ee.inArticlePlacer.active,!1),ee.inArticlePlacer.showLogo=t.parseBool(ee.inArticlePlacer.showLogo,!0),ee.inArticlePlacer.logoPosition=ee.inArticlePlacer.logoPosition||"top-right",ee.inArticlePlacer.viewportMask=ee.inArticlePlacer.viewportMask||"emptySelector",ee.inArticlePlacer.filter=ee.inArticlePlacer.filter||{},ee.inArticlePlacer.filter.white=ee.inArticlePlacer.filter.white||[],ee.inArticlePlacer.filter.black=ee.inArticlePlacer.filter.black||[],ee.inArticlePlacer.watchFull=ee.inArticlePlacer.watchFull||{},ee.inArticlePlacer.watchFull.active=t.parseBool(ee.inArticlePlacer.watchFull.active,!1),ee.inArticlePlacer.watchFull.active&&(ee.inArticlePlacer.watchFull.minimumWidth=parseInt(ee.inArticlePlacer.watchFull.minimumWidth||500),ee.inArticlePlacer.watchFull.text=ee.inArticlePlacer.watchFull.text||"Watch Full Video",ee.inArticlePlacer.watchFull.position=ee.inArticlePlacer.watchFull.position||["bottom","left"])}function l(){ee.scraper=ee.scraper||{},ee.scraper.filter=ee.scraper.filter||{},ee.scraper.filter.white=ee.scraper.filter.white||[],ee.scraper.filter.black=ee.scraper.filter.black||[],ee.scraper.enableEventCollection=t.parseBool(ee.scraper.enableEventCollection,!1),ee.scraper.type2=t.parseBool(ee.scraper.type2,!1),ee.scraper.IAContainers=ee.scraper.IAContainers||"emptySelector"}function c(){return document.querySelector(ee.inArticlePlacer.viewportMask)||window}function u(){te.rezVideo||(te.rezVideo={s:100,m:200,l:300})}function d(){return oe}function p(){return"number"!=typeof oe&&(oe=oe.replace("MIN-","")),parseInt(oe)}function g(){return ee.scraper.filter}function v(e){return e==s.Emitter.PRODUCT_IN_ARTICLE?ee.inArticlePlacer.filter:ee.regularPlacer.filter}function f(){return te.rezVideo}function m(){return se}function y(){return ee.scraper.enableEventCollection}function E(){return ee.scraper.type2}function _(){return ee.scraper.IAContainers}function A(){return 50}function P(){return 1}function S(){return 1}function I(){return ee.regularPlacer.blockingDistance.staticBlockersSelector}function D(){return 10}function b(){return ee.general.testGroupSize}function C(){return"opacity 0.5s ease-out"}function w(){return!!t.sendBeaconNative&&!ie.isEdge()}function T(){return ee.placements||[]}function L(){return"Optimized by minute.ly"}function R(){return te.baseVideoUrl||""}function O(){return ee.general.errorReport}function N(){return ee.inArticlePlacer.active}function V(){return ee.inArticlePlacer.showLogo}function k(){return ee.inArticlePlacer.logoPosition}function U(){return ee.regularPlacer.maxApvsPerPage}function M(){return ee.regularPlacer.minimumWidth}function F(){return ee.regularPlacer.validRatio}function B(){return ee.regularPlacer.logoPosition}function x(){return ee.regularPlacer.renderModulus}function W(){return ee.regularPlacer.applyZIndexReorder}function H(){return ee.regularPlacer.showLogo}function z(){return ee.regularPlacer.watchFull}function G(){return ee.inArticlePlacer.watchFull}function j(){return ee.regularPlacer.blockingDistance.radius}function Y(){return ee.regularPlacer.clickByPoint}function q(){return te.server_version}function K(){return"https://minute.ly"}function J(){return ee.general.shareMinuteEvent}function Z(){return ie.isMobile()?s.playmode.VIEWPORT:"hover"==ee.regularPlacer.playmode?s.playmode.HOVER:s.playmode.VIEWPORT}function X(){return ee.general.shouldWaitForLoadEvent}function Q(){return ee.regularPlacer.noDuplicateVideos}function $(){return ee.regularPlacer.blockingDistance.active}var ee={},te={},ne={},re=null,ie=null,oe=e._publisher,ae=null,se=null;return{init:r,getFilterPlacements:v,getStaticBlockerSelector:I,getEpsilonPercentage:D,getMaxApvsPerPage:U,getMinimumWidth:M,getValidRatio:F,getLogoPosition:B,getRenderModulus:x,shouldApplyZIndexReorder:W,getShowLogo:H,getRegularPlacerWatchFullSettings:z,isClickByPointEnabled:Y,getBlockingDistanceRadius:j,noDuplicateVideos:Q,isBlockingServiceActive:$,getTestGroupSize:b,getIsEnableErrorReport:O,shareMinuteEvent:J,shouldWaitForLoadEvent:X,getPublisherId:d,getPublisherIdNumber:p,getRezVideo:f,getViewportAnalyticsPercentage:A,getViewportAnalyticsTimeSpan:P,getViewportPercentage:S,getEffectApvTransitionVideo:C,getCanReportImmediately:w,getTooltip:L,getBaseVideoUrl:R,getRelativePlacements:T,getServerVersion:q,getBaseLinkUrl:K,getPlaymode:Z,isInArticlePlacerActive:N,getInArticleViewportMask:c,getInArticleShowLogo:V,getInArticleLogoPosition:k,getInArticlePlacerWatchFullSettings:G,isScraperEnable:m,getFilterScraper:g,isScraperEnableEventCollection:y,getScraperType2:E,getIAContainers:_}},L=function(e,t,n,r){function i(e){var t=0;return 1==e&&(t=2),n.isMobile()&&t++,t}function o(e,t){return""+e.hltId+"_"+t}function a(e,n){var r=s(),i=o(e,n);if(!(r.indexOf(i)>-1)){for(;r.length>200;)r.shift();r.push(i),t.setItem(I,r.toString())}}function s(){var e=t.getItem(I);return e?e=e.split(","):[]}function l(e,t){for(var n=s(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<e.length;a++){var l=o(e[a],t);if(l==i)return e[a]}return null}function c(t,n){for(var r=null,o=i(n),a=0;a<t.length;a++){var s=t[a];s.weights[o]&&(r&&e.logError("more than one hlt is set to product"),r=s)}return r}function u(e,t){var n=c(e,t);a(n,t)}function d(t,n){for(var r=0,i=0;i<t.length;i++){var o=t[i];r+=o.weights[P[S[n]]]}for(var a=Math.random(),s=0,l=0;l<t.length;l++){var o=t[l];if(s+=o.weights[P[S[n]]],a<s/r)return o}e.logWarning("shouldnt get here")}function p(e,t){switch(e.length){case 0:return null;case 1:return e[0]}var n=l(e,t);return n||(n=d(e,t)),n}function h(e,t){return e&&(e.weights=[0,0,0,0],e.weights[P[t]]=1),e}function g(t){return t.weights.split||e.logWarning("weights are not string, make sure no two snippets and config is well"),t.weights=t.weights.split?t.weights.split(","):t.weights,t.weights=t.weights.map(Number),t}function v(t){for(var n=[],r={},i=0;i<S.length;i++)r[S[i]]=[];for(var o=0;o<t.length;o++){var a=t[o];a=g(a);for(var s=0;s<S.length;s++){var l=P[S[s]];a.weights[l]>0&&r[S[s]].push(a)}}for(var i=0;i<S.length;i++){var c=p(r[S[i]],i);if(c){var u=e.cloneObject(c);u=h(u,S[i]),f(n,u)&&e.logError("shouldnt choose two of the exact same"),n.push(u)}}return n}function f(e,t){for(var n=Object.keys(t),r=0;r<e.length;r++){var i=!1,o=e[r];if(n.length===Object.keys(o).length){for(var a=0;a<n.length;a++){if(e[r][n[a]]!==t[n[a]]){i=!1;break}i=!0}if(i)return!0}}return!1}function m(e){return D?Math.floor(100*Math.random())+1:e}function y(t){if(0==t.length)return t;for(var n=0;n<t.length;n++){var r=t[n];r.rank&&(e.isArray(r.rank)?e.logWarning("BlockingD: should not run twice on rank param..."):r.rank=r.rank.split(","),
r.rank=parseFloat(r.rank[P.REGULAR]),r.rank=m(r.rank))}return t}function E(e){var t=[];switch(e.length){case 0:t=[];break;case 1:var n=g(e[0]);t=[n];break;default:t=v(e)}return t=y(t)}function _(t,n){for(var r=i(n),o=!1,a=0;a<t.length;a++){var s=t[a];if(s.weights[r]>0){if(0==!!s.vidUrl)continue;o&&e.logError("shouldnt be more than one highlight per product at this stage"),o=!0}}return o}function A(){D=Math.floor(100*Math.random())<r.getEpsilonPercentage(),D&&e.log("BlockingD: This page is now Epsilon")}var P={};P.REGULAR=n.isDesktop()?0:1,P.IN_ARTICLE=n.isDesktop()?2:3;var S=Object.keys(P),I="ViewedHlts",D=!1;return{init:A,initActiveHighlights:E,setHighlightViewed:u,getHltByProduct:c,hasAPVByProduct:_}},R=function(e,t){function n(n){function r(){if(h=parseInt(_.id),E=_.articleUrl,v=e.parseBool(_.doesCollect),g=parseInt(_.minVidId),f=_.videoRatio?parseFloat(_.videoRatio):1.78,m=_.highlights,y=_.vidId,m&&e.isArray(m))for(var t=0;t<m.length;t++)m[t].vidUrl=A+m[t].vidUrl}function i(){return h}function o(e){return se.hasAPVByProduct(m,e)}function a(){return E}function s(){return v}function l(){return y}function c(){return g}function u(){return m}function d(){return f}function p(){return!(!m.hltId||!m.vidUrl)}var h,g,v,f,m,y,E,_=e.cloneObject(n),A=t.getBaseVideoUrl();return r(),{getArticleId:i,getArticleUrl:a,getDoesCollect:s,getPublisherVideoId:l,getVideoDBId:c,getHighlights:u,getVideoRatio:d,hasAPVByProduct:o,isApvEnabled:p}}function r(e){return new n(e)}function i(e,t){return new n({id:Math.floor(1e5*Math.random()),doesCollect:!1,minVidId:Math.floor(1e5*Math.random()),vidId:t||Math.floor(1e6*Math.random()).toString(),highlights:[{hltId:Math.floor(1e4*Math.random()),vidUrl:"qa3-apv-static.snackly.co/videos/v-2bf2ee5b-7913-4553-23122-abae-63d202e97d48-s10.0-16.0",weights:"1, 1, 1, 1"}],articleUrl:e||"/2017/07/31/analyst-downgrades-facebook-predicts-nearly-20-percent-drop.html"},(!0))}return{create:r,createMock:i}},O=function(t,n,r,i,o){function a(e){var n=null;return function(){return null===n&&(n=e()),t.getOrigin(n)}}function l(e,t){return t+"_"+e}function c(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function u(e){for(var n,r=0;r<e.length;r++){n=e[r],n.highlights=o.initActiveHighlights(n.highlights);var a=i.create(n);C.push(a);var s=l(a.getPublisherVideoId(),a.getArticleUrl());T[s]?t.logWarning("didn't add duplicate unifiedKey"):(c(w,a.getArticleUrl(),a),c(T,a.getArticleUrl(),a),c(T,s,a),a.getDoesCollect()&&c(L,s,a))}}function d(n){D=n.videos||[],S=e.debugParams[f.ACTIVE_ALL]||e.debugParams[f.MINUTE_UI_TEST],t.log("VideoManager total original video count: "+D.length),u(D),t.log("VideoManager total videos for IA: "+Object.keys(T).length+" and Regulars: "+Object.keys(w).length)}function p(e){if(!v()){var n=e.videos||[];D=D.concat(n),t.log("VideoManager append total original video count: "+D.length),u(n,!0),t.log("VideoManager total valid video count: "+C.length),h.dispatchEvent(s.Events.VIDEOS_UPDATE)}}function g(){return b!==I}function v(){return S||localStorage&&!!localStorage.getItem("minActiveAll")}function m(){return C.length}function y(e){return!!e&&(!!v()||!!T[e])}function E(e){if(v())return w[Object.keys(w)[0]][0];if(e){e=t.urls.getCanonicalURL(e);var n=w[e];if(n&&0!=n.length){if(1===n.length)return n[0];for(var r=void 0,i=0;i<n.length;i++){var o=n[i];if(o.hasAPVByProduct(s.Emitter.PRODUCT_APV)){if(r){t.logError("more than one video is set as featured/regular for url: "+e);break}r=o}}return r}}}function _(e,n){n=n||(t.urls.isUrlHomePage()?e:t.urls.getCurrentCanonicalURL());var r=l(e,n),i=T[r];return i&&0!==i.length?(i.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),i[0]):null}function A(e,n){n=n||t.urls.getCurrentCanonicalURL();var r=l(e,n),i=L[r];return i&&0!==i.length?(i.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),i[0]):null}function P(e){return i.create({id:0,videoId:e,articleUrl:t.urls.getCurrentCanonicalURL(),doesCollect:!1,highlights:[]},!0)}var S,I=-2,D=[],b=I,C=[],w={},T={},L={};a(t.urls.getLocationUrl);return{init:d,isDebug:g,appendVideos:p,isActiveAll:v,getArticlesListLength:m,getRegularArticleDataByURL:E,generateArticleData:P,hasInArticleArticleDataForUrl:y,getInArticleArticleData:_,getCrowdSourceArticleData:A}},N=function(){function e(e){function t(){u.selectors=u.selectors||{}}function n(){return u.selectors.preview}function r(){return u.selectors.size||""}function i(){return u.selectors.anchor}function o(){return u.selectors.container}function a(){return u.selectors.viewportMask}function s(){return u.selectors.viewportObserver}function l(){return u.name}function c(){return u.method}var u=e;return t(),{getPreviewSelector:n,getSizeSelector:r,getAnchorSelector:i,getContainerSelector:o,getName:l,getMethod:c,getViewportMaskSelector:a,getViewportObserverSelector:s}}function t(t){return new e(t)}return{create:t}},V=function(e,t){function n(t){if(a=t.getRelativePlacements(),0===a.length)return void i.log("Configuration has NO PLACEMENTS!");for(var n=0;n<a.length;n++){var r=a[n];if(!r.selectors)return e.log("no selectors where set"),void(r.selectors={});r.selectors.preview=r.selectors.preview||"img",r.selectors.anchor=r.selectors.anchor||"a",r.selectors.click=r.selectors.click||"",s.push(o.create(r))}}function r(){return s}var i=e,o=t,a=[],s=[];return{init:n,getAllPlacements:r}},k=function(){function t(){i(),o(),a(),u(),p(),n()}function n(){window.addEventListener("visibilitychange",function(){d(s.Events.DomWindow.VISIBILITY_CHANGE)})}function r(e,t){var n=new l.utils.Debounce(t,d,null,e);n.enableFilter(),window.addEventListener(e,function(e){n.start()},!0)}function i(){var e=new l.utils.Debounce(m,d,null,s.Events.DomWindow.SCROLL);e.enableFilter();var t;$.isMobile()&&$.isSafari()&&(t=new l.utils.Debounce(1e3,d,null,s.Events.DomWindow.SAFARI_FOCUS),t.enableFilter()),window.addEventListener(s.Events.DomWindow.FOCUS,function(n){e.start(),t&&t.start()})}function o(){var e=function(){h.dispatchEvent(s.Events.DomWindow.BLUR)};window.addEventListener?window.addEventListener(s.Events.DomWindow.BLUR,e,!1):window.attachEvent&&window.attachEvent(s.Events.DomWindow.BLUR,e)}function a(){r(s.Events.DomWindow.RESIZE,v)}function u(){e.debugParams[f.DEBUG_VISIBILITY]&&c.log("DEBUG_VISIBILITY: scroll is calculated relative to window"),r(s.Events.DomWindow.SCROLL,g)}function d(e,t){h.dispatchEvent(e,!!t)}function p(){($.isMobile||$.isiPad())&&"undefined"!=typeof window.onorientationchange&&window.addEventListener(s.Events.DomWindow.ORIENTATION_CHANGE,function(){setTimeout(function(){d(s.Events.DomWindow.ORIENTATION_CHANGE,!0)},1e3)})}var g=100,v=50,m=50;return{init:t}}(),U=function(t,n){function r(e,t){t||(t={});var n=t.callbackName||"void",r=t.onSuccess||p,i=t.onTimeout||p,o=window.setTimeout(function(){window[n]=p,i()},d);window[n]=function(e){window.clearTimeout(o),r(e),window[n]=function(){}};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}function i(e){return("jsc"+c.b64EncodeUnicode(e||"JsonMinuteReadyNoURL")).replace(/=/g,"")}function o(e){return encodeURIComponent(c.b64EncodeUnicode(e))}function a(a){if(t.isBrowserSupported()){u=u||e._publisherDebugUrl||s.Urls.Configuration+"api/"+n.getServerVersion()+"/web/configuration/"+e._publisher+"/"+h+"/"+g+".json?",a.onSuccess=a.onSuccess||l,a.onTimeout=a.onTimeout||p;var d=u,f=a.pageUrl||c.urls.getCurrentCanonicalURL(),m=i(f),y={config:!1};d=d.replace(h,o(f)),d=d.replace(g,o(JSON.stringify(y))),d+="callback="+m,v.indexOf(f)>-1||(v.push(f),r(d,{callbackName:m,onTimeout:a.onTimeout,onSuccess:a.onSuccess}))}}function l(e){le.appendVideos(e)}var u,d=t.isMobile()?1e4:5e3,p=function(){},h="[article_url]",g="[params]",v=[];return{loadNextArticle:a}},M=function(){function e(e){var t={};for(var r in e){var i="undefined"!=typeof n[r];if(i){var o=n[r];t[o]=e[r]}else t[r]=e[r]}return t}function t(e){var t={};for(var n in e){var r="undefined"!=typeof i[n];if(r){var o=i[n];t[o]=e[n]}else t[n]=e[n]}return t}var n={id:"a",highlight_id:"b",comp:"c",publisher:"d",hadImpression:"e",hadImpressionSession:"f",url:"g",script_time:"h",config_time:"i",event_time_from_genesis:"j",event_time_from_minute_genesis:"k",test_mode:"l",playMode:"m",sub_test_group:"n",source:"o",type:"p",placementFunction:"q",uniq:"r",product:"s",placement:"t"},r=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},i=r(n);return{compress:e,extract:t}},F=function(e,t,n,r,i,o,a){function s(){return Math.floor(100*Math.random()+1)<=_}function l(){if(1==t.__minNoTestMode)return m=!1,a.setItem(v,!1),void e.logWarning("Owl no test mode!");var n="undefined"!=typeof o;if(n){if("clear"!==o)return m="true"==o,a.setItem(v,!0),void e.log("Force test group: "+m);e.log("Force RESET test group"),a.removeItem(v)}else;m=c(),y||(e.log("** Is Test Group: "+m),y=!0)}function c(){var t=a.getItem(v);return"undefined"!=typeof t&&null!==t||(t=s(),a.setItem(v,t,e.calcDateNextMidnightUTC())),t}function u(e,t){_=e,E=f.READY,l()}function d(){return E===f.READY}function p(){return m}function h(){return m===!0?"1":"0"}function g(){m=null,y=!1,E=f.NONE,_=null,ee.reset()}var v="testMode",f={NONE:0,PENDING:1,READY:2},m=null,y=!1,E=f.NONE,_=null;return{init:u,isReady:d,isTestGroup:p,getGroupCode:h,reset:g}},B=function(e,t){function n(){return{time:e.getTimeNow(),list:[]}}function r(){d=n(),o()}function i(){var n;d.time=e.getTimeNow(),n=JSON.stringify(d),n=n.replace(/"/g,""),t.setItem(u,n)}function o(){var e=t.getItem(u);d=e&&c.test(e)?a(e):d||n()}function a(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return n.indexOf("[]")===-1&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function s(t){function n(){return o(),d.list.indexOf(a)>-1}function r(){d.time=e.getTimeNow(),d.list.indexOf(a)>-1&&e.logError("Duplicated key in Usher! _key: "+a),d.list.push(a),i()}var a=t;return{isSent:n,setAnalyticState:r}}function l(e,t,n,r,i){var o=e.toString()+t+n+(r?"t":"f")+i;return new s(o)}var c=/{(time):\d+,(list):\[([\d\w,]*)+]}/,u="sessionUniqs",d={};return{get:l,init:r}},x=function(t,n,r,i,o,a){function l(e){g=n.isTestGroup(),h=r.isMobile(),f=!0,m=e}function c(e,n){(f||n)&&o.send(s.Emitter.VIEWPORT,t.cloneObject(e))}function u(e,t,n){var r=a.get(e.getArticleId(),t.placementFunction,s.Emitter.CLICK_TYPE_NONE,g,n);r.isSent()||(c(t),r.setAnalyticState())}function d(e){var n={test_mode:g,playMode:2,source:r.getAnalyticsSource()};return t.extendObject(n,e)}function p(n,i,o){var a=o&&o.getBelongToUrl()||t.urls.getCurrentCanonicalURL(),s={id:n.getArticleId(),highlight_id:o.getHighlightId(),comp:r.isBrowserSupported()?1:0,publisher:e._publisher,hadImpression:m.hadImpression(n.getPublisherVideoId()),hadImpressionSession:m.hadImpressionSession(),url:a,script_time:v.getScriptTime(),config_time:v.getConfigTime(),event_time_from_genesis:v.getTimeFromGenesis(),event_time_from_minute_genesis:v.getTimeFromMinuteGenesis()};return t.extendObject(s,d(i))}var h,g=null,f=!1,m=null;return{init:l,pushAnalytics:c,sendSessionImpression:u,getAnalyticPayload:d,getAnalyticPayloadWithArticleData:p}},W=function(e,t,n){function r(t){if(t&&n.shareMinuteEvent()){var r=t.apvData&&t.apvData.getBelongToUrl()||e.urls.getCurrentCanonicalURL(),i={url:r,target_url:t.apvData._rawAnchorValue||t.articleData.getArticleUrl(),test_group:ie.isTestGroup(),minute_apv_id:t.apvData.getHighlightId()};if(!t.apvData.uniq){var o=new CustomEvent(s.Emitter.MINUTE_VIEWPORT_EVENT,{detail:i});window.dispatchEvent(o)}}}return{dispatchImpression:r}},H=function(){function e(e){var t=e.getArticleData();t&&(i(t.getArticleId()),g(t,{type:s.Emitter.ANALYTICS_CLICK_EVENT,uniq:!1,placementFunction:s.Placements.HOVER_IMPRESSION,product:e.getProduct(),placement:e.getName()},!1,e),h.dispatchEvent(s.Events.REGULAR_CLICK,e))}function t(t,n){if(!(n.hasDisposed()||y.indexOf(t)>-1)){var r=new l.utils.MouseClickEventObserver(t,function(){e(n)});n.onDisposed().addOnce(function(){setTimeout(r.dispose.bind(r),2e3)}),o(n,t),y.push(t)}}function n(e){for(var n=c.cloneArray(e.getClickElements()),r=0;r<n.length;r++){var i=n[r];t(i,e)}t(e.getContainerElement(),e)}function r(e){e.getManualClick()&&t(e.getManualClick(),e)}function i(e){m>0&&(clearTimeout(m),m=0,ue.removeLogDelayById(e))}function o(e,t){var n=new l.utils.ContextMenuObserver(e,t);n.addEventListener("contextMenuOpen",v),n.addEventListener("contextMenuHandleOpen",u)}function a(e){i(e),m=setTimeout(function(){i(e)},f)}function u(e){var t=e.data,n=t.getArticleData();a(n.getArticleId());var r=t.getProduct(),i=he.getAnalyticPayloadWithArticleData(n,{type:s.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:s.Placements.HOVER_IMPRESSION,uniq:!1,product:r},t);ue.logDelay(i)}function d(t){t.hasDisposed()||t.getDomAdapter().addEventListener(s.Events.APV_LOGO_CLICK,function(n){e(t)})}function p(){var e=le.getRegularArticleDataByURL(c.urls.getCurrentCanonicalURL());e&&ue.sendLogDelayById(e.getArticleId())}function g(e,t,n,r){var i=t.product||0,o=i===s.Emitter.PRODUCT_IN_ARTICLE;if(r||(r=ve.getApvDataByKeyProduct(e.getPublisherVideoId(),i)),(o||n||oe.getCanReportImmediately())&&h.dispatchEvent(s.Events.INARTICLE_CLICK,r),ve.getShouldSendClickEvent(r)){var a=he.getAnalyticPayloadWithArticleData(e,t,r);ue.log(a)}ve.setClickAlreadySent(r)}function v(e){var t=e.data;ue.removeLogDelayById(t.getArticleData().getArticleId())}var f=6e4,m=0,y=[];return{addLinkSelector:n,addLogoClickListener:d,sendDelayedClicks:p,addManualAnchor:r,sendClick:g}}(),z=function(){function t(t){var n={id:e._publisher,user_agent:navigator.userAgent,uniq:t,test_mode:ie.isTestGroup(),url:c.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:$.getAnalyticsSource(),comp:$.isBrowserSupported(),stor:!!J.getLocalStorageInstance(),script_time:v.getScriptTime(),config_time:v.getConfigTime(),event_time_from_genesis:v.getTimeFromGenesis(),event_time_from_minute_genesis:v.getTimeFromMinuteGenesis()};te.send(s.Emitter.URL_REPORT,c.cloneObject(n)),t&&(n.uniq=!1,te.send(s.Emitter.URL_REPORT,n)),h.dispatchEvent(s.Events.CLIENT_INIT_ANALYTICS)}function n(){r=!1,ee.get(i)||(ee.set(i,!0),r=!0),t(r)}var r,i="minSessionSent";return{sendUrlReport:n}}(),G=function(t,n,r,i,o,a,l,c,u){function d(){var i={id:e._publisher,user_agent:navigator.userAgent,test_mode:n.isTestGroup(),url:t.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:r.getAnalyticsSource(),comp:r.isBrowserSupported(),stor:!0,script_time:a.getScriptTime(),config_time:a.getConfigTime(),event_time_from_genesis:a.getTimeFromGenesis(),event_time_from_minute_genesis:a.getTimeFromMinuteGenesis(),daily_user:l.getUserId()};te.send(s.Emitter.DAILY_USER,i)}function p(){var e=!!i.getItem(s.StorageSubKeys.dailyUser);e||(d(),i.setItem(s.StorageSubKeys.dailyUser,!0,t.calcDateNextMidnightUTC()),h.dispatchEvent(s.Events.DAILY_USER))}return{start:p}};!function(){function e(){this._observedElements=[]}var t;l.analytics=l.analytics||{};var n={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3};l.analytics.ViewportAnalyticsService=e,e.prototype.init=function(){var e=this;t=oe.getViewportAnalyticsPercentage(),h.addEventListener(s.Events.DomWindow.RESIZE,function(){e._debounceStartAll()}),h.addEventListener(s.Events.DomWindow.SCROLL,function(){e._debounceStartAll()}),e._debounceStartAll()},e.prototype.register=function(e){e.getDomAdapter().addEventListener(s.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().addEventListener(s.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),e.onDisposed().addOnce(this.unregister,this)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(s.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().removeEventListener(s.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent,this),e.getDomAdapter().removeEventListener(s.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),this.removeSubjectByApvData(e)},e.prototype.addObservedElement=function(e){var t=e.data,r=ie.isTestGroup()?t.apvData.getElementToReplace():t.apvData.getApvPlayer().getApvElement(),i={};i.id=t.apvData.getUniqId(),i.articleData=t.apvData.getArticleData(),i.elem=r,i.product=t.apvData.getProduct(),i.apvData=t.apvData,i.viewportMaskElement=t.apvData.getViewportMaskElement(),i.state=n.INIT;for(var o=!1,a=0;a<this._observedElements.length;a++)if(this._observedElements[a].id===t.apvData.getUniqId()){this._observedElements[a]=i,o=!0;break}o||this._observedElements.push(i),this.attachClickListeners(i.apvData),i.debounce=new l.utils.Debounce(oe.getViewportAnalyticsTimeSpan(),this._handleObservedElementDebounce,this,i),i.debounce.enableFilter(),i.apvData.getDomAdapter().addEventListener(s.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent.bind(this))},e.prototype.removeSubjectByApvData=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t];if(e.getUniqId()===n.id){n.apvData=null,n.articleData=null,n.viewportMaskElement=null,n.elem=null,n.debounce.kill(),n.debounce=null,this._observedElements.splice(t,1);break}}},e.prototype.handleDomAdapterViewportEvent=function(e){var t=e.data.apvData,n=e.data.percentsVisible>=oe.getViewportAnalyticsPercentage();this.notifyVisible(t,n)},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e,t){for(var n=0;n<this._observedElements.length;n++){var r=this._observedElements[n];if(r.apvData===e)return r.isVisible=t,void r.debounce.start()}},e.prototype.notifyVisibleFromMutant=function(e){var t=this;setTimeout(function(){t.notifyVisible(e.data.apvData)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e)&&oe.getViewportAnalyticsTimeSpan()>=0&&setTimeout(this.doUpdate.bind(this,e,!0),oe.getViewportAnalyticsTimeSpan())},e.prototype.doUpdate=function(e,t){var r;return r=!(!c.isIFrame()&&!document.hasFocus())&&e.isVisible,(!e.apvData||!e.apvData.hasDisposed())&&(r?this._handleVisible(e,!!t):e.state=n.OUT_VIEWPORT,r)},e.prototype._handleVisible=function(e,t){switch(e.state){case n.IN_VIEWPORT:t&&(this._inViewport(e),e.state=n.DONE);break;case n.INIT:case n.OUT_VIEWPORT:e.state=n.IN_VIEWPORT}},e.prototype._inViewport=function(e){e.apvData&&e.apvData.getShouldSendImpression()&&this.sendImpression(e)},e.prototype.sendImpression=function(e){this.setHadImpressionSession(),e.apvData.setImpressionHasSent();var t=he.getAnalyticPayloadWithArticleData(e.articleData,{type:s.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:s.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.apvData.getProduct(),placement:e.apvData.getName(),script_time:v.getScriptTime(),config_time:v.getConfigTime()},e.apvData);Ae.dispatchImpression(e),he.pushAnalytics(t),ve.setImpressionSent(e.apvData),this.sendSessionImpression(e),se.setHighlightViewed(e.apvData.getHighlights(),e.apvData.getProduct()),h.dispatchEvent(s.Events.IMPRESSION)},e.prototype.sendSessionImpression=function(e){var t=e.apvData.getProduct(),n=he.getAnalyticPayloadWithArticleData(e.articleData,{type:s.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:s.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t,placement:e.apvData.getName(),script_time:v.getScriptTime(),config_time:v.getConfigTime()},e.apvData);he.sendSessionImpression(e.articleData,n,t)},e.prototype.attachClickListeners=function(e){if(!ve.getIsClickRegistered(e)){switch(e.getProduct()){case s.Emitter.PRODUCT_APV:H.addLogoClickListener(e)}H.addManualAnchor(e),H.addLinkSelector(e),ve.setIsClickRegistered(e,!0)}},e.prototype.hadImpression=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t],r=n.articleData.getPublisherVideoId()===e;if(r&&n.apvData.getDidImpressionSent()&&n.apvData.getProduct()===s.Emitter.PRODUCT_IN_ARTICLE)return!0}return!1},e.prototype.hadImpressionSession=function(){return c.parseBool(Z.getItem(s.StorageSubKeys.hadImp))},e.prototype.setHadImpressionSession=function(){Z.setItem(s.StorageSubKeys.hadImp,!0)}}();var j=function(){function e(){return JSON.parse(localStorage.getItem(a)||"{}")}function t(e,t){d[e]=t;var n=JSON.stringify(d);localStorage.setItem(a,n)}function n(e,t,n,r){var i=t.exec(e);if(o.isArray(i)){var a=i[1],s=i[2];if(a.indexOf(n)>-1){var l=a.substring(n.length);r(l,s||void 0)}}}function r(e,t){return new p(e,t)}var i=null,o=null,a="__mff__",s="+mff",l="-mff",c=/[^#]*#(\+\w+)=(.*)/g,u=/[^#]*#(-\w+)/g,d={},p=function(r,a){o=r,a&&(i="string"==typeof a?a:o.appendDebugMffHashData(a.href),d=e(),n(i,c,s,function(e,n){t(e,n)}),n(i,u,l,function(e){t(e,void 0)}))};return p.prototype.get=function(e){return d[e]},p.prototype.CONSTS={DISABLE_VERSION:"disableVersion",FORCE_ENABLE:"forceEnable",REPORT_CONSOLE_LOGGER:"reportConsoleLogger"},{create:r}}();!function(){l.publisher.utils=l.publisher.utils||{};var e=l.publisher.utils;e._getIsFeatured=function(e,t){return!0},e._getPlayerUrlRaw=function(e,t){var n=document.querySelector("ul.video-playlist__items li.is-active");if(!n)return void c.log("VideoJSEdgeBrightcove: not a playlist");var r=n.querySelector("a.faux-block-link");return r?r.href:void c.log("VideoJSEdgeBrightcove: missing anchor")},e._getPlayerUrl=function(t,n){return c.urls.getCanonicalURL(e._getPlayerUrlRaw(t,n))}}(),function(){function e(){function e(e){var t=e.getSubType?e.getSubType():l.scrap.player.SubTypes.DEFAULT;h[e.getType()]=h[e.getType()]||{},h[e.getType()][t]=e}function t(e){var t=Object.values(l.scrap.PlayersNameEnum);t.indexOf(e.getName())!=-1&&(v[e.getName()]=e)}function n(e){return v[e]}function r(e,t){return h[e]&&h[e][t||l.scrap.player.SubTypes.DEFAULT]}function i(){return h}function o(){return v}function a(){return Object.keys(h)}function s(e){var t=Object.keys(l.scrap.REGISTRED_DRIVERS);t.indexOf(e.getName())>-1&&(g[e.getName()]=e)}function c(e){return g[e]}function u(){return f}function d(e){f[e.getName()]=e}function p(e){return f[e]}var h={},g={},v={},f={};return{addItem:e,addDetector:t,getDetector:n,getAllRegisterdDetectors:o,getItem:r,addDriver:s,getDriver:c,getAllItemTypes:a,getAllRegisterdItem:i,addPicker:d,getPicker:p,getAllRegisteredPickers:u}}l.scrap=l.scrap||{},l.scrap.utils=l.scrap.utils||{},l.scrap.player=l.scrap.player||{},l.scrap.detector=l.scrap.detector||{},l.scrap.driver=l.scrap.driver||{},l.scrap.picker=l.scrap.picker||{},l.scrap.plugin=l.scrap.plugin||{},l.scrap.utils.defineError=function(e,t,n){n=n?" "+n:"",c.logError("Scraper "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined."+n)},l.scrap.REGISTRED_DRIVERS=JSON.parse("{}"),l.scrap.PlayersNameEnum=JSON.parse('{"VideoJSEdgeBrightcove":"VideoJSEdgeBrightcove"}'),l.scrap.PlayerEnum={DEFAULT:99,DEFAULT_99:99,Flowplayer:1,OOYALA:2,YOUTUBE:6,DailyMotion:6,Jwplayer:8,VideoJSIFrame:12,VideoJS:13,Edge:17,ThePlatformFoxSports:26,ThePlatformBravo:29,NFL:32,ThePlatformCnbc:33,CINCOPA:34,VjsNew:36,Channel10:37,MLB:39,EdgeBrightcove:39,CBSsports:40,WsbtvAnvato:41,JWFox:42,ZEE5:43,Vidible:44,DUMONT:46,MMM:47,Fotbolls:48,MLB_FORGE:49,MAGENTA:50};var t=l.scrap.ScrapPlugin={VIDEO_VIEW:1,VISUAL_CLICKS:3,PLAYER_CONTENT_CHANGED:5,PLAYER_FOUND:7,PLACEHOLDER_FOUND:8,PLAYER_VIDEO_CHANGED:9};l.scrap.ScrapPluginAll=[t.VIDEO_VIEW,t.VISUAL_CLICKS,t.PLAYER_FOUND,t.PLACEHOLDER_FOUND,t.PLAYER_VIDEO_CHANGED],l.scrap.player.SubTypes={DEFAULT:"default"},l.scrap.driver={},l.scrap.driver.PlayerAction={NONE:"none",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",ENDED:"ended",SEEK_START:"seekStart",SEEK_END:"seekEnd",VOLUME_CHANGE:"volume",MUTE_CHANGE:"mute",FULLSCREEN:"fullscreen",NEW_VIDEO:"newVideo",REPLAY:"replay",FOCUS:"focus"},l.scrap.utils={},l.scrap.utils.roundValue=function(e){return Math.round(1e3*e)/1e3},l.scrap.consts={VOLUME_EMPTY:-2,TIME_EMPTY:-1},l.scrap.factory=function(){var t=new e,n=new e,r=new e,i=new e;return{addPlugin:r.addItem,getPlugin:r.getItem,addDetector:t.addDetector,getDetector:t.getDetector,getAllRegisterdDetectors:t.getAllRegisterdDetectors,addDriver:n.addDriver,getDriver:n.getDriver,addPicker:i.addPicker,getPicker:i.getPicker,getAllRegisteredPickers:i.getAllRegisteredPickers}}()}(),function(){function e(){}var t=l.scrap.utils.defineError;e.shouldRun=function(){return!0},e.prototype.getType=function(){t(null,"getType")},e.prototype.setPlayerCollection=function(e){},e.prototype.addDriver=function(e){},l.scrap.plugin.Base=e}(),function(){function e(){this._playerOnHold={},h.addEventListener(s.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}c["extends"](e,l.scrap.plugin.Base),e.getType=function(){return l.scrap.ScrapPlugin.PLACEHOLDER_FOUND},e.getName=function(){return"PlaceholderFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],r=this._playerOnHold[n];r&&le.hasInArticleArticleDataForUrl(r.url)&&(this.sendEvent(r),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){var t=le.getInArticleArticleData(e.videoId,e.url);t?this.sendEvent(e):(c.log("Player Placeholder found - WAITING for ArticleData:"),c.logObject(e),this._playerOnHold[e.videoId]=e)},e.prototype.sendEvent=function(e){var t=le.getInArticleArticleData(e.videoId,e.url);return t?(c.log("Player Placeholder Found - READY:"),c.logObject(e),void h.dispatchEvent(s.Events.PLAYER_PLACEHOLDER_FOUND,{container:e.element,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,articleData:t})):(c.log("Player Placeholder Found - does NOT have correct Video ID:"),void c.logObject(e))},l.scrap.plugin.PlaceholderFound=e,l.scrap.factory.addPlugin(e)}(),function(){function e(){this._playerOnHold={},h.addEventListener(s.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}c["extends"](e,l.scrap.plugin.Base),e.getType=function(){return l.scrap.ScrapPlugin.PLAYER_FOUND},e.getName=function(){return"PlayerFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],r=this._playerOnHold[n];r&&le.hasInArticleArticleDataForUrl(r.url)&&(this.sendEvent(r),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=le.getInArticleArticleData(e.videoId,e.data.url);t?this.sendEvent(e):(c.log("Player Found - WAITING for articleData:"),c.logObject(e),this._playerOnHold[e.playerId]=e)},e.prototype.sendEvent=function(e){var t=le.getInArticleArticleData(e.videoId,e.url);return t?(c.log("Player Found - READY:"),c.logObject(e),void h.dispatchEvent(s.Events.PLAYER_FOUND,{container:e.playerPlaceholder,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,autoplay:e.isPlayerStarted,articleData:t})):(c.log("Player Found - does NOT have correct Video ID:"),void c.logObject(e))},l.scrap.plugin.PlayerFound=e,l.scrap.factory.addPlugin(e)}(),function(){function e(){}c["extends"](e,l.scrap.plugin.Base),e.getType=function(){return l.scrap.ScrapPlugin.PLAYER_VIDEO_CHANGED},e.getName=function(){return"PlayerVideoChanged"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){e.onPlayerVideoChanged().add(this.handleDriver_PlayerVideoChanged,this)},e.prototype.handleDriver_PlayerVideoChanged=function(e){h.dispatchEvent(s.Events.PLAYER_VIDEO_CHANGED,{container:e.scrapData.playerPlaceholder,playerJS:e.scrapData.playerJS,articleUrl:e.scrapData.url,videoId:e.scrapData.videoId,newVideoId:e.videoId})},l.scrap.plugin.PlayerVideoChanged=e,l.scrap.factory.addPlugin(e)}(),function(){function t(){t.__superCtor__.call(this),this._driverList=[]}c["extends"](t,l.scrap.plugin.Base),t.getType=function(){return l.scrap.ScrapPlugin.VIDEO_VIEW},t.getName=function(){return"VideoViews"},t.prototype.getType=function(){return t.getType()},t.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this)},t.prototype.handleVideoView=function(t){h.dispatchEvent(s.Events.PLAYER_PLAYING,{videoId:t.videoId,counter:t.counter});var n={url:t.url,vid:t.videoId,test_mode:ie.getGroupCode(),comp:$.isBrowserSupported()?1:0,source:$.getAnalyticsSource(),publisher:e._publisher,hadImpression:t.hadImpression,hadImpressionSession:fe.hadImpressionSession(),counter:t.counter,script_time:v.getScriptTime(),config_time:v.getConfigTime()};te.send(s.Emitter.VIDEO_VIEWS,n)},l.scrap.plugin.VideoViews=t,l.scrap.factory.addPlugin(t)}(),function(){function e(){this._onPlayerInstanceFound=new l.utils.Signal,this._onPlayerFeaturedInstanceFound=new l.utils.Signal,this._onPlayerPlaceholderFound=new l.utils.Signal,this._onContainerPlaceholderList=new l.utils.Signal,this._detectorList=[],this._pickerList=[],this._counter=0,this._scraperTimer=null}l.scrap.DetectorsCollector=e,e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.init=function(){this.initPlayers(),this.initPicker(),this.startTimer(),this.detectNewPlayers()},e.prototype.initPlayers=function(){for(var e,t,n=l.scrap.factory.getAllRegisterdDetectors(),r=Object.keys(n),i=0;i<r.length;i++)e=l.scrap.factory.getDetector(r[i]),t=new e,t.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),t.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this),t.onContainerPlaceholderList().add(this.handleDetector_ContainerPlaceholderList,this),this._detectorList.push(t);0===this._detectorList.length&&c.log("No scrapers found to initialize.")},e.prototype.initPicker=function(){for(var e,t=l.scrap.factory.getAllRegisteredPickers(),n=Object.keys(t),r=0;r<n.length;r++)e=l.scrap.factory.getPicker(n[r]),this.createPicker(e);0===this._pickerList.length&&(this.createPicker(l.scrap.picker.Base),c.log("No picker found to initialize - using Base"))},e.prototype.addDriver=function(e){for(var t=0;t<this._pickerList.length;t++){var n=this._pickerList[t];n.addDriver(e)}e.onDisposed().addOnce(this.handleDriver_Disposed,this)},e.prototype.createPicker=function(e){var t=new e;t.setPlayerCollection(this),t.onPlayerFeaturedInstanceFound().add(this.handlePicker_PlayerFeaturedInstanceFound,this),this._pickerList.push(t)},e.prototype.handleDetector_PlayerInstanceFound=function(e){e.index=this._counter,this._onPlayerInstanceFound.dispatch(e),this._counter++},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype.handlePicker_PlayerFeaturedInstanceFound=function(e){this._onPlayerFeaturedInstanceFound.dispatch(e)},e.prototype.handleDetector_ContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype.handleDriver_Disposed=function(e){for(var t=0;t<this._detectorList.length;t++){var n=this._detectorList[t];n.playerDisposed(e.getID())}},e.prototype.startTimer=function(){this._scraperTimer=new l.utils.Timer(3e3,this.detectNewPlayers,this),this._scraperTimer.setCounterLimit(),this._scraperTimer.start()},e.prototype.detectNewPlayers=function(){for(var e=0;e<this._detectorList.length;e++){var t=this._detectorList[e];t.detectNewPlayers()}}}(),function(){function e(e){this._detectorCollection=e,this._pluginHash=[],this._init()}l.scrap.PluginsCollector=e,e.prototype.addDriver=function(e){for(var t=0;t<this._pluginHash.length;t++){var n=this._pluginHash[t];n.addDriver(e)}},e.prototype._init=function(){for(var e=0;e<l.scrap.ScrapPluginAll.length;e++){var t=l.scrap.factory.getPlugin(l.scrap.ScrapPluginAll[e]);
if(t)if(!t.shouldRun||t.shouldRun()){var n=new t;n.setPlayerCollection(this._detectorCollection),this._pluginHash.push(n)}else c.log("Plugin "+(t.getName()||t.getType())+" is not running.")}}}(),function(){function e(){e.__superCtor__.call(this),this._driverHash={},this._detectorCollection=new l.scrap.DetectorsCollector,this._detectorCollection.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),this._detectorCollection.init(),this._pluginsCollection=new l.scrap.PluginsCollector(this._detectorCollection),l.scrap.startUrlTracker(this._detectorCollection)}c["extends"](e,a);var t=l.publisher.utils;e.prototype.handleDetector_PlayerInstanceFound=function(e){this._driverHash[e.playerId]||this.createScrapDriver(e)},e.prototype.handleDriver_Disposed=function(e){this._driverHash[e.getID()]=void 0},e.prototype.createScrapDriver=function(e){var n,r=Object.keys(l.scrap.REGISTRED_DRIVERS);if(t.getDriverName?n=l.scrap.factory.getDriver(t.getDriverName(e)):1==r.length?n=l.scrap.factory.getDriver(l.scrap.REGISTRED_DRIVERS[r[0]]):0==r.length||c.logWarning("Dont know what driver to set, need coordinator"),!n)return void c.log("No driver registered. Please add your driver on 'registeredDrivers' configuration! ");var i=le.getCrowdSourceArticleData(e.videoId,e.url),o=new n;o.setArticleData(i),o.setScrapData(e),this._pluginsCollection.addDriver(o),this._driverHash[e.playerId]=o,o.onDisposed().addOnce(this.handleDriver_Disposed,this),this._detectorCollection.addDriver(o),o.init()},l.scrap.ScraperService=e}(),function(){function e(){this._state=0,this._onPlayerInstanceFound=new l.utils.Signal,this._onPlayerPlaceholderFound=new l.utils.Signal,this._onContainerPlaceholderList=new l.utils.Signal,this._foundList={},this._validatePlayerConfig(),this._setStateIdle()}var t=l.publisher.utils,n=/[^\d\w\s\-?!\u0590-\u05fe\.,]/g,r=l.scrap.player.EState={IDLE:1,SEARCHING:2,FOUND:3},i=l.scrap.utils.defineError;e.prototype._validatePlayerConfig=function(){},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.detectNewPlayers=function(e){this.isIdle()&&(this._state=r.SEARCHING,setTimeout(this._detectNewPlayers.bind(this),e?e:0))},e.prototype.playerDisposed=function(e){this._hasPlayerInstanceFound(e)&&(this._foundList[e]=!1)},e.prototype._detectNewPlayers=function(){},e.prototype._collectScraperData=function(e,t){var r={},i={};return r.data=i,i.duration=this._getVideoDuration(),i.version="NoName",i.video_id=this._getVideoId(e,t),i.stream=this._getVideoStream(e,t),i.url=this._getPlayerUrl(e,t),i.raw_url=this._getPlayerUrlRaw(e,t),i.title=(this._getVideoTitle(e,t)||"").replace(n,""),i.raw_title=c.b64EncodeUnicode(this._getVideoTitle(e,t)||""),i.publisher=oe.getPublisherId(),i.player_id=this.getScraperPlayerId(),r.index=-1,r.videoId=i.video_id,r.playerId=this._getPlayerId(e,t)||r.videoId,r.url=i.url,r.playerJS=e,r.playerHtmlElement=t,r.playerConfig=this._configPlayer,r.isLive=this._getIsLive(e,t),r.isAutoPlay=this._getIsAutoPlay(e,t),r.isPlayerStarted=r.isAutoPlay||this._getIsPlayerStarted(e,t),r.playerPlaceholder=this._getPlayerPlaceholder(e,t),r.isFeatured=this._getIsFeatured(e,t),r},e.prototype._setStateIdle=function(){this._state=r.IDLE},e.prototype.isIdle=function(){return this._state===r.IDLE},e.prototype._sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e)},e.prototype._sendContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype._sendPlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype._addPlayerInstanceFound=function(e){return this._foundList[e]=!0},e.prototype._hasPlayerInstanceFound=function(e){return this._foundList.hasOwnProperty(e)},e.prototype._getVideoId=function(e,t){i(this,"_getVideoId")},e.prototype._getVideoStream=function(e,t){i(this,"_getVideoStream")},e.prototype._getVideoTitle=function(e,n){return t&&t.getVideoTitle&&t.getVideoTitle(e)?t.getVideoTitle(e):document.title},e.prototype.getScraperPlayerId=function(){return null},e.prototype._getIsLive=function(e,t){return!1},e.prototype._getIsAutoPlay=function(e,t){return null},e.prototype._getIsFeatured=function(e,t){},e.prototype._getIsPlayerStarted=function(e,t){return!1},e.prototype._getPlayerId=function(e,t){return""},e.prototype._getPlayerSubType=function(e,t){return this._configPlayer.subType&&l.scrap.player.SubTypes[this._configPlayer.subType]||""},e.prototype._getPlayerUrl=function(e,t){return c.urls.getCurrentCanonicalURL()},e.prototype._getPlayerUrlRaw=function(e,t){return c.urls.getStructuredRawByUrl(c.urls.getLocationUrl())},e.prototype._getPlayerPlaceholder=function(e,t){return null},e.prototype.getVideoTags=function(e,n){if(t&&t.getTags)return t.getTags(e)},e.prototype._getVideoDuration=function(e,t){return 0},l.scrap.detector.Base=e}(),function(){function e(){this._articleData=null,this.scrapData=null,this._onDisposed=new l.utils.Signal,this._onPlayerAction=new l.utils.Signal,this._onPlayerProgress=new l.utils.Signal,this._onVideoView=new l.utils.Signal,this._onError=new l.utils.Signal,this._onPlayerInstanceFound=new l.utils.Signal,this._onPlayerVideoChanged=new l.utils.Signal,this._analyser=null,this._progressTimer=null,this._viewsCounter=0,this._hadImpression=null,this._handleFocusInEvent=null,this._handleFocusOutEvent=null,this._doesCollect=null,this._sessionId=c.generateUID()}var t=l.scrap.utils.defineError,n=l.scrap.driver.PlayerAction,r=!1;e.prototype.getID=function(){return this.scrapData.playerId},e.prototype.getType=function(){t(null,"getType")},e.prototype.getName=function(){t(null,"getName")},e.prototype.setArticleData=function(e){this._articleData=e},e.prototype.getArticleData=function(){return this._articleData},e.prototype.setScrapData=function(e){this.scrapData=e},e.prototype.checkVideoView=function(){t(null,"checkVideoView")},e.prototype.onPlayerAction=function(){return this._onPlayerAction},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype.onPlayerProgress=function(){return this._onPlayerProgress},e.prototype.onVideoView=function(){return this._onVideoView},e.prototype.onError=function(){return this._onError},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerVideoChanged=function(){return this._onPlayerVideoChanged},e.prototype.sendPlayerActionEvent=function(e,t){this._onPlayerAction.dispatch("status",t)},e.prototype.sendPlayerProgressEvent=function(e){this._onPlayerProgress.dispatch(e)},e.prototype.readyToSendCrowdSourceEvents=function(e,t){return!0},e.prototype.sendPlayerEvent=function(e,t){if(this._doesCollect&&this.readyToSendCrowdSourceEvents()&&this.isFirstVideoPlaying()&&this.getPlayerCurrentVideoId&&this._articleData.getPublisherVideoId()===this.getPlayerCurrentVideoId()){var n={cs_id:this._sessionId,article_id:this._articleData.getArticleId(),min_vid_id:this._articleData.getVideoDBId(),video_id:this.getPlayerCurrentVideoId(),min_playhead:this.getCurrentPlayhead(),min_event_type:t,min_metadata:this.getMeteData(t),event_timestamp:(new Date).getTime(),player:this.getPlayerName(),raw_event:JSON.stringify(e)};te.send(s.Emitter.CROWD_SOURCE,n)}},e.prototype.isFirstVideoPlaying=function(){return!0},e.prototype.getMeteData=function(){},e.prototype.getPlayerName=function(){return"base"},e.prototype.reportVideoView=function(){},e.prototype.reportError=function(){this.sendPlayerActionEvent(n.ERROR);var e={driverType:this.getType(),url:this.getCurrentUrl(),videoId:this.getCurrentVideoId(),playerId:this.scrapData.playerId};this._onError.dispatch(e)},e.prototype.sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e||this.scrapData)},e.prototype.reportPlayerVideoChanged=function(e){this._onPlayerVideoChanged.dispatch({scrapData:this.scrapData,videoId:e})},e.prototype.init=function(){this._articleData=this._articleData||le.generateArticleData(this.scrapData.id),this._canCollectEvents()?(this.startListenWindowFocusEvent(),this.sendCurrentFocusState(),r=!0):c.log("Will not collect video events"),this.trackDisposableDomElement()},e.prototype._canCollectEvents=function(){this._doesCollect=c.parseBool(this._doesCollect,!1);var e=$.isChrome()&&$.isDesktop()&&!$.isEdge()&&!$.isIE()&&!$.isSafari()&&!$.isFF();return this._doesCollect=!r&&oe.isScraperEnableEventCollection()&&this._articleData.getDoesCollect()&&e,this._doesCollect},e.prototype.trackDisposableDomElement=function(){var e=this._getDisposableDomElement();e&&(this._domTracker=new l.utils.DomElementTracker(e),this._domTracker.setTrackingOptions({parentElement:this._getDisposableDomElementParent()}),this._domTracker.onRemovedFromDom.add(this.dispose,this),this._domTracker.start())},e.prototype._getDisposableDomElement=function(){return null},e.prototype._getDisposableDomElementParent=function(){return null},e.prototype.dispose=function(){this._onDisposed.dispatch(this),this._analyser&&(this._analyser.dispose(),this._analyser=null),this._articleData=null,this.scrapData=null,this._onPlayerAction.removeAll(),this._onPlayerAction=null,this._onPlayerProgress.removeAll(),this._onPlayerProgress=null,this._onVideoView.removeAll(),this._onVideoView=null,this._onDisposed.removeAll(),this._onDisposed=null,this.stopProgressTimer(),this._progressTimer=null,this._domTracker&&(this._domTracker.dispose(),this._domTracker=null),this.stopListenWindowFocusEvent()},e.prototype.getPlayerStatus=function(){},e.prototype.getCurrentVideoId=function(){t(this,"getCurrentVideoId")},e.prototype.getCurrentUrl=function(){return this.scrapData.data.url},e.prototype.startProgressTimer=function(){this._progressTimer||(this._progressTimer=new l.utils.Timer(250,this.handleProgressTimerEvent,this)),this._progressTimer.start(),this.handleProgressTimerEvent()},e.prototype.stopProgressTimer=function(){this._progressTimer&&this._progressTimer.stop()},e.prototype.handleProgressTimerEvent=function(){},e.prototype.startListenWindowFocusEvent=function(){this._handleFocusInEvent||(this._handleFocusInEvent=this.handleFocusInEvent.bind(this),this._handleFocusOutEvent=this.handleFocusOutEvent.bind(this),window.addEventListener?(window.addEventListener("focus",this._handleFocusInEvent,!1),window.addEventListener("blur",this._handleFocusOutEvent,!1)):window.attachEvent&&(window.attachEvent("focus",this._handleFocusInEvent),window.attachEvent("blur",this._handleFocusOutEvent)))},e.prototype.stopListenWindowFocusEvent=function(){this._handleFocusInEvent&&(window.removeEventListener?(window.removeEventListener("focus",this._handleFocusInEvent,!1),window.removeEventListener("blur",this._handleFocusOutEvent,!1)):window.detachEvent&&(window.detachEvent("focus",this._handleFocusInEvent),window.detachEvent("blur",this._handleFocusOutEvent)),this._handleFocusInEvent=null,this._handleFocusOutEvent=null)},e.prototype.handleFocusInEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!0),this.sendPlayerEvent({focus:!0},"focus")},e.prototype.handleFocusOutEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!1),this.sendPlayerEvent({focus:!1},"focus")},e.prototype.sendCurrentFocusState=function(){this.sendPlayerActionEvent(n.FOCUS,document.hasFocus()),this.sendPlayerEvent({focus:document.hasFocus()},"focus")},e.prototype.handleAnalyserEnded=function(){this._analyser.dispose(),this._analyser=null},l.scrap.driver.Base=e}(),function(){function e(){this._onPlayerFeaturedInstanceFound=new l.utils.Signal,this._currentScraperData=null,this._placeholderFoundList=[],this._topMostPlaceholder=null,this._alreadySentFeatured=!1}var t=l.publisher.utils;e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this,1)},e.prototype.addDriver=function(e){e.onPlayerInstanceFound().add(this.handleDriver_PlayerInstanceFound,this)},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.isScrapDataValid=function(e){return!!e&&(e.data.player_id?!!c.validateScraperURL()&&(""===e.url||c.urls.isUrlHomePage()?(c.log("Scrap cancel: I think I am on homepage..."),!1):e.isLive?(c.log("Scrap canceled: Live player instance."),!1):e.data.video_id&&e.data.stream?!(t.shouldScrap&&!t.shouldScrap(e))||(c.log("Scrap canceled: due to publisher utils"),!1):(c.log("Scrap canceled: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1)):(c.log("Scraper cancel: missing Player_id for scraper"),!1))},e.prototype.setFeatureFlag=function(e){t.setFeatureFlag?e.data.featured=t.setFeatureFlag():this._alreadySentFeatured?e.data.featured=!1:("undefined"!=typeof e.isFeatured?e.data.featured=e.isFeatured:(this.setTopMostContainer(),this._topMostPlaceholder?e.data.featured=!!this._topMostPlaceholder.contains(e.playerPlaceholder):(c.logError("Top most placeholder is not set, This has to be set!"),e.data.featured=!1)),e.data.featured&&(this._alreadySentFeatured=!0))},e.prototype.handleDetector_PlayerInstanceFound=function(e){this.isScrapDataValid(e)&&(this.setFeatureFlag(e),this._currentScraperData=e,this.sendPlayerFeaturedInstanceFound())},e.prototype.handleDriver_PlayerInstanceFound=function(e){this.handleDetector_PlayerInstanceFound(e)},e.prototype.getAllPlayersContainer=function(){if(t.getIAContainers)return t.getIAContainers();for(var e=document.querySelectorAll(oe.getIAContainers()),n=[],r=0;r<e.length;r++){var i=e[r];i.offsetParent&&n.push(i)}return n},e.prototype._setPlayersPlaceholderList=function(){for(var e=this.getAllPlayersContainer(),t=0;t<e.length;t++){var n=e[t];this._placeholderFoundList.indexOf(n)>-1||this._placeholderFoundList.push(n)}},e.prototype.setTopMostContainer=function(){if(this._setPlayersPlaceholderList(),0==this._placeholderFoundList.length)return void c.logWarning("No places were set to the picker to choose from");this._topMostPlaceholder=this._placeholderFoundList[0];for(var e=1;e<this._placeholderFoundList.length;e++){var t=this._placeholderFoundList[e];t.offsetTop<this._topMostPlaceholder.offsetTop&&(this._topMostPlaceholder=t)}},e.prototype.sendPlayerFeaturedInstanceFound=function(){return this.isScrapDataValid(this._currentScraperData)?(this.sendScrapEvent(),this._onPlayerFeaturedInstanceFound.dispatch(this._currentScraperData),void(this._currentScraperData=null)):void(this._currentScraperData=null)},e.prototype.sendScrapEvent=function(){var e=this._currentScraperData.data,t=le.getInArticleArticleData(e.video_id,e.url);e.exist=!!t;var n=localStorage&&!!localStorage.getItem("_minForcePush");if(l.scrap.metaDataEnhancer){var r=new l.scrap.metaDataEnhancer,i=r.getPayloadMetaData(this._currentScraperData);e=c.extentObject(i,e)}!n&&!oe.getScraperType2()||e.exist||te.send(s.Emitter.NEW_VIDEO_EVENT,e),te.send(s.Emitter.NEW_SCRAPE_EVENT,e)},l.scrap.picker.Base=e}(),function(){l.scrap.startUrlTracker=function(e){}}(),function(){var e=l.scrap.utils[l.scrap.PlayersNameEnum.VideoJS]={};e._getVideoId=function(e){var t=e.player_.el_.dataset.videoId;if(!t||t.indexOf("ref:")>-1){for(var n=document.querySelectorAll(".video-player"),r=0;r<n.length;r++){var i=n[r];if(i.contains(e.player_.el_))return JSON.parse(i.querySelector("script.ui-video-data").innerHTML).asset_metadata.items.brightcoveid}return c.logWarning("VideoJS can't find Video ID."),null}return t}}(),function(){function e(){e.__superCtor__.call(this)}var t=l.publisher.utils;c["extends"](e,l.scrap.detector.Base),e.getName=function(){return l.scrap.PlayersNameEnum.VideoJS},e.prototype.getScraperPlayerId=function(){return l.scrap.PlayerEnum.DEFAULT_99},e.prototype._detectNewPlayers=function(){e.__super__._detectNewPlayers.call(this);var t=this._getPlayers();this._collectScraperDataList(t),this._setStateIdle()},e.prototype._getPlayers=function(){var e={players:{},hasFound:!1};if("undefined"==typeof videojs||"function"!=typeof videojs.getPlayers)return e;var t=videojs.getPlayers(),n=Object.keys(t||{});if(0===n.length)return e;for(var r=0;r<n.length;r++){var i=n[r],o=t[i];this._hasPlayerInstanceFound(i)||(e.players[i]=o,e.hasFound=!0)}return e},e.prototype.hasVideoIdAndStream=function(e,t){return!(!this._getVideoId(e,t)||!this._getVideoStream(e,t))},e.prototype._collectScraperDataList=function(e){for(var t=Object.keys(e.players),n=0;n<t.length;n++){var r=t[n],i=e.players[r];if(i){var o=i.contentEl();if(this.hasVideoIdAndStream(i,o)&&this._getIsPlayerStarted(i,o)&&!this.isAdPlaying(i,o)&&this.isDurationValid(i,o)){this._addPlayerInstanceFound(r);var a=this._collectScraperData(i,o);this._sendPlayerInstanceFound(a)}}}},e.prototype._getVideoId=function(e,n){return t._getVideoId&&t._getVideoId(e)||n.dataset.videoId},e.prototype.isDurationValid=function(e,t){return!0},e.prototype.isAdPlaying=function(e,t){return!1},e.prototype._getVideoStream=function(e,t){if(e.mediainfo&&e.mediainfo.sources&&e.mediainfo.id==this._getVideoId(e,t)){for(var n=0;n<e.mediainfo.sources.length;n++){var r=e.mediainfo.sources[n];if(r.src&&(r.src.indexOf(".m3u8")||r.src.indexOf(".mp4")))return r.src}return null}},e.prototype._getIsLive=function(e){return e.el_.classList.contains("vjs-live")},e.prototype._getPlayerId=function(e,t){return this._getVideoId(e,t)},e.prototype._getIsAutoPlay=function(e,t){return e.autoplay()},e.prototype._getIsPlayerStarted=function(e,t){return t.classList.contains("vjs-has-started")},e.prototype._getPlayerPlaceholder=function(e,t){return t},e.prototype._getVideoTitle=function(e){return t._getVideoTitle&&t._getVideoTitle()||e.mediainfo&&e.mediainfo.name||document.title},l.scrap.detector.VideoJS=e,l.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this),this._watchPlayerList={}}var t=l.publisher.utils;c["extends"](e,l.scrap.detector.VideoJS),e.getName=function(){return l.scrap.PlayersNameEnum.VideoJSEdgeBrightcove},e.prototype.getScraperPlayerId=function(){return l.scrap.PlayerEnum.EdgeBrightcove},e.prototype._collectScraperDataList=function(e){for(var t=Object.keys(e.players),n=0;n<t.length;n++){var r=t[n],i=e.players[r];if(i){var o=i.contentEl();if(this.hasVideoIdAndStream(i,o)&&this._getIsPlayerStarted(i,o)&&!this.isAdPlaying(i,o)&&this.isDurationValid(i,o)){this._addPlayerInstanceFound(r);var a=this._collectScraperData(i,o);this._sendPlayerInstanceFound(a)}}}},e.prototype._getPlayerUrlRaw=function(e,n){return t._getPlayerUrlRaw?t._getPlayerUrlRaw(e,n):c.urls.getStructuredRawByUrl(c.urls.getLocationUrl())},e.prototype._getVideoStream=function(e,t){return this._getVideoId(e,t)},e.prototype._getPlayerUrl=function(e,n){return t._getPlayerUrlRaw?t._getPlayerUrl(e,n):c.urls.getCurrentCanonicalURL()},e.prototype._getIsFeatured=function(e,n){if(t._getIsFeatured)return t._getIsFeatured(e,n)},l.scrap.detector.VideoJSEdgeBrightcove=e,l.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this)}l.publisher.utils;c["extends"](e,l.scrap.picker.Base),e.getName=function(){return l.scrap.PlayerEnum.Jwplayer},e.prototype.isScrapDataValid=function(t){if(!t)return!1;var n=e.__super__.isScrapDataValid.call(this,t);if(!n)return!1;var r=document.querySelector("ul.video-playlist__items li.is-active");return r?r.dataset.videoId==t.data.video_id||(c.log("VideoJSEdgeBrightcove: mismatch video details"),!1):(c.log("VideoJSEdgeBrightcove: not a playlist"),!1)},l.scrap.picker.topgear=e,l.scrap.factory.addPicker(e)}(),function(){function e(){}e.prototype.getPayloadMetaData=function(e){var t={},n=this.getPublishedAt(e);return n&&!isNaN(n)&&(t.published_at=n,10===(""+t.published_at).length&&(t.published_at=1e3*t.published_at)),t.tags=this.getPageTags(e),t},e.prototype.getPageTags=function(e){var t=this.getTags(e);return"string"!=typeof t&&(t=JSON.stringify(t)),t},e.prototype.getPublishedAt=function(e){var t=document.querySelector("meta[itemprop='uploadDate']")||document.querySelector("meta[name='date']")||document.querySelector("meta[name='datePublished']")||document.querySelector("meta[itemprop='datePublished']")||document.querySelector("*[property='v:published']")||document.querySelector("*[property*='video:published]'");return t&&t.getAttribute("content")?new Date(t.getAttribute("content").replace(/-/g,"/")).getTime():null},e.prototype.getTags=function(e){return""},l.scrap.baseMetaDataEnhancer=e}(),function(){function e(){e.__superCtor__.call(this)}c["extends"](e,l.scrap.baseMetaDataEnhancer),e.prototype.getPublishedAt=function(e){if(e&&e.playerJS&&e.playerJS.mediainfo&&e.playerJS.mediainfo.publishedAt)return new Date(e.playerJS.mediainfo.publishedAt).getTime()},e.prototype.getTags=function(e){if(e&&e.playerJS&&e.playerJS.mediainfo&&e.playerJS.mediainfo.tags){var t=e.playerJS.mediainfo.tags;return t.join()}},l.scrap.metaDataEnhancer=e}(),function(){function e(e){return e.stopImmediatePropagation(),!1}function t(){t.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this._apvElement=null,this._rezVideo=null,this.alreadyPlayed=!1}l.apv=l.apv||{},l.apv.players=l.apv.players||{};c["extends"](t,a),l.apv.players.ApvPlayerBase=t,t.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},t.prototype.init=function(e){this._apvData=e,h.addEventListener(s.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.mediaHeightIndex=this.getNearestSize(this._apvData.getElementSize()),this._apvElement=document.createElement("video"),this._apvElement.className="minute_apv",this._apvElement.setAttribute("minVideoID",this._apvData.getArticleData().getArticleId()),this._apvElement.setAttribute("muted",""),this._apvElement.muted=!0,this._apvElement.volume=0,this._apvElement.setAttribute("playsinline",""),this._apvElement.setAttribute("webkit-playsinline",""),this._apvElement.setAttribute("disableRemotePlayback",""),this.setLoopPlay(),this._apvElement.style.transition=oe.getEffectApvTransitionVideo(),this.attachVideoEvents(),this.buildVideoSources()},t.prototype.attachVideoEvents=function(){function t(){o>0&&(clearTimeout(o),o=0)}function n(){r.hasStartPlaying()?c.getRequestAnimationFrame(n):r.dispatchEvent(s.Events.Players.LOADED)}var r=this,i=!1,o=0;this._handleVideoEvent_LoadedMetadata=function(e){i=!0,t(),r.dispatchEvent("loadedmetadata"),r.handleMediaMetadataLoaded()},this._handleVideoEvent_Play=function(t){return r.handleVideoEvent_Play(t),e(t)},this._handleVideoEvent_Error=function(t){return r.handleVideoEvent_Error(t),e(t)},this._handleVideoEvent_Ended=function(t){return r.handleVideoEvent_Ended(),e(t)},this._handleCanPlayThrough=function(){r._apvElement&&r._apvElement.removeEventListener("canplaythrough",r._handleCanPlayThrough),r._handleCanPlayThrough=null,n()},this._apvElement.addEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.addEventListener("play",this._handleVideoEvent_Play),this._apvElement.addEventListener("error",this._handleVideoEvent_Error),this._apvElement.addEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.addEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.addEventListener("timeupdate",e),this._apvElement.addEventListener("playing",e),this._apvElement.addEventListener("waiting",e),this._apvElement.addEventListener("load",e),this._apvElement.addEventListener("progress",e),this._apvElement.addEventListener("durationchange",e)},t.prototype.handleResizeEvent=function(){this._apvData&&c.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:this._apvData.getProduct()===s.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.buildVideoSources=function(){var e=this.getFullVideoUrl("mp4");oe.getPlaymode()==s.playmode.VIEWPORT&&(this._apvElement.src=e),this._apvElement.setAttribute("data-src",e),this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,oe.getRezVideo()[this.mediaHeightIndex])},t.prototype.setSource=function(){this._apvElement.src=this._apvElement.dataset.src,this._apvElement.load()},t.prototype.setLoopPlay=function(){try{this._apvElement.setAttribute("loop","")}catch(e){}},t.prototype.setOriginalImage=function(e){},t.prototype.play=function(){(this._apvElement.readyState===t.States.STATE_HAVE_ENOUGH_DATA||this.alreadyPlayed)&&(this.playElement(),this.sendEventPlaying())},t.prototype.playElement=function(){function e(e){return e&&"function"==typeof Promise&&e instanceof Promise}this.alreadyPlayed=!0;var t=this._apvElement.play();e(t)&&t.then&&t["catch"]&&t.then(function(e){})["catch"](function(e){}),$.isLPM(t,function(e){0===e.code&&$.isMobile()&&$.isSafari()&&(c.log("video can't be played due to low power mode "),this.hideApvElementBadWay())}.bind(this),function(){c.log("Video is playing")})},t.prototype.hideApvElementBadWay=function(){this._apvElement.style.visibility="hidden",this._apvElement.style.opacity=0},t.prototype.setAutoplay=function(){try{this._apvElement.setAttribute("preload","auto")}catch(e){}try{this._apvElement.setAttribute("autoplay","")}catch(e){}},t.prototype.pause=function(){this._apvElement.pause()},t.prototype.forcePlay=function(){this.playElement()},t.prototype.isPaused=function(){return this._apvElement.paused},t.prototype.sendEventPlaying=function(){this.dispatchEvent(s.Events.Players.PLAYING),h.dispatchEvent(s.Events.Players.PLAYING)},t.prototype.getApvElement=function(){return this._apvElement},t.prototype.getSizeData=function(){return this._rezVideo?this._rezVideo:(this._rezVideo=c.cloneObject(oe.getRezVideo()),this._rezVideo)},t.prototype.getStyle=function(e){return this._apvElement?this._apvElement.style[e]:null},t.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},t.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},t.prototype.getNearestSize=function(e){var t,n,r,i="m",o=c.extractElementSize(e),a=this.getSizeData();if(!o.width||!o.height)return a[i]?i:Object.keys(a)[0];if(n=Math.ceil(o.width/o.height*100)/100,t=this._apvData.getArticleData().getVideoRatio(),o.width*=.9,o.height*=.9,!t||t>n){for(r in a)if(a.hasOwnProperty(r)&&a[r]>=o.height)return r}else{var s;for(r in a)if(a.hasOwnProperty(r)&&(s=a[r]*t,s>=o.width))return r}return r||"R"},t.prototype.getFullVideoUrl=function(e,t){var n=this._apvData.getHltAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var r in s.APV)n=n.replace(s.APV[r].source,s.APV[r].target);return c.setUrlProtocol(n)},t.prototype.handleMediaMetadataLoaded=function(){c.setMediaElementSize(this.getApvElement()),c.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:this._apvData.getProduct()===s.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.dispose=function(){this._rezVideo=null,this._apvElement.removeEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.removeEventListener("play",this._handleVideoEvent_Play),this._apvElement.removeEventListener("error",this._handleVideoEvent_Error),this._apvElement.removeEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.removeEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.removeEventListener("timeupdate",e),this._apvElement.removeEventListener("playing",e),this._apvElement.removeEventListener("waiting",e),this._apvElement.removeEventListener("load",e),this._apvElement.removeEventListener("progress",e),this._apvElement.removeEventListener("durationchange",e),this._handleVideoEvent_Play=null,this._handleVideoEvent_Error=null,this._handleVideoEvent_Ended=null,this._handleCanPlayThrough=null,this._handleVideoEvent_LoadedMetadata=null,h.removeEventListener(s.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.removeAllEventListener(),this._apvData=null,this._apvElement&&this._apvElement.parentElement&&this._apvElement.parentElement.removeChild(this._apvElement),this._apvElement=null},t.prototype.hasStartPlaying=function(){return!!this._apvElement&&!this._apvElement.paused&&0!==this._apvElement.currentTime},t.prototype.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}(),t.prototype.handleVideoEvent_Play=function(e){this.dispatchEvent(s.Events.Players.PLAYING)},t.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),c.log("video ended for article "+this._apvData.getArticleData().getArticleUrl())},t.prototype.handleVideoEvent_Error=function(e){this.dispatchEvent("error"),c.log("Browser cannot play video!")}}(),function(){l.apv=l.apv||{},l.apv.logos=l.apv.logos||{};var e=l.apv.logos;e.LogoElmBase=function(){e.LogoElmBase.__superCtor__.call(this)},c["extends"](e.LogoElmBase,a),e.LogoElmBase.prototype.init=function(e){this.isMobile=$.isMobile(),this.trans="0 , 0",this.buildLogoLinkElement(e)},e.LogoElmBase.prototype.buildLogoLinkElement=function(e){var t=this.createElement();t.className="minute_logo",t.title=t.alt=oe.getTooltip(),t.style.cursor="pointer",t.style.width="4%",t.style.paddingTop="4%",$.isMobile()&&(t.style.minWidth="12px"),t.style.minWidth="16px",t.style.outline="none",t.style.transform="translateZ(1px)",t.style.position="absolute",oe.isClickByPointEnabled()&&(t.style.pointerEvents="none"),t.style.backgroundColor="transparent",t.style["z-index"]=1,t.style.opacity=.6;for(var n=0==e?oe.getLogoPosition():oe.getInArticleLogoPosition(),r=s.logoPositions[n||"bottom-left"],i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t.style[a]=r[a]}t.innerHTML=this.getLogoInnerHtml(),this.minuteLinkElm=t},e.LogoElmBase.prototype.createElement=function(){return document.createElement("span")},e.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},e.LogoElmBase.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="display: block; position: absolute; left: 0; top: 0; transform: translate('+this.trans+');" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'}}(function(){function t(){t.__superCtor__.call(this),this.minContainer=null,this.blockingState=s.APVStates.Active,this._observerAttrChange=[],this.isIE=$.isIE(),this.hasDisposed=!1,this._coverLayer=null}l.apv=l.apv||{},l.apv.domAdapter=l.apv.domAdapter||{};var n=l.apv.domAdapter,r={"box-shadow":"none",border:0,padding:"(0,0,0,0)",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px",transform:"translate(0px,0px)","box-sizing":"border-box;","float":"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0},i={borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0};n.Base=t,c["extends"](t,a),t.getTypeName=function(){return"Base"},t.prototype.init=function(e){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.elementSize=this.apvData.getElementSize(),this.apvPlayer=this.apvData.getApvPlayer(),this.minuteLink=this.apvData.getMinuteLogo(),this.articleData=this.apvData.getArticleData(),c.log("initializing DOM adapter. articleData.getArticleId(): "+this.articleData.getArticleId()),this._initElements(),this.attachWindowEvents(),this.eventsRegister(),this.setElementToObserve(),this.insertContainerToDOM(this.elementToReplace.parentNode),this.startAnimationResize()},t.prototype.eventsRegister=function(){h.addEventListener(s.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),h.addEventListener(s.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this)},t.prototype._initElements=function(){
this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.createWatchBanner(),this.createVideoWrapper(),this.applyZIndexForAbsoluteElements(),this._videoWrapper.appendChild(this.apvPlayer.getApvElement()),oe.getShowLogo()&&this._videoWrapper.appendChild(this.minuteLinkElm),this.minContainer.appendChild(this._videoWrapper),this._coverLayer&&this.minContainer.appendChild(this._coverLayer),this._watchBanner&&this._videoWrapper.appendChild(this._watchBanner)},t.prototype.getBorderFix=function(){var e={left:0,top:0,right:0};if(($.isFF()||$.isSafari())&&this.elementSize!==this.elementToReplace&&null!==this.elementToReplace.offsetParent){var t=window.getComputedStyle(this.elementToReplace.offsetParent);e.left=parseFloat(t.borderLeftWidth),e.right=parseFloat(t.borderRightWidth),e.top=parseFloat(t.borderTopWidth)}return e},t.prototype.render=function(e){if(null!=this.elementToReplace){var t=this.elementToReplace.offsetParent;if(this.elementSize!==this.elementToReplace&&(t=this.elementSize.offsetParent),t){this.minContainer.style.display="flex";var n=getComputedStyle(this.elementSize);switch(n.transform.split("(")[0]){case"none":this.minContainer.style.transform="none";break;case"matrix":var r=n.transform.split("(")[1].split(")")[0].split(",").map(parseFloat);this.minContainer.style.transform="scale("+r[0]+","+r[3]+")";break;case"matrix3d":var r=n.transform.split("(")[1].split(")")[0].split(",").map(parseFloat);this.minContainer.style.transform="scale3d("+r[0]+","+r[5]+","+r[10]+")"}this.setWidthandHeight(e,t,n),this.setOffsetAndSides(e,t,n)}}},t.prototype.setWidthandHeight=function(e,t,n){this.minContainer.style.width=n.width,this.minContainer.style.height=n.height,this.isIE&&(this.minContainer.style.height=""+(parseInt(n.height)+parseInt(n.paddingTop)+parseInt(n.paddingBottom))+"px")},t.prototype.setOffsetAndSides=function(e,t,n){var r=this.elementSize.getBoundingClientRect(),i=t.getBoundingClientRect(),o=0;t===document.body&&(o=window.pageYOffset+t.getBoundingClientRect().top),this.minContainer.style.top=o+r.top-i.top-parseFloat(e.top)+"px","rtl"==n.direction?this.minContainer.style.right=i.right-r.right+e.right+"px":this.minContainer.style.left=r.left-i.left-parseFloat(e.left)+"px",this.minuteLinkElm.style.paddingTop=this.minuteLinkElm.offsetWidth+"px"},t.prototype.redrawApvOnRequestAnimation=function(e){var t=this,n=-1,r=oe.getRenderModulus(),i=function(){if(n+=1,t.minContainer&&!t.hasDisposed&&(c.getRequestAnimationFrame(i),t.shouldRender()&&n%r===0))return t.isElementToReplaceVisibleValid()?void t.render(e):void(t.minContainer.style.display="none")};c.getRequestAnimationFrame(i)},t.prototype.startAnimationResize=function(){var e=this.getBorderFix();this._debouncer=new l.utils.Debounce(50,function(){this.render(e)},this),this._debouncer.enableFilter(250),this._debouncer.setEcho(50,10),h.addEventListenerOnce(s.Events.DomWindow.RESIZE,this._debouncer.start,this._debouncer),this.render(e),this.showApv(),this.redrawApvOnRequestAnimation(e)},t.prototype._copyStylesFromElement=function(e,t,n){var r=c.getComputedStyle(e);for(var i in n)t.style[i]=r[i]},t.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add(s.minuteClasses.CONTAINER),this.minContainer.setAttribute("placement",this.apvData.getName()),this.minContainer.setAttribute("container_minvideoid",this.articleData.getArticleId()),this.minContainer.setAttribute("id",this.apvData.getContainerUnique()),this.minContainer.style.position="absolute",this.minContainer.style.overflow="hidden",this.minContainer.style.display="flex",this.minContainer.style.transition="opacity 0.5s ease-out",this.minContainer.style.opacity=0,this._copyStylesFromElement(this.elementToReplace,this.minContainer,this.getListOfCopyableStyles())},t.prototype.createVideoElement=function(){var e=s.values.HUNDRED_PERCENT,t=s.values.HUNDRED_PERCENT;c.isInt(parseFloat(this.minContainer.style.width))||(e="calc("+s.values.HUNDRED_PERCENT+" + 1px)"),c.isInt(parseFloat(this.minContainer.style.height))||(t="calc("+s.values.HUNDRED_PERCENT+" + 1px)"),this.apvPlayer.setStyles({position:s.values.RELATIVE,display:s.values.BLOCK,width:e,height:t,objectFit:"cover"}),this._copyStylesFromElement(this.elementToReplace,this.apvPlayer._apvElement,i)},t.prototype.createWatchBanner=function(){var e=oe.getRegularPlacerWatchFullSettings();if(e.active&&!(this.elementSize.width<e.minimumWidth)){var t=document.createElement("div");t.style.position="absolute";for(var n=0;n<e.position.length;n++){var r=e.position[n];t.style[r]="0px"}t.style.margin="15px",t.style.fill="white",t.style.backgroundColor="#3f3f3f",t.style.opacity="0.7",t.style.color="white",t.style.padding="10px 20px",t.style.maxWidth="40%",t.style.border="1px solid white",t.style.fontSize="1.2em",t.style.pointerEvents="none",t.innerText=e.text,l.utils.ApvElementUtils.setElementAsReplaced(t),this._watchBanner=t}},t.prototype.createCoverLayerElement=function(){},t.prototype.createVideoWrapper=function(){this._videoWrapper=document.createElement("div"),this._videoWrapper.style.width=s.values.HUNDRED_PERCENT,this._videoWrapper.style.height=s.values.HUNDRED_PERCENT,this._videoWrapper.style.position=s.values.RELATIVE,this._videoWrapper.style.overflow="hidden",this._videoWrapper.style.flex="1",this._videoWrapper.style.display="block"},t.prototype.applyZIndexForAbsoluteElements=function(){if(oe.shouldApplyZIndexReorder()){for(var e,t,n=Number.MAX_VALUE,r=document.createTreeWalker(this.elementToReplace.parentElement,NodeFilter.SHOW_ELEMENT,null,!1),i=r.nextNode();i;)t=getComputedStyle(r.currentNode),"none"!==t.display?r.currentNode!==this.elementToReplace?"absolute"!==t.position||parseInt(t.width)<=1?i=r.nextNode():(e=Number(t.zIndex),isNaN(e)&&(e=0),n>e&&(n=e),r.currentNode.style.zIndex=e+1,i=r.nextNode()):(($.isFF()||$.isIE()||$.isEdge())&&t.zIndex<0&&"static"==t.position&&(n=parseInt(t.zIndex)+1),i=r.nextSibling()||r.nextNode()):i=r.nextSibling()||r.nextNode();if(n!==Number.MAX_VALUE)this.minContainer.style.zIndex=n;else{var o=getComputedStyle(this.elementToReplace).zIndex;this.minContainer.style.zIndex=isNaN(o)?0:o}this.minuteLinkElm.style.zIndex=this.minContainer.style.zIndex>=0?this.minContainer.style.zIndex:0,this._watchBanner&&(this._watchBanner.style.zIndex=this.minuteLinkElm.style.zIndex)}},t.prototype.insertContainerToDOM=function(){return this.apvData.getMethod()?void this.elementToReplace.insertAdjacentElement(this.apvData.getMethod(),this.minContainer):("A"==this.elementToReplace.tagName?this.elementToReplace.insertAdjacentElement("beforeend",this.minContainer):this.elementToReplace.insertAdjacentElement("afterend",this.minContainer),void this.dispatchReadyEvent())},t.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.currentSrc||this.elementToReplace.src||this.elementToReplace.srcset,n=this.elementToReplace.src?"src":"srcset";if(!t){var r=this.elementToReplace.parentElement;"PICTURE"===r.tagName?(e=r.querySelector("source[src], source[srcset]"),t=e.src||e.getAttribute("srcset").split(" ")[0]):(t=getComputedStyle(this.elementToReplace).backgroundImage.replace(/^url\(['"]?(.+?)['"]?\)/,"$1"),n="backgoundImage")}var i={};return i[s.OriginalSrc.PATH]=t,i[s.OriginalSrc.ATTR]=n,i},t.prototype.dispose=function(){if(this.apvData){if(this.removeAllEventListener(),c.isSupportIntersectionObserver()||(h.removeEventListener(s.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),h.removeEventListener(s.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),h.removeEventListener(s.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this),h.removeEventListener(s.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),h.removeEventListener(s.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),h.removeEventListener(s.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this),this.apvPlayer.removeEventListener(s.Events.Players.PLAYING,this.showApv,this),$.isSafari()||this.apvPlayer.setStyles({opacity:0}),this.apvPlayer.dispose(),this.apvPlayer=null,this._debounceCarousel&&(this._debounceCarousel.kill(),this._debounceCarousel=null),this._debouncer&&(this._debouncer.kill(),this._debouncer=null),this._observerAttrChange&&this._observerAttrChange.length>0)for(var e=0;e<this._observerAttrChange.length;e++){var t=this._observerAttrChange[e];t.disconnect(),t=null}this._observerAttrChange=null,this.elementToReplace=null,this.elementSize=null,this._videoWrapper&&(this._videoWrapper.parentElement&&this._videoWrapper.parentElement.removeChild(this._videoWrapper),this._videoWrapper=null),this.minuteLinkElm&&(this.minuteLinkElm.parentElement&&this.minuteLinkElm.parentElement.removeChild(this.minuteLinkElm),this.minuteLinkElm=null),this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),this.minuteLink=null,this.articleData=null,this.minContainer.apvData=null,this.minContainer=null,this.apvData=null,this.hasDisposed=!0}},t.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},t.prototype.isElementToReplaceVisibleValid=function(){return this.elementSize!=this.elementToReplace?!!this.elementToReplace&&!!this.elementToReplace.offsetParent||!!this.elementSize&&!!this.elementSize.offsetParent:!!this.elementToReplace&&!!this.elementToReplace.offsetParent},t.prototype.handleWindowEvent_Resize=function(e){var t=e.data;t&&this.dispatchViewportEvent()},t.prototype.setLoopPlay=function(){this.apvPlayer.setElementAttribute("loop","")},t.prototype.showApv=function(){ie.isTestGroup()||(this.minContainer.style.opacity=1)},t.prototype.hideApv=function(){this.minContainer.style.opacity=0},t.prototype.isElementVisible=function(){return _.isElementVisible(this.minContainer,this.apvData.getViewportMaskElement())},t.prototype.getElementVisiblePercents=function(){return _.getElementVisiblePercents(this.elementSize,this.apvData.getViewportMaskElement())},t.prototype.dispatchViewportEvent=function(){if(this.apvData){var e=this.getElementVisiblePercents();this._reportViewportPercentage(e)}},t.prototype.shouldRender=function(){return this.inViewport},t.prototype._reportViewportPercentage=function(t){var n=t>=oe.getViewportPercentage();this.inViewport=n,this._updateVisible(n),e.debugParams[f.DEBUG_VISIBILITY]&&c.log("Regular APV "+this.apvData.getHighlightId()+" visibility: "+t),this.dispatchEvent(s.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,percentsVisible:t})},t.prototype._updateVisible=function(e){return this.dispatchEvent(e?s.Events.Element.VISIBLE:s.Events.Element.NON_VISIBLE,{articleData:this.articleData,apvData:this.apvData}),e},t.prototype.dispatchReadyEvent=function(){this.apvData.setMinuteContainerElementTracker(this.minContainer),this.dispatchEvent(s.Events.Element.READY,{apvData:this.apvData}),c.isSupportIntersectionObserver()?this.initInterObserver():this.dispatchViewportEvent()},t.prototype.initInterObserver=function(){var e=this,t={root:null,threshold:[0,.01,.5,1]};this._intersectionObserver=new IntersectionObserver(function(t){e._reportViewportPercentage(100*t[0].intersectionRatio)},t),this._intersectionObserver.observe(this.apvData._elementSize)},t.prototype.play=function(){this.apvPlayer&&this.apvPlayer.play()},t.prototype.pause=function(){this.apvPlayer&&this.apvPlayer.pause()},t.prototype.attachWindowEvents=function(){c.isSupportIntersectionObserver()||(h.addEventListener(s.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),h.addEventListener(s.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),h.addEventListener(s.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),h.addEventListener(s.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this)},t.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(s.Events.Element.MUTANT,{articleData:this.articleData,apvData:this.apvData})},t.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var r={attributes:!0,characterData:!0,childList:!0},i=this;this._debounceCarousel=new l.utils.Debounce(250,this.handleCarouselDebounceCallback,this),this._observerAttrChange;var o=new MutationObserver(function(e){i._debounceCarousel.start()});n&&o.observe(n,r),this._observerAttrChange.push(o)}},t.prototype.clickByPoint=function(e){ie.isTestGroup()||this.apvData.getContainerUnique()==e.data.containerUnique&&this.openPagesClickByPoint()},t.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),ie.isTestGroup()||(oe.isClickByPointEnabled()?h.addEventListener(s.Events.CLICK_FROM_POINT,this.clickByPoint,this):this.minuteLinkElm.addEventListener("click",this.openPages.bind(this),!0))},t.prototype.openPagesClickByPoint=function(){window.open(oe.getBaseLinkUrl(),"_blank");return this.dispatchEvent(s.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},t.prototype.openPages=function(e){e.preventDefault(),e.stopImmediatePropagation();var t=window.open(oe.getBaseLinkUrl(),"_blank");return window.open(this.apvData.getRawAnchorValue(),"_self"),t&&t.focus(),this.dispatchEvent(s.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},t.prototype.getBoundingClientRect=function(){return this.minContainer?this.minContainer.getBoundingClientRect():this.elementToReplace.getBoundingClientRect()},t.prototype.handleWindowEvent_SafariFocus=function(){c.log("hack for fixing render issue on safari mobile such as 4496"),this.minContainer.style.display="none"},t.prototype.getListOfCopyableStyles=function(){return r}}()),function(){function t(e){i[e.data.videoId]=e.data}function n(){n.__superCtor__.call(this),this.minContainer=null,this.blockingState=s.APVStates.Active,this.videoHasStarted=!1,this.apvSetHidden=!1,h.addEventListener(s.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),h.addEventListener(s.Events.INARTICLE_CLICK,this.handleApvClicked,this)}l.apv=l.apv||{},l.apv.domAdapter=l.apv.domAdapter||{},l.apv.inArticleDomAdapter=l.apv.inArticleDomAdapter||{};var r=l.apv.domAdapter,i={};h.addEventListener(s.Events.PLAYER_PLAYING,t),r.InArticleBase=n,c["extends"](n,a),n.prototype.handlePlayerPlayingEvent=function(e){0===e.data.counter&&e.data.videoId==this.articleData.getPublisherVideoId()&&(h.removeEventListener(s.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),c.log("hide video send inactive"),ve.setShouldSendImpClickForApvData(this.apvData,!1),this.videoHasStarted=!0,this.hideApv())},n.prototype.handleApvClicked=function(e){var t=e.data;t==this.apvData&&(h.removeEventListener(s.Events.INARTICLE_CLICK,this.handleApvClicked,this),this.hideApv())},n.prototype.isPlayerPlayingOnInit=function(){return!!i[this.articleData.getPublisherVideoId()]},n.prototype.cleanInstance=function(){this.apvData=null,this.elementToReplace=null,this.apvPlayer=null,this.minuteLink=null,this.articleData=null,this.player=null,this._coverLayer=null,this._containerOverlay=null},n.prototype.init=function(e){return this.apvData=e,this.containerElement=e.getContainerElement(),this.apvPlayer=e.getApvPlayer(),this.minuteLink=e.getMinuteLogo(),this.articleData=e.getArticleData(),this.player=e.getPlayerInstance(),this._containerOverlay=null,this._coverLayer=null,this.isPlayerPlayingOnInit()?void this.cleanInstance():(this._initElements(),this.attachWindowEvents(),this.addEvents(),this._observeViewportMask(),this.setElementToObserve(),void this.insertContainerToDOM())},n.prototype._observeViewportMask=function(){var e=oe.getInArticleViewportMask();if(e!==window){var t=function(){c.log("InArticleBase observed change!"),this.dispatchViewportEvent();var e=new l.utils.Timer(500,this.dispatchViewportEvent,this);e.setCounterLimit(3),e.start(),this.mutationObserver.disconnect()}.bind(this);this.mutationObserver=new MutationObserver(t),this.mutationObserver.observe(e,{attributes:!0})}},n.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},n.prototype.addEvents=function(){h.addEventListener(s.Events.PLAYER_VIDEO_CHANGED,this.handleVideoChanged.bind(this)),this.apvPlayer.addEventListener(s.Events.Players.PLAYING,this.showApv,this)},n.prototype._initElements=function(){if(this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.createContainerOverlay(),this.createWatchBanner(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this._containerOverlay&&this.minContainer.appendChild(this._containerOverlay),this.minContainer.appendChild(this._coverLayer),oe.getInArticleShowLogo()&&this.minContainer.appendChild(this.minuteLinkElm),this._watchBanner&&this.minContainer.appendChild(this._watchBanner),this.videoHasStarted)return void c.log("video has started to play, wont insert apv to in article")},n.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add(s.minuteClasses.CONTAINER),this.decorateElementWithPlacementName(this.minContainer),this.minContainer.style.width="100%",this.minContainer.style.height="100%",this.minContainer.style.transition="opacity 0.5s ease-out",this.minContainer.style.position=s.values.ABSOLUTE,this.minContainer.style.top="0px",this.minContainer.style.opacity=0,this.minContainer.setAttribute("id",this.apvData.getContainerUnique())},n.prototype.getTypeName=function(){return"InArticle Base"},n.prototype.decorateElementWithPlacementName=function(e){e.setAttribute("placement",this.getTypeName())},n.prototype.createVideoElement=function(){var e={position:s.values.RELATIVE,display:s.values.BLOCK,width:s.values.HUNDRED_PERCENT,height:s.values.HUNDRED_PERCENT};e[s.styles.OBJECT_FIT]="cover",this.apvPlayer.setStyles(e)},n.prototype.createWatchBanner=function(){var e=oe.getInArticlePlacerWatchFullSettings();if(e.active){var t=document.createElement("div");t.style.position="absolute";for(var n=0;n<e.position.length;n++){var r=e.position[n];t.style[r]="0px"}t.style.margin="15px",t.style.fill="white",t.style.backgroundColor="#3f3f3f",t.style.opacity="0.7",t.style.color="white",t.style.padding="10px 20px",t.style.maxWidth="40%",t.style.border="1px solid white",t.style.fontSize="1em",t.style.pointerEvents="none",t.innerText=e.text,l.utils.ApvElementUtils.setElementAsReplaced(t),this._watchBanner=t}},n.prototype.createCoverLayerElement=function(){this._coverLayer=document.createElement("div"),this._coverLayer.style.width=s.values.HUNDRED_PERCENT,this._coverLayer.style.height=s.values.HUNDRED_PERCENT,this._coverLayer.style.position=s.values.ABSOLUTE,this._coverLayer.style.top="0px"},n.prototype.insertContainerToDOM=function(){c.logError("insertContainerToDOM has to be implemented and do not forget to dispatchReadyEvent")},n.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.src||this.elementToReplace.srcset,n=this.elementToReplace.src?"src":"srcset";"undefined"!=typeof t&&""!==t||"PICTURE"!==this.elementToReplace.parentElement.tagName||(e=this.elementToReplace.parentElement.querySelector("source[src], source[srcset]"),t=e.src,"undefined"!=typeof t&&""!==t||(t=e.getAttribute("srcset").substr(0,e.getAttribute("srcset").indexOf(" "))));var r={};return r[s.OriginalSrc.PATH]=t,r[s.OriginalSrc.ATTR]=n,r},n.prototype.showApv=function(){ie.isTestGroup()||this.apvSetHidden!==!1||(this.minContainer.style.opacity=1)},n.prototype.hideApv=function(){this.apvSetHidden=!0,this.minContainer.style.opacity=0,this.pause()},n.prototype.isElementVisible=function(){var e=oe.getInArticleViewportMask();return _.isElementVisible(this.containerElement,e)},n.prototype.getElementVisiblePercents=function(){var e=oe.getInArticleViewportMask();return _.getElementVisiblePercents(this.containerElement,e)},n.prototype.dispatchViewportEvent=function(){var e=this.getElementVisiblePercents();this._reportViewportPercentage(e)},n.prototype._reportViewportPercentage=function(t){var n=t>=oe.getViewportPercentage();this._updateVisible(n),e.debugParams[f.DEBUG_VISIBILITY]&&c.log("In Article APV "+this.apvData.getHighlightId()+" visibility: "+t),this.dispatchEvent(s.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,percentsVisible:t})},n.prototype._updateVisible=function(e){e?this.dispatchEvent(s.Events.Element.VISIBLE,{articleData:this.articleData}):this.dispatchEvent(s.Events.Element.NON_VISIBLE,{articleData:this.articleData})},n.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(s.Events.Element.MUTANT,{articleData:this.articleData,apvData:this.apvData})},n.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var r={attributes:!0,characterData:!0,childList:!0},i=this;this._debounceCarousel=new l.utils.Debounce(250,this.handleCarouselDebounceCallback,this),this._observerAttrChange=[];var o=new MutationObserver(function(e){i._debounceCarousel.start()});n&&o.observe(n,r),this._observerAttrChange.push(o)}},n.prototype.dispatchReadyEvent=function(){this.dispatchEvent(s.Events.Element.READY,{apvData:this.apvData}),c.isSupportIntersectionObserver()?this.initInterObserver():this.dispatchViewportEvent()},n.prototype.initInterObserver=function(){var e=this,t={root:null,threshold:[0,.01,.5,1]},n=new IntersectionObserver(function(t){e._reportViewportPercentage(100*t[0].intersectionRatio)},t);n.observe(this.containerElement)},n.prototype.play=function(){this.apvPlayer&&!this.apvSetHidden&&this.apvPlayer.play()},n.prototype.pause=function(){this.apvPlayer&&this.apvPlayer.pause()},n.prototype.attachWindowEvents=function(){c.isSupportIntersectionObserver()||h.addEventListener(s.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),h.addEventListener(s.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this)},n.prototype.clickByPoint=function(e){if(!ie.isTestGroup()){var t=0==this.minContainer.style.opacity;this.apvData.getContainerUnique()!=e.data.containerUnique||t||this.openPagesClickByPoint()}},n.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),ie.isTestGroup()||(oe.isClickByPointEnabled()?h.addEventListener(s.Events.CLICK_FROM_POINT,this.clickByPoint,this):this.minuteLinkElm.addEventListener("click",this.openPages.bind(this),!0))},n.prototype.openPagesClickByPoint=function(){window.open(oe.getBaseLinkUrl(),"_blank");return this.dispatchEvent(s.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},n.prototype.openPages=function(e){window.open(oe.getBaseLinkUrl(),"_blank");return this.dispatchEvent(s.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},n.prototype.activateApv=function(){this.showApv()},n.prototype.setState=function(e){this.activateApv()},n.prototype.dispose=function(){this.hideApv(),ve.setShouldSendImpClickForApvData(this.apvData,!1)},n.prototype.observerAttrChange=function(){},n.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},n.prototype.blockApv=function(){},n.prototype.hideDebugBlocking=function(){},n.prototype.showDebugBlocking=function(){},n.prototype.setLoopPlay=function(){},n.prototype.handleVideoChanged=function(e){},n.prototype.createContainerOverlay=function(){}}(),function(){function e(){e.__superCtor__.call(this)}function t(e){for(var t=document.querySelectorAll(".carousel__slides"),n=0;n<t.length;n++)if(t[n].contains(e))for(var r=t[n].querySelectorAll(".carousel__slide"),i=0;i<r.length;i++)r[i].style.background="transparent"}l.apv=l.apv||{},l.apv.domAdapter=l.apv.domAdapter||{},l.apv.inArticleDomAdapter=e,c["extends"](e,l.apv.domAdapter.InArticleBase),e.prototype.getTypeName=function(){return"Vjs"},e.prototype.insertContainerToDOM=function(e){var n=this,r=function(){if(n.player.classList.contains("vjs-has-started"))return!0;var e,r=function(e){return!e.classList.contains("vjs-error")};if(e=n.player.classList.contains("video-js")?n.player:n.player.querySelector(".video-js"),!r(e))return!1;var i=n.player.querySelector(".vjs-poster");return!!i&&(i.insertAdjacentElement("afterbegin",n.minContainer),t(i),n.dispatchReadyEvent(),!0)};if(!r()){var i=new MutationObserver(function(){r()&&i.disconnect()});i.observe(this.player,{childList:!0,attributes:!0})}},e.prototype.handleVideoChanged=function(e){this.apvData.getVideoId()===e.data.newVideoId&&$.isMobile()?(this.apvSetHidden=!1,ve.setShouldSendClickEvent(this.apvData,!0),this.showApv()):(ve.setShouldSendClickEvent(this.apvData,!1),this.hideApv())},e.prototype.handlePlayerPlayingEvent=function(e){0===e.data.counter&&e.data.videoId==this.articleData.getPublisherVideoId()&&(h.removeEventListener(s.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),c.log("hide video send inactive"),ve.setShouldSendImpClickForApvData(this.apvData,!1),this.videoHasStarted=!0)}}(),function(){function e(){e.__superCtor__.call(this),this.apvData=null,this.domAdapter=null,this.apvPlayer=null,this.articleData=null}l.apv=l.apv||{},l.apv.playmodes=l.apv.playmodes||{},l.apv.playmodes.Base=e,c["extends"](e,a),e.prototype.setDomAdapter=function(e){this.apvData=e,this.domAdapter=this.apvData.getDomAdapter(),this.apvPlayer=this.apvData.getApvPlayer(),this.articleData=this.apvData.getArticleData()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}l.apv.playmodes.Viewport=e,c["extends"](e,l.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.forcePlay(),this.apvPlayer.addEventListener(s.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.domAdapter.addEventListener(s.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(s.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(s.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}(),function(){function e(){e.__superCtor__.call(this)}l.apv.playmodes.TestGroup=e,c["extends"](e,l.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.addEventListener(s.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}();var Y=function(){function e(e){this._containerUnique=c.generateShortUnique(),this._articleData=e.articleData,this._uuid=c.generateUnique(),this._product=e.product,this._key=""+this.getHighlightId(this._product),this._keyProduct=this._key+"_"+this._product,this._name=e.name,this._debug=null,this._state=s.APVStates.New,this._isLazy=e.isLazy,this._apvPlayer=null,this._domAdapter=null,this._minuteLogo=null,this._playerInstance=null,this._watcher=null,this._elementToReplace=e.elmToReplace,this._elementSize=e.elementSize,this._attrValue=e.attrValue,this._manualClick=null,this._rawAnchorValue=e.rawUrl,this._clickElements=[],this._viewportMask=e.viewportMaskElement,"undefined"==typeof this._viewportMask&&c.logError("_viewportMask should always be something!!!"),this._viewportObserver=e.viewportObserver,this._containerElement=null,this._domContainerElementTracker=null,this._domViewportMaskElementTracker=null,this._method=e.method||null,this._onDisposed=new l.utils.Signal,this._hasDisposed=!1,this._belongToUrl=null,this.setContainerElement(e.containerElement),this._shouldSendImpression=!0,this._didImpressionSent=!1,this._isClickRegistered=!1,this._shouldSendClickEvent=!0,this._clickAlreadySent=!1}return e.prototype.setImpressionHasSent=function(){this._didImpressionSent=!0},e.prototype.setShouldSendImpression=function(e){this._shouldSendImpression=e},e.prototype.getShouldSendImpression=function(){return!this.getDidImpressionSent()&&this._shouldSendImpression&&!this.getClickAlreadySent()},e.prototype.getDidImpressionSent=function(){return this._didImpressionSent},e.prototype.setIsClickRegistered=function(e){this._isClickRegistered=e},e.prototype.getIsClickRegistered=function(){return this._isClickRegistered},e.prototype.setShouldSendClickEvent=function(e){this._shouldSendClickEvent=e},e.prototype.getShouldSendClickEvent=function(){return this._shouldSendClickEvent&&!this.getClickAlreadySent()&&this.getDidImpressionSent()},e.prototype.setClickAlreadySent=function(){this._clickAlreadySent=!0},e.prototype.getClickAlreadySent=function(){return this._clickAlreadySent},e.prototype.setClickElements=function(e){this._clickElements=e},e.prototype.getVideoId=function(){return this._articleData&&this._articleData.getPublisherVideoId()},e.prototype.getMinuteVideoId=function(){return this._articleData&&this._articleData.getVideoDBId()},e.prototype.getName=function(){return this._name},e.prototype.setMethod=function(e){return this._method=e},e.prototype.getMethod=function(){return this._method},e.prototype.setName=function(e){this._name=e},e.prototype.getClickElements=function(){return this._clickElements},e.prototype.setAttributeValue=function(e){this._attrValue=e},e.prototype.setContainerElement=function(e){e&&!this._containerElement&&(this._containerElement=e,this._createElementsTracker(),this._belongToUrl=l.publisher.utils&&l.publisher.utils.getElementUrl&&l.publisher.utils.getElementUrl(this._containerElement))},e.prototype._createElementsTracker=function(){this._domContainerElementTracker=new l.utils.DomElementTracker(this._containerElement),this._domContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domContainerElementTracker.start(),this._viewportMask!==window&&(this._domViewportMaskElementTracker=new l.utils.DomElementTracker(this._viewportMask),this._domViewportMaskElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domViewportMaskElementTracker.start())},e.prototype.setMinuteContainerElementTracker=function(e){this._domMinuteContainerElementTracker=new l.utils.DomElementTracker(e),this._domMinuteContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domMinuteContainerElementTracker.start()},e.prototype.getProduct=function(){return this._product},e.prototype.getKey=function(){return this._key},e.prototype.getKeyProduct=function(){return this._keyProduct},e.prototype.getArticleData=function(){return this._articleData},e.prototype.getElementToReplace=function(){return this._elementToReplace},e.prototype.getElementSize=function(){return this._elementSize},e.prototype.getContainerElement=function(){return this._containerElement},e.prototype.setApvPlayer=function(e){return this._apvPlayer=e,this._apvPlayer},e.prototype.getApvPlayer=function(){return this._apvPlayer},e.prototype.setDomAdapter=function(e){return this._domAdapter=e},e.prototype.getDomAdapter=function(){return this._domAdapter},e.prototype.setMinuteLogo=function(e){return this._minuteLogo=e},e.prototype.getMinuteLogo=function(){return this._minuteLogo},e.prototype.setWatcher=function(e){this._watcher=e},e.prototype.removeWatcher=function(){this._watcher=null},e.prototype.getWatcher=function(){return this._watcher},e.prototype.getBlockingDistance=function(){return oe.getBlockingDistanceRadius()},e.prototype.getPosition=function(){var e=this.getRect();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRect=function(){return this._domAdapter?this._domAdapter.getBoundingClientRect():this._elementToReplace.getBoundingClientRect()},e.prototype.setDebug=function(e){this._debug&&this._debug.parentElement.removeChild(this._debug),this._debug=e},e.prototype.getDebug=function(){return this._debug},e.prototype.setState=function(e){c.log("BlockingD: "+this._articleData.getArticleUrl()+" is "+e),this._state=e},e.prototype.getState=function(){return this._state},e.prototype.getViewportMaskElement=function(){return this._viewportMask},e.prototype.setViewportObserver=function(e){this._viewportObserver=e},e.prototype.getViewportObserver=function(){return this._viewportObserver;
},e.prototype.setPlayerInstance=function(e){this._playerInstance=e},e.prototype.getPlayerInstance=function(){return this._playerInstance},e.prototype.setManualClick=function(e){e.length&&c.logWarning("SetManualClick as array which is not supported at the moment"),this._manualClick=e},e.prototype.getManualClick=function(){return this._manualClick},e.prototype.setIsLazy=function(e){this._isLazy=e},e.prototype.getIsLazy=function(){return this._isLazy},e.prototype.getUniqId=function(){return this._uuid},e.prototype.getRawAnchorValue=function(){return this._rawAnchorValue},e.prototype.getContainerUnique=function(){return this._containerUnique},e.prototype.dispose=function(){this._onDisposed&&(this.disposedHltData=c.cloneObject(se.getHltByProduct(this._articleData.getHighlights(),this._product)),this.disposedArticleUrl=this._articleData.getArticleUrl(),this._onDisposed.dispatch(this),this._domContainerElementTracker&&(this._domContainerElementTracker.dispose(),this._domContainerElementTracker=null),this._domViewportMaskElementTracker&&(this._domViewportMaskElementTracker.dispose(),this._domViewportMaskElementTracker=null),this._domMinuteContainerElementTracker&&(this._domMinuteContainerElementTracker.dispose(),this._domMinuteContainerElementTracker=null),this._domAdapter&&(this._domAdapter.dispose(),this._domAdapter=null),this._articleData=null,this._apvPlayer=null,this._elementToReplace=null,this._elementSize=null,this._attrValue=null,this._viewportMask=null,this._viewportObserver=null,this._containerElement=null,this._onDisposed.removeAll(),this._onDisposed=null,this._hasDisposed=!0,this._minuteLogo=null,this._watcher=null,this._manualClick=null,this._clickElements=null,c.log("APV data has been disposed"))},e.prototype.hasDisposed=function(){return this._hasDisposed},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype._onContainerElementRemoved=function(){this.dispose()},e.prototype.getBelongToUrl=function(){return this._belongToUrl},e.prototype.getHighlights=function(){return this._articleData.getHighlights()},e.prototype.getHighlightId=function(){if(this._hasDisposed)return this.disposedHltData.hltId;var e=se.getHltByProduct(this._articleData.getHighlights(),this._product);return e||c.logError("shouldnt ever get to this point"),e.hltId},e.prototype.getRank=function(){var e=se.getHltByProduct(this._articleData.getHighlights(),this._product);return e||c.logError("BlockingD: shouldnt ever get to this point"),e.rank},e.prototype.getHltAPVUrl=function(){if(this._hasDisposed)return this.disposedHltData.vidUrl;var e=se.getHltByProduct(this._articleData.getHighlights(),this._product);return e||c.logError("shouldnt ever get to this point"),e.vidUrl},e.prototype.getArticleUrl=function(){return this._hasDisposed?this.disposedArticleUrl:this._articleData.getArticleUrl()},e}();!function(){function e(e){function t(e,t){d.has(e,t)||d.add(e,t)}function n(){return!d||d.getNumListeners()>0}function r(){u&&(p&&(p.disconnect(),p=null),d.removeAll(),d=null,u=null)}function i(){p=new MutationObserver(o),p.observe(u.getElementToReplace(),{attributes:!0});var e=u.getElementToReplace();e.addEventListener?e.addEventListener("load",a):e.attachEvent("onload",a),u.onDisposed().add(r)}function o(e){c.isElementLazyLoad(u.getElementToReplace())===!1&&s()}function a(){if(u){var e=u.getElementToReplace();c.isElementLazyLoad(e)===!1&&s()}}function s(){h>0&&(clearTimeout(h),h=0),c.isElementHasSize(u.getElementToReplace())?d.dispatch(u):h=setTimeout(s,50)}var u=e,d=new l.utils.Signal,p=null,h=0;return i(),{addListener:t,isWatched:n,dispose:r}}l.apv=l.apv||{},l.apv.LazyLoadWatcher=e}(),function(){function e(){this._usedApvDataList={},this._isRequestDisposedUpdate=!1,this._clickSentApv={},this._usedArticleDataList={},this._alreadySentImpression={}}e.prototype.isArticleDataAlreadyOnPage=function(e){var t=se.getHltByProduct(e.getHighlights(),s.Emitter.PRODUCT_IN_ARTICLE);return!!this._usedArticleDataList[t.hltId.toString()]},e.prototype.isAPVAlreadyExists=function(e){if(this._usedApvDataList[e.getContainerUnique()])return!0;for(var t=Object.keys(this._usedApvDataList),n=0;n<t.length;n++)if(t[n]===e.getContainerElement()||this._usedApvDataList[t[n]]._containerElement===e.getContainerElement())return!0;return!1},e.prototype.add=function(e,t){if(e.hasDisposed())return!1;if(this.isAPVAlreadyExists(e))return!1;var n=this;this._usedApvDataList[e.getContainerUnique()]=e,"undefined"==typeof e.getHighlightId()&&c.logWarning("apvData with no highlight, make sure we have highlight in 'InArticlePlacer'");var r=e.getHighlightId().toString();return this._usedArticleDataList[r]=e,e.onDisposed().add(function(e){n.remove(e)}),this._alreadySentImpression[e.getKeyProduct()]&&this.setImpressionSent(e),this._clickSentApv[e.getKeyProduct()]&&e.setClickAlreadySent(),e.getProduct()===s.Emitter.PRODUCT_IN_ARTICLE&&e.setState(s.APVStates.Active),!0},e.prototype.remove=function(e){var t=e.getContainerUnique();this._usedApvDataList[t]&&delete this._usedApvDataList[t];var n=e.getHighlightId().toString();this._usedArticleDataList[n]&&delete this._usedArticleDataList[n],this._isRequestDisposedUpdate||(this._isRequestDisposedUpdate=!0,c.getRequestAnimationFrame(this.sendApvDisposedEvent.bind(this)))},e.prototype.sendApvDisposedEvent=function(){this._isRequestDisposedUpdate=!1,h.dispatchEvent(s.Events.APV_DISPOSED)},e.prototype.getApvDataByKeyProduct=function(e,t){var n=this._getAllApvDataByKeyProduct(e,t);return n.length>0?n[0]:null},e.prototype.getApvDataByVideoIdHrefAndProduct=function(e,t,n){for(var r=Object.keys(this._usedApvDataList),i=[],o=0;o<r.length;o++){var a=this._usedApvDataList[r[o]];a.getVideoId()===e&&a.getArticleData().getArticleUrl()===t&&a.getProduct()===n&&i.push(a)}return i.length>0?i[0]:null},e.prototype.setClickAlreadySent=function(e){e&&e.setClickAlreadySent();for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var r=t[n];r!==e&&r.setClickAlreadySent()}this._clickSentApv[e.getKeyProduct()]=!0},e.prototype.setImpressionSent=function(e){this._alreadySentImpression[e.getKeyProduct()]=!0;for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var r=t[n];r.setImpressionHasSent()}},e.prototype.setShouldSendImpClickForApvData=function(e,t){e.setShouldSendImpression(t),e.getDidImpressionSent()||e.setShouldSendClickEvent(t)},e.prototype.setIsClickRegistered=function(e,t){e.setIsClickRegistered(t)},e.prototype.getShouldSendClickEvent=function(e){return!(!e||!e.getShouldSendClickEvent())},e.prototype.getIsClickRegistered=function(e){return e.getIsClickRegistered()},e.prototype.getShouldSendImpression=function(e){return e.getShouldSendImpression()},e.prototype.getAllActiveApv=function(){for(var e=Object.keys(this._usedApvDataList),t=[],n=0;n<e.length;n++){var r=this._usedApvDataList[e[n]];r.getState()===s.APVStates.Active&&t.push(r)}return t},e.prototype._getAllApvDataByKeyProduct=function(e,t){for(var n=Object.keys(this._usedApvDataList),r=[],i=0;i<n.length;i++){var o=this._usedApvDataList[n[i]];o.getHighlightId()===e&&o.getProduct()===t&&r.push(o)}return r},e.prototype.getAmountOfApvDataOnPage=function(){return Object.keys(this._usedApvDataList).length},e.prototype.create=function(e){var t=new Y(e),n=this.add(t,e.product);if(n)return t},e.prototype.setShouldSendClickEvent=function(e,t){e.setShouldSendClickEvent(t)},e.prototype.getApvDataByContainerUnique=function(e){return this._usedApvDataList[e]?this._usedApvDataList[e]:void c.logWarning("Apv on page without registration on manager... shouldn't happen")},e.prototype.sendClickEvent=function(e){H.sendClick(e.getArticleData(),{type:s.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:s.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.getProduct(),placement:e.getName()},!0,e)},l.ApvDataManager=e}(),function(){function e(e){t=e,h.addEventListener(s.Events.LOAD_MORE_FOUND,this.loadMoreHandler,this)}var t;e.prototype.init=function(){this.markPlaces();setInterval(function(){this.markPlaces()}.bind(this),1e3);this.iterMarked=!1},e.prototype.loadMoreHandler=function(e){this.markPlaces(),e&&e.data&&"NFL"==e.data.origin||h.dispatchEvent(s.Events.FORCE_FIND_ELMS)},e.prototype.setContainerAttr=function(e,t,n){e.setAttribute(t,n||"true")},e.prototype.getNewContainers=function(e){for(var t=e.getContainerSelector().split(","),n=0;n<t.length;n++)t[n]+=":not(["+s.integrationDataSet.ENABLE+"])";var r=t.join(),i=document.querySelectorAll(r);return i},e.prototype.markPlacement=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(this.setContainerAttr(r,s.integrationDataSet.ENABLE,e.getName()),this.setContainerAttr(r,s.integrationDataSet.METHOD,e.getMethod()),this.iterMarked=!0,"a"!==e.getAnchorSelector()){var i=r.querySelector(e.getAnchorSelector());i&&i.setAttribute(s.integrationDataSet.ANCHOR,"true"),e.getAnchorSelector()===s.sizeSelector.CONTAINER&&r.setAttribute(s.integrationDataSet.ANCHOR,"true")}if("img"!==e.getPreviewSelector()){var o=r.querySelector(e.getPreviewSelector());o&&o.setAttribute(s.integrationDataSet.PREVIEW,"true"),e.getPreviewSelector()===s.sizeSelector.CONTAINER&&r.setAttribute(s.integrationDataSet.PREVIEW,"true")}if("undefined"!=typeof e.getSizeSelector()&&""!==e.getSizeSelector()){var a=r.querySelector(e.getSizeSelector());a&&a.setAttribute(s.integrationDataSet.SIZE,"true"),e.getSizeSelector()===s.sizeSelector.CONTAINER&&r.setAttribute(s.integrationDataSet.SIZE,"true")}}this.markObserverSelector(e),this.markMaskSelector(e)},e.prototype.markObserverSelector=function(e){if(e.getViewportObserverSelector())for(var t=document.querySelectorAll(e.getViewportObserverSelector()),n=0;n<t.length;n++){var r=t[n];r.setAttribute(s.integrationDataSet.VIEWPORT_OBSERVER,"true")}},e.prototype.markMaskSelector=function(e){if(e.getViewportMaskSelector())for(var t=document.querySelectorAll(e.getViewportMaskSelector()),n=0;n<t.length;n++){var r=t[n];r.setAttribute(s.integrationDataSet.VIEWPORT_MASK,"true")}},e.prototype.markPlaces=function(){for(var e,t=pe.getAllPlacements(),n=0;n<t.length;n++){e=t[n];var r=this.getNewContainers(e);0!==r.length&&this.markPlacement(e,r)}this.iterMarked&&h.dispatchEvent(s.Events.FORCE_FIND_ELMS),this.iterMarked=!1},l.services=l.services||{},l.services.Simulation=e}(),function(){function e(i,o,a){e.__superCtor__.call(this),!t&&(t=i),!n&&(n=o),!r&&(r=a)}var t,n,r;l.utils.ApvElementUtils;c["extends"](e,a),e.prototype.checkForArticleData=function(e){return ve.isArticleDataAlreadyOnPage(e)},e.prototype.createData=function(e){e.product=s.Emitter.PRODUCT_APV,e.method=this.getMethodOfInsertion(e);var t=n.create(e);if(t){var r=[],i=[];if(l.publisher.utils&&l.publisher.utils.getAdditionalClickElements&&(i=l.publisher.utils.getAdditionalClickElements(e)),e.containerElement===e.anchorElement)r=[t.getContainerElement()];else{var o=t.getContainerElement(),a="["+e.attributeName+'*="'+e.attrValue+'"]',c="["+e.attributeName+'*="'+encodeURIComponent(e.attrValue)+'"]',u=o.querySelectorAll(a+","+c);r=Array.prototype.slice.call(u)}return r=r.concat(i),t.setClickElements(r),t}},e.prototype.getMethodOfInsertion=function(e){var t=null;return e.containerElement.dataset[s.integrationDataSetElm.METHOD]&&"true"!=e.containerElement.dataset[s.integrationDataSetElm.METHOD]&&(t=e.containerElement.dataset[s.integrationDataSetElm.METHOD]),e.containerElement.removeAttribute(s.integrationDataSet.METHOD),t},e.prototype.filterHiddenElements=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.offsetParent&&t.push(r)}return t},e.prototype.retrieveDomElements=function(e){var t={};return t.elmToReplace=this.getElementToReplace(e),t.elementSize=this.getElementSize(e)||t.elmToReplace,t.elmToReplace&&r.isElementToReplaceValid(t.elmToReplace,t.elementSize)?(t.isLazy=r.isElementLazyLoad(t.elmToReplace),t.viewportMaskElement=this.getViewportMaskElement(e,t.elmToReplace),t.viewportObserver=this.getViewportObserver(e,t.elmToReplace),t.name=this._generateName(e),t):null},e.prototype.getApvDataByContainer=function(e){var t=this.checkForArticleData(e);if(t){c.extendObject(e,t);var n=this.retrieveDomElements(e);if(n)return c.extendObject(e,n),this.createData(e)}},e.prototype.getViewportMaskElement=function(e,t){var n=document.querySelectorAll("["+s.integrationDataSet.VIEWPORT_MASK+"]");if(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.contains(t))return i}return window}return window},e.prototype.getViewportObserver=function(e,t){var n=[],r=document.querySelectorAll("["+s.integrationDataSet.VIEWPORT_OBSERVER+"]");if(r)for(var i=0;i<r.length;i++){var o=r[i];o.contains(t)&&n.push(o)}return n},e.prototype.getNewApvData=function(){var e=[],t=this.getContainers();if(0!==t.length){for(var n=0;n<t.length;n++){var r=t[n];if(!r||!r.querySelector(".minute-container")){var i=this.getApvDataByContainer({containerElement:r});i&&e.push(i)}}return e}},e.prototype.getContainers=function(){var e=document.querySelectorAll("["+s.integrationDataSet.ENABLE+"]");return 0===e.length?[]:e},l.services=l.services||{},l.services.VideoGenerator=l.services.VideoGenerator||{},l.services.VideoGenerator.Base=e}(),function(){function e(i,o,a){e.__superCtor__.call(this,i,o,a),!t&&(t=i),!n&&(n=o),!r&&(r=a),this.anchorWarned=!1,this.previewWarned=!1}var t,n,r;c["extends"](e,l.services.VideoGenerator.Base),e.prototype._getAricleData=function(e){for(var t,n,r,i=e.attributes,o=0;o<i.length;o++)if(r=i[o].name,n=e.getAttribute(r),t=le.getRegularArticleDataByURL(c.urls.getCanonicalURL(n)))return{attributeName:r,targetUrl:n,articleData:t};return null},e.prototype._getAnchorElement=function(e){var t=e.containerElement;if(t.dataset.minAnchor)return t;var n=e.containerElement.querySelector("["+s.integrationDataSet.ANCHOR+"]");if(!n){var r=e.containerElement.querySelectorAll("a");n=r[0],r.length>1&&!this.anchorWarned&&(this.anchorWarned=!0),0!==r.length||this.anchorWarned||(this.anchorWarned=!0),n||"A"!==e.containerElement.tagName||(n=e.containerElement)}return n},e.prototype.checkForArticleData=function(e){var t=this._getAnchorElement(e);if(!t)return null;var n=this._getAricleData(t);if(!n||c.isObjEmpty(n))return null;var r=n.articleData;return r&&r.hasAPVByProduct(s.Emitter.PRODUCT_APV)?{anchorElement:t,attributeName:n.attributeName,attrValue:c.urls.getCanonicalURL(n.targetUrl),rawUrl:c.urls.getRawByUrl(n.targetUrl),articleData:r}:null},e.prototype.getElementToReplace=function(e){var t=e.containerElement;if(t.dataset.minPreview)return t;var n=t.querySelector("["+s.integrationDataSet.PREVIEW+"]");if(!n){var r=t.querySelectorAll("img");if(r.length>=1){r.length>1&&!this.previewWarned&&(this.previewWarned=!0);for(var i=0;i<r.length;i++)if((!$.isFF()||"none"!==r[i].display)&&"none"!==getComputedStyle(r[i]).display&&"none"!=r[i].offsetParent){n=r[i];break}}if(!n)return this.previewWarned=!0,null}return n},e.prototype.getElementSize=function(e){return e.containerElement.dataset.minSize?e.containerElement:e.containerElement.querySelector("["+s.integrationDataSet.SIZE+"]")},e.prototype._generateName=function(e){var t="true",n=e.containerElement;return t="true"!==n.getAttribute(s.integrationDataSet.ENABLE)&&""!==n.getAttribute(s.integrationDataSet.ENABLE)?n.getAttribute(s.integrationDataSet.ENABLE):n.offsetWidth+"X"+n.offsetHeight},l.services=l.services||{},l.services.VideoGenerator=l.services.VideoGenerator||{},l.services.VideoGenerator.Integrated=e}(),function(){function e(e){this.elm=e}function t(e){this._blockersContainers=[],this.painter=e}l.services=l.services||{},l.services.BlockingDistance=l.services.BlockingDistance||{},l.services.BlockingDistance.StaticBlockerService=t,e.prototype.getRact=function(){return this.elm.getBoundingClientRect()},e.prototype.getPosition=function(){var e=this.getRact();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRank=function(){return 999},e.prototype.getBlockingDistance=function(){return oe.getBlockingDistanceRadius()},t.prototype.isStaticAlreadyMarked=function(e){for(var t=0;t<this._blockersContainers.length;t++){var n=this._blockersContainers[t];if(n.elm&&n.elm==e)return!0}return!1},t.prototype.getBlockers=function(){for(var t=oe.getStaticBlockerSelector(),n=document.querySelectorAll(t),r=0;r<n.length;r++){var i=n[r];if(!this.isStaticAlreadyMarked(i)){var o=new e(i);o&&(this.painter.draw.drawStatic(o),this._blockersContainers.push(o))}}return this._blockersContainers}}(),function(){function e(e){function t(){var t=localStorage&&localStorage.getItem("_minDisableBlockingD"),n=e.getPlaymode()==s.playmode.VIEWPORT;if(!t&&n&&e.isBlockingServiceActive()){var r=new l.services.BlockingDistance.DocumentRadiusPainterFactory(e).create();return new l.services.BlockingDistance.BlockingDistanceService(e,r)}return new l.services.BlockingDistance.NotActivatedBlockingDistance}return{create:t}}l.services=l.services||{},l.services.BlockingDistance=l.services.BlockingDistance||{},l.services.BlockingDistance.Factory=e}(),function(){function e(e,t){o=t,d=new l.services.BlockingDistance.StaticBlockerService(t)}function t(e,t){return t.getRank()-e.getRank()}function n(e,t){var n=Math.pow(e.top-t.top,2),r=Math.pow(e.left-t.left,2);return Math.sqrt(r+n)}function r(e,t){for(var r,i=oe.noDuplicateVideos(),o=0;o<t.length;o++){var l=t[o];if(e.getUniqId()!==l.getUniqId()&&l.getState()!==s.APVStates.Blocked&&l.getState()!==s.APVStates.Disabled&&l.getState()!==s.APVStates.New){if(r=n(e.getPosition(),l.getPosition()),i&&e.getMinuteVideoId()==l.getMinuteVideoId())return!0;if(r<l.getBlockingDistance()){var c=e.getElementToReplace();return a.indexOf(c)===-1&&a.push(c),!0}}}return!1}function i(e){for(var t,r,i=0;r=u[i];i++)if(t=n(e.getPosition(),r.getPosition()),t<r.getBlockingDistance()){c.log("BlockingD: "+e.getArticleData().getArticleUrl()+" by a static container ");var o=e.getElementToReplace();a.indexOf(o)===-1&&a.push(o);var l={url:c.urls.getLocationUrl(),user_agent:navigator.userAgent,source:$.getAnalyticsSource(),publisher:oe.getPublisherIdNumber(),category:"BlockingD",action:"blockedByStatic",label:urlBlocked,value:e.getHighlightId()};return te.send(s.Emitter.CUSTOM_EVENTS,l),!0}return!1}l.services=l.services||{},l.services.BlockingDistance=l.services.BlockingDistance||{},l.services.BlockingDistance.BlockingDistanceService=e;var o=null,a=[],u=[],d=null;e.prototype.calculate=function(e){u=d.getBlockers();for(var n=ve.getAllActiveApv(),a=e.sort(t),l=n.concat(e).sort(t),c=0;c<a.length;c++){var p=a[c],h=s.APVStates.Active;(i(p)||r(p,l))&&(h=s.APVStates.Blocked),p.setState(h)}o.draw.draw(n.concat(e))}}(),function(){function e(){this.state=t.SCROLLED}var t={INIT:0,NOT_SCROLLED:1,SCROLLED:2},n=function(n){this.viewportMaskElement=n,this.mutationObserver=new MutationObserver(e.bind(this)),this.mutationObserver.observe(this.viewportMaskElement,{attributes:!0}),this.state=t.INIT};n.prototype.isCarouselBlocking=function(){return this.state===t.SCROLLED},n.prototype.getViewportMaskElement=function(){return this.viewportMaskElement},l.apv=l.apv||{},l.apv.CarouselContainer=n}(),function(){function e(e){return{create:function(){var e=localStorage&&localStorage.getItem&&"true"==localStorage.getItem("_minShowBD");return{draw:e?r():{draw:function(){},drawStatic:function(){}}}}}}function t(e){e.dataset.old_opacity=e.style.opacity}function n(e){if(e.getProduct()!==s.Emitter.PRODUCT_IN_ARTICLE){var t=e.getElementToReplace();t.style.opacity=t.dataset.old_opacity}}function r(){function e(e){if(e.getProduct()!==s.Emitter.PRODUCT_IN_ARTICLE){var n=e.getElementToReplace();switch(t(n),e.getState()){case s.APVStates.Active:n.style.opacity=1;break;case s.APVStates.Blocked:case s.APVStates.Disabled:case s.APVStates.Disposed:n.style.opacity=.2,e.getDebug().style.opacity=0}}}function r(e){var t=e.getPosition(),n=t.left+window.scrollX,r=t.top+window.scrollY,i=2*e.getBlockingDistance(),o="rgba(255, 0, 0, 0.1)",a=c(r,n,i,o,e);e.getDebug().appendChild(a)}function i(e){var t=document.createElement("div");document.body.insertAdjacentElement("afterbegin",t),e.setDebug(t)}function o(){for(var t in u){var o=u[t];if(o.hasDisposed()||o.getProduct()===s.Emitter.PRODUCT_IN_ARTICLE)return;n(o),i(o),r(o),e(o)}}function a(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.getUniqId();u[r]||(u[r]=n)}}function l(e){var t=document.createElement("div");document.body.insertBefore(t,document.body.childNodes[0]);var n=e.getPosition(),r=n.left+window.scrollX,i=n.top+window.scrollY,o=2*e.getBlockingDistance(),a="rgba(0, 0, 255, 0.1)",s=c(i,r,o,a,e);t.appendChild(s)}function c(e,t,n,r,i){var o=document.createElement("div");return o.className="minPoint",o.style.position="absolute",o.style.width=n+"px",o.style.height=n+"px",o.style.top=e+"px",o.style.left=t+"px",o.style.zIndex=1e7,o.style.backgroundColor=r,o.style.transform="translate(-50%,-50%)",o.style.border="dotted green",o.style.borderRadius="50%",o.style.display="flex",o.style.alignItems="center",o.style.alignContent="center",o.style.justifyContent="center",o.style.textShadow="0 0 10px white",o.style.fontSize="20px",o.style.pointerEvents="none",o.style.textAlign="center",o.innerHTML="radius: "+n+"<br/>rank: "+i.getRank(),o}var u={};return setInterval(o,2e3),{draw:a,drawStatic:l}}l.services=l.services||{},l.services.BlockingDistance=l.services.BlockingDistance||{},l.services.BlockingDistance.DocumentRadiusPainterFactory=e}(),function(){function e(){}l.services=l.services||{},l.services.BlockingDistance=l.services.BlockingDistance||{},l.services.BlockingDistance.NotActivatedBlockingDistance=e,e.prototype.calculate=function(e){e.forEach(function(e){e.setState(s.APVStates.Active)})}}(),function(){function e(e,a,s,l,c){t=e,n=a,r=s,i=l,o=c,this.lastKnownUrl=location.href}var t=null,n=null,r=null,i=null,o=null;l.services=l.services||{},l.services.inArticlePlacers=l.services.inArticlePlacers||{},l.services.inArticlePlacers.Base=e,l.services.inArticlePlacers.Placer=e,e.prototype.init=function(){this.startAPVFactory(),h.addEventListener(s.Events.PLAYER_FOUND,this.newPlayerFoundHandler.bind(this)),h.addEventListener(s.Events.VIDEOS_UPDATE,this.startAPVFactory.bind(this)),h.addEventListener(s.Events.URL_MANIPULATION_INTERVAL_SERVICE,this.urlManipulationHandler.bind(this))},e.prototype.createInArticleApvWrapper=function(e){if(e){var t=o.add(e);t&&(c.log("APV IN ARTICLE Wrapper will now be created. VideoId: "+e.getArticleData().getArticleId()+', selector: "'+e.getName()+'"'),new l.apv.APVWrapper(e))}},e.prototype.getName=function(){return"InArticle"},e.prototype.urlManipulationHandler=function(){this.startAPVFactory()},e.prototype.startAPVFactory=function(){if(c.isPlacementEnabled(s.Emitter.PRODUCT_IN_ARTICLE)){var e=this.getPlayersOnPage()||[];e instanceof NodeList&&(e=Array.prototype.slice.call(e));var t=Object.keys(e||{});if(0===t.length)return void this.listenToNewPlayerEvent();for(var n=0;n<t.length;n++)this.createInArticleByPlayer(e[t[n]])}},e.prototype.createInArticleByPlayer=function(e){var t=this.collectApvWrapperData(e);this.createInArticleApvWrapper(t)},e.prototype.newPlayerFoundHandler=function(e){},e.prototype.createDataObject=function(e){var t={};t.player=e;var n=this.getArticleData(e);if(n&&n.hasAPVByProduct(s.Emitter.PRODUCT_IN_ARTICLE))return t.articleData=n,t},e.prototype.collectApvWrapperData=function(e){if(this.shouldPlayAPV(e)){var t=this.createDataObject(e);if(t)return this.createApvData(t)}},e.prototype.createApvData=function(e){var n=this.getContainerElement(e);n||t.logWarning("No container found on in article so... ;|  ");var r=new Y({articleData:e.articleData,elementSize:n,containerElement:n,product:s.Emitter.PRODUCT_IN_ARTICLE,viewportMaskElement:this.getInarticleViewportMask(e),viewportObserver:this.getViewportElementsToObserve(e)});r.setName(this.getName());var i=this.getManualClick(e.player);return i&&r.setManualClick(i),r.setPlayerInstance(e.player),r},e.prototype.listenToNewPlayerEvent=function(){},e.prototype.getPlayersOnPage=function(){c.logError("Have to implement method that returns all players' instances")},e.prototype.getArticleData=function(){c.logError("getArticleData is not implemented")},e.prototype.shouldPlayAPV=function(e){return!0},e.prototype.getManualClick=function(){return null},e.prototype.getContainerElement=function(e){c.logError("Have to implement method getContainerElement")},e.prototype.getInarticleViewportMask=function(){return oe.getInArticleViewportMask()},e.prototype.getViewportElementsToObserve=function(){return[]}}(),function(){function e(r,i,o,a,s){t=r,n=a,e.__superCtor__.call(this,r,i,o,a,s),this.knownElements=[]}var t=null,n=null;c["extends"](e,l.services.inArticlePlacers.Base),l.services.inArticlePlacers.Placer=e,e.prototype.getName=function(){return"TopGear InArticle"},e.prototype.listenToNewPlayerEvent=function(){var e=document.querySelector("video.video-js");if(e){var t=new MutationObserver(function(){document.querySelector("div.video-js")&&(t.disconnect(),this.startAPVFactory())}.bind(this));t.observe(e,{childList:!0,attributes:!0})}},e.prototype.getPlayersOnPage=function(){var e=document.querySelectorAll(".video-js");e=Array.prototype.filter.call(e,function(e){return null===c.closest(e,".carousel__slide.bx-clone")&&null===c.closest(e,".is-hidden")});for(var t=[],n=0;n<e.length;n++){var r=e[n];this.knownElements.indexOf(r)==-1&&t.push(r)}return t},e.prototype.getArticleData=function(e){return le.getInArticleArticleData(e.dataset.videoId)},e.prototype.shouldPlayAPV=function(e){return!e.classList.contains("vjs-has-started")},e.prototype.getContainerElement=function(e){return e.player},e.prototype.getManualClick=function(e){},e.prototype.getInarticleViewportMask=function(e){for(var t=document.querySelectorAll(".carousel__slides-container, .bx-viewport"),n=0;n<t.length;n++)if(t[n].contains(e.player))return t[n];return document.body},e.prototype.createApvData=function(t){return this.knownElements.push(t.player),e.__super__.createApvData.call(this,t)},e.prototype.getViewportElementsToObserve=function(e){for(var t=document.querySelectorAll(".carousel__slides, .modal-gallery__slides"),n=[],r=0;r<t.length;r++)t[r].contains(e.player)&&n.push(t[r]);return n}}(),function(){function e(e){this.apvData=e,this._initElements(),this.apvData=null}l.apv=l.apv||{},l.apv.APVWrapper=e;var t=l.publisher.utils;e.prototype._createDomAdapter=function(){if(this.apvData.getProduct()===s.Emitter.PRODUCT_APV)return l.apv.domAdapter.pubDomAdapter?new l.apv.domAdapter.pubDomAdapter:new l.apv.domAdapter.Base;if(t.getDomAdapter)return new(l.apv.inArticleDomAdapter[t.getDomAdapter()]);var e=Object.keys(l.apv.inArticleDomAdapter);return 1==e.length?new l.apv.inArticleDomAdapter[e[0]]:new l.apv.inArticleDomAdapter},e.prototype._createPlaymode=function(){if(ie.isTestGroup())return new l.apv.playmodes.TestGroup;var e=l.apv.playmodes;return new e.Viewport},e.prototype._initElements=function(){var e=new l.apv.players.ApvPlayerBase;e.init(this.apvData),this.apvData.setApvPlayer(e);var t=new l.apv.logos.LogoElmBase;t.init(this.apvData.getProduct()),this.apvData.setMinuteLogo(t);var n=this._createDomAdapter();if(!n)return c.log("No DomAdapter found."),null;this.apvData.setDomAdapter(n),fe.register(this.apvData);var r=this._createPlaymode(this.apvData);return r?(r.setDomAdapter(this.apvData),r.start(),void n.init(this.apvData)):(c.log("No playmode found - probably unsupported browser."),null)}}(),function(){function t(){var e=l.services.VideoGenerator;return e.pubApvData?e.pubApvData:e.Integrated}function n(e){for(var t=c.cloneArray(e.getContainerElement().querySelectorAll("img,div[style*='background-image']")||[]),n=0;n<t.length;n++){var r=t[n];l.utils.ApvElementUtils.setElementAsReplaced(r)}l.utils.ApvElementUtils.setElementAsReplaced(e.getElementToReplace())}function r(e,n,r){i=e,o=n;var l=t(),c=this;a=new l(e,n,r),a.addEventListener(s.Events.NEW_VIDEO_DATE,function(e){c.processApvDataList(e.data)}),this.blockingDistanceService=ye.create(i),this._apvWrapperNotCreatedHash={},this._lazyWatcherHash={},this._htmlReport=null,this._apvsOnPage=0,this.findReplaceableElementsAndPlaceVideos(),setInterval(function(){this.findReplaceableElementsAndPlaceVideos()}.bind(this),1e3)}l.services=l.services||{};var i=null,o=null,a=null;l.services.PlacementService=r,r.prototype.findReplaceableElementsAndPlaceVideos=function(){var e=a.getNewApvData();this.processApvDataList(e)},r.prototype.processApvDataList=function(e){if(e&&(!e||0!=e.length)){var t=this;this.blockingDistanceService.calculate(e),e.forEach(function(e){t._lazyWatcherHash[e.getKey()]===e||t._apvWrapperNotCreatedHash[e.getKey()]||e.hasDisposed()||e.getState()===s.APVStates.Blocked||e.getState()===s.APVStates.Disabled||(e.getIsLazy()?t.createLazyWatcher(e):t.createApvWrapper(e),e.onDisposed().add(function(e){var n=e.getKey();t._lazyWatcherHash[n]&&delete t._lazyWatcherHash[n]}))}),this.reportCounters()}},r.prototype.createLazyWatcher=function(e){var t=new l.apv.LazyLoadWatcher(e);e.setWatcher(t),t.addListener(this.handleLazyLoadWatcher,this),this._lazyWatcherHash[e.getKey()]=e,c.log("Lazy Load Watcher Created. VideoId: "+e.getArticleData().getArticleId())},r.prototype.deleteLazyWatcher=function(e){var t=e.getWatcher();t.dispose(),e.removeWatcher(),this._lazyWatcherHash[e.getKey()]=null,delete this._lazyWatcherHash[e.getKey()]},r.prototype.createApvWrapper=function(e){return this._apvsOnPage++>=i.getMaxApvsPerPage()?(this._apvWrapperNotCreatedHash[e.getKey()]=!0,void c.log("Blocked APV creation. number of APVs on page exceeds limit. Max="+i.getMaxApvsPerPage())):(new l.apv.APVWrapper(e),n(e),c.log("APV Wrapper Created. VideoId: "+e.getArticleData().getArticleId()),void this.reportCounters())},r.prototype.handleLazyLoadWatcher=function(e){var t=e.getElementToReplace(),n=e.getElementSize();c.isElementToReplaceValid(t,n)&&(this.createApvWrapper(e),this.deleteLazyWatcher(e))},r.prototype.reportCounters=function(){var t=e._report||{APVs:-1,Watchers:-1};if(e._report={APVs:document.querySelectorAll("[data-apv_replaced]").length,NotCreated:Object.keys(this._apvWrapperNotCreatedHash).length,Watchers:document.querySelectorAll("[data-apv_watched]").length},(t.Watchers!==e._report.Watchers||t.NotCreated!==e._report.NotCreated||t.APVs!==e._report.APVs)&&document.body&&document.body.appendChild){var n="# of ApvData: "+o.getAmountOfApvDataOnPage();n+=e._report.NotCreated?" # of Apv not created due to max on page: "+e._report.NotCreated:" ",n+=e._report.Watchers?" # of Apvs that are watched: "+e._report.Watchers:" ",c.log(n),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",e._report.APVs),this._htmlReport.setAttribute("data-apvs-not-created",e._report.NotCreated),this._htmlReport.setAttribute("data-watchers",e._report.Watchers),this._htmlReport.setAttribute("data-test",ie.isTestGroup())}}}(),c.debugParamsOverrides();var q=null,K=new A(g),J=new P(K),Z=I.getInstance(J);if(Z){Z.setConfig(s.cookiesKeysTable);var X=new D(localStorage);if(q=j.create(c,window.location),q.get(q.CONSTS.DISABLE_VERSION)!==e.ver){var Q=new w,$=Q.create(e.compatibility),ee=new S(c,Z),te=new t(c,Z,s.Urls),ne=new B(c,Z,ee),re=new b(c,window,Z),ie=new F(c,window,K,re,h,e.debugParams[f.FORCE_TEST],Z),oe=new T(e,c,ie),ae=new R(c,oe),se=new L(c,X,$,oe),le=new O(c,oe,$,ae,se),ce=new M,ue=new r(c,Z,te,ce),de=new N,pe=new V(c,de),he=new x(c,ie,$,oe,te,ne),ge=new U($,oe),ve=new l.ApvDataManager,fe=new l.analytics.ViewportAnalyticsService,me=new l.services.Simulation(oe),ye=new l.services.BlockingDistance.Factory(oe),Ee=null,_e=new G(c,ie,$,Z,K,v,ee,oe,re),Ae=new W(c,$,oe),Pe=new i(oe,c,ve),Se=new o;Se.init(),ee.init();var Ie=function(){function t(){c.globalTasks.listenToWindowErrors(),c.log(e.debugParams),n(),r()}function n(){e.debug===!0?c.consoleNative.log("Welcome to Minute "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME]):c.consoleNative.log("Welcome to Minute")}function r(){A=e.config,_min.config=null,
$.init(A.config),ne.init(),oe.init(A,$,u,e.debugParams[f.ENABLE_BLOCKING_DISTANCE]),Pe.init(),se.init(),fe.init(),k.init(),ie.init(oe.getTestGroupSize(),!1),l.utils.logger.setTestGroup(ie.isTestGroup()),i(),o(),te.flushAll()}function i(){return he.init(fe),z.sendUrlReport(),$.isBrowserSupported()?$.isLPM()?void c.log("Minute will shut down now due to LPM "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME]):$.isDataSaverOn()?void c.log("Minute will shut down now due to Data saver  "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME]):J.getLocalStorageInstance()?(_e.start(),le.init(A),y(),ue.init(),H.sendDelayedClicks(),void pe.init(oe)):void c.log("Local Storage and Session Storage are not supported. Disable Minute."):void c.log("Minute is not supported "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME])}function o(){E=performance.now(),oe.shouldWaitForLoadEvent()?(window.addEventListener("load",function(){setTimeout(function(){a()},0)}),window.performance&&window.performance.timing&&window.performance.timing.loadEventEnd>0&&a()):a()}function a(){if(!P){S=performance.now();var e=S-E;if(P=!0,g(),v(),d(),h.dispatchEvent(s.Events.SYSTEM_RUNNING),oe.shouldWaitForLoadEvent()&&e>.2){c.log("core delayed: "+e);var t={url:encodeURIComponent(c.urls.getLocationUrl()),user_agent:navigator.userAgent,source:$.getAnalyticsSource(),publisher:oe.getPublisherIdNumber(),category:"CoreDelayed",action:"Delayed",label:"seconds",value:Math.round(e)};te.send(s.Emitter.CUSTOM_EVENTS,t)}}}function d(){_||(_=new l.scrap.ScraperService,c.log("Detector created"))}function p(){return!!c.isPlacementEnabled(s.Emitter.PRODUCT_IN_ARTICLE)&&!!oe.isInArticlePlacerActive()}function g(){if(!p())return h.addEventListenerOnce(s.Events.URL_MANIPULATION_INTERVAL_SERVICE,g),void c.log("** InArticle is turned off in configuration or didnt pass filter");var e=new l.services.inArticlePlacers.Placer(c,oe,de,$,ve);e.init()}function v(){return c.isPlacementEnabled(s.Emitter.PRODUCT_APV)?(me.init(),Ee=new l.services.PlacementService(oe,ve,c),!0):(c.log("** Placement Disabled by configuration. See filter configuration. **"),!1)}function y(){if(!c.urls.isUrlHomePage()&&p()){var e=c.urls.getLocationUrl();return c.isUrlFilterValid(e,oe.getFilterScraper())?void(le.hasInArticleArticleDataForUrl(e)||""==e||ge.loadNextArticle({onSuccess:le.appendVideos,videosFallback:!1})):void c.log("** Missing Article Data blocked by scraper filter URL. **")}}var E,_=null,A=null,P=!1,S=0;t()};new Ie;return e}}}(window._minDebug||_min||{});